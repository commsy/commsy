{% extends 'CommsyBundle:Base:profile.html.twig' %}

{% import 'CommsyBundle:Utils:macros.html.twig' as macros %}

{% form_theme form 'CommsyBundle:Form:uikit_horizontal_layout.html.twig' %}

{% block content %}
    <div class="uk-grid">

        <div class="uk-width-medium-4-4">
            <div class="uk-panel uk-panel-box uk-panel-box-primary">
                <div class="uk-panel-teaser cs-panel-teaser-primary">
                    <div class="uk-flex uk-flex-middle uk-flex-space-between">
                        <div class="uk-text-large">{{ 'contactData'|trans({}, 'profile') }}</div>
                    </div>
                </div>
                <div class="uk-margin-left uk-margin-right">
                    {{ form_start(form) }}
                        {{ form_errors(form) }}
                        <div class="uk-panel uk-margin-large-bottom">
                            <table class="uk-table">
                                <tr>
                                    <td>{{ form_row(form.email) }} {{ form_row(form.emailRoom) }} {{ form_row(form.emailAccount) }}</td>
                                    <td>{{ form_row(form.emailChangeInAllContexts) }}</td>
                                </tr>
                                <tr>
                                    <td>
                                        <div id="room_profile_contact_emailChoice" class="uk-form-controls">
                                            {{ form_label(form.emailChoice.0) }} {{ form_widget(form.emailChoice.0) }} {{ form_label(form.emailChoice.1) }} {{ form_widget(form.emailChoice.1) }}
                                        </div>
                                    </td>
                                </tr>
                                <tr>
                                    <td>{{ form_row(form.hideEmailInThisRoom) }}</td>
                                    <td>{{ form_row(form.hideEmailInAllContexts) }}</td>
                                </tr>
                                <tr>
                                    <td>{{ form_row(form.phone) }}</td>
                                    <td>{{ form_row(form.phoneChangeInAllContexts) }}</td>
                                </tr>
                                <tr>
                                    <td>{{ form_row(form.mobile) }}</td>
                                    <td>{{ form_row(form.mobileChangeInAllContexts) }}</td>
                                </tr>
                                <tr>
                                    <td>{{ form_row(form.skype) }}</td>
                                    <td>{{ form_row(form.skypeChangeInAllContexts) }}</td>
                                </tr>
                                <tr>
                                    <td>{{ form_row(form.homepage) }}</td>
                                    <td>{{ form_row(form.homepageChangeInAllContexts) }}</td>
                                </tr>
                                <tr>
                                    <td colspan="2">
                                        {{ form_row(form.description) }}
                                        {{ form_row(form.descriptionChangeInAllContexts) }}
                                    </td>
                                </tr>
                            </table>
                        </div>
                           
                        <div class="uk-panel uk-margin-large-bottom">
                            <table class="uk-table">
                                <tr>
                                    <td>{{ form_widget(form.save) }}</td>
                                </tr>
                            </table>
                        </div>
                        {{ form_row(form.emailAccount) }}
                        {{ form_row(form._token) }}
                    {{ form_end(form, {'render_rest': false}) }}
                </div>
            </div>
        </div>
    </div>
    <script type="text/javascript">
        window.onload = function() {
            toggleEmailChoice(document.getElementById('room_profile_contact_emailChoice'));
            document.getElementById('room_profile_contact_emailChoice').onchange = function(event) {
                toggleEmailChoice(this);
            }
        }

        function toggleEmailChoice(choiceElement) {
            let emailChoice = choiceElement.querySelector('input:checked').value;
            let contactEmail = document.getElementById('room_profile_contact_email');
            let roomEmail = document.getElementById('room_profile_contact_emailRoom');
            let accountEmail = document.getElementById('room_profile_contact_emailAccount');
            let changeInAllContexts = document.getElementById('room_profile_contact_emailChangeInAllContexts');
            if (emailChoice === 'account') {
                contactEmail.value = accountEmail.value;
                contactEmail.disabled = changeInAllContexts.disabled = true;
            } else if (emailChoice === 'roomProfile') {
                contactEmail.value = roomEmail.value;
                contactEmail.disabled = changeInAllContexts.disabled = false;
            }
        }

    </script>
{% endblock content %}
