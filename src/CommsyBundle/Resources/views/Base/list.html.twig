{% extends 'CommsyBundle:Base:room.html.twig' %}

{% form_theme form 'CommsyBundle:Form:uikit_horizontal_dynamic_layout.html.twig' %}

{% block content %}
    <div class="uk-grid">

        {# feed #}
        <div class="uk-width-medium-3-5">
            <div class="uk-panel uk-panel-box uk-panel-box-primary">
                
                <div class="uk-panel-teaser cs-panel-teaser-primary">
                    <div class="uk-flex uk-flex-middle uk-flex-space-between">
                        <div class="uk-text-large">
                            {% if not module is empty %}
                                {{module|transchoice(1, {}, "rubric")|capitalize }}
                            {% else %}
                               Missing rubric title
                            {% endif %}

                            ({{itemsCountArray.count}} {{ 'of'|trans({},'messages')}} {{itemsCountArray.countAll}})
                        </div>

                        <div>
                            {# sort dropdown #}
                            <div class="uk-button-dropdown uk-button-primary" data-uk-dropdown="" aria-haspopup="true" aria-expanded="false">
                                <button class="uk-button uk-button-mini">{{ 'list sort'|trans({},'rubric')|capitalize }} <i class="uk-icon-caret-down"></i></button>
                                <div id="cs-entry-navigation" class="uk-padding-remove uk-dropdown uk-dropdown-small">
                                    <ul class="uk-nav uk-nav-dropdown uk-list-striped uk-padding-remove uk-margin-remove uk-text-left">
                                        <li><a href="#">{{ 'title'|trans({},'rubric')}}</a></li>
                                        <li><a href="#">{{ 'modifier'|trans({},'rubric') }}</a></li>
                                        <li><a href="#">{{ 'modification_date'|trans({},'rubric') }}</a></li>
                                        {% if showRating %}
                                            <li><a href="#">{{ 'rating'|trans({},'rubric') }}</a></li>
                                        {% endif %}
                                   </ul>
                                </div>
                            </div>
                            <div class="uk-button-dropdown uk-button-primary" data-uk-dropdown="" aria-haspopup="true" aria-expanded="false">
                                <button class="uk-button uk-button-mini">{{ 'actions'|trans({},'rubric')|capitalize }} <i class="uk-icon-caret-down"></i></button>
                                <div id="cs-entry-navigation" class="uk-padding-remove uk-dropdown uk-dropdown-small">
                                    <ul class="uk-nav uk-nav-dropdown uk-list-striped uk-padding-remove uk-margin-remove uk-text-left">

                                        <li>
                                             <a href="{{ path('commsy_material_create', {'roomId': roomId}) }}">
                                                <i class="uk-icon-justify uk-icon-small uk-icon-plus-circle"></i> {{ 'new'|trans({})}}
                                            </a>

                                        </li>
                                        <li>
                                            <a class="" href="#" id="print" data-section-url="">
                                                <i class="uk-icon-small uk-icon-print uk-icon-justify uk-visible-large"></i> {{ 'print'|trans({})|capitalize }}
                                            </a>
                                        </li>
                                        <li>
                                            
                                            {% if not module is empty %}
                                                {% if module == 'material' %}
                                                    <a href="#" data-uk-button data-commsy-select="{target:'.feed ul', actionUrl: '{{ path('commsy_material_feedaction', {'roomId': roomId}) }}'}" data-title="{{ 'list choice'|trans({},'rubric')|capitalize }}" data-confirm-delete="{{ 'confirm delete'|trans({},'rubric')}}" data-confirm-delete-cancel ="{{'confirm delete cancel'|trans({},'rubric')}}" data-confirm-delete-confirm ="{{'confirm delete confirm'|trans({},'rubric')}}">
                                                    <i class="uk-icon-justify uk-icon-small uk-icon-edit"></i> {{ 'list choice'|trans({},'rubric')|capitalize }}
                                                    </a>
                                                {% elseif module == 'announcement'%}
                                                    <a href="#" data-uk-button data-commsy-select="{target:'.feed ul', actionUrl: '{{ path('commsy_announcement_feedaction', {'roomId': roomId}) }}'}" data-title="{{ 'list choice'|trans({},'rubric')|capitalize }}" data-confirm-delete="{{ 'confirm delete'|trans({},'rubric')}}" data-confirm-delete-cancel ="{{'confirm delete cancel'|trans({},'rubric')}}" data-confirm-delete-confirm ="{{'confirm delete confirm'|trans({},'rubric')}}">
                                                    <i class="uk-icon-justify uk-icon-small uk-icon-edit"></i> {{ 'list choice'|trans({},'rubric')|capitalize }}
                                                    </a>
                                                {% endif %}
                                            {% endif %}

                                       </li>
                                    </ul>
                                </div>
                            </div>

                            {# selection mode old code
                            <button class="uk-button uk-button-mini" data-uk-button data-commsy-select="{target:'.feed ul', actionUrl: '{{ path('commsy_material_feedaction', {'roomId': roomId}) }}'}" data-title="{{ 'list choice'|trans({},'rubric')|capitalize }}" data-alt-title="{{ 'unset list choice'|trans({},'rubric')|capitalize }}" data-confirm-delete="{{ 'confirm delete'|trans({},'rubric')}}" data-confirm-delete-cancel ="{{'confirm delete cancel'|trans({},'rubric')}}" data-confirm-delete-confirm ="{{'confirm delete confirm'|trans({},'rubric')}}">
                                {{ 'list choice'|trans({},'rubric')|capitalize }}
                            </button>
                            #}
                        </div>
                    </div>
                </div>

                {# will be displayed when selection mode is active #}
                <div id="commsy-select-actions" class="uk-hidden" data-uk-sticky>
                    <div class="uk-grid uk-margin-remove">

                        {# change selection #}
                        <div class="cs-list-select-buttons uk-width-2-4 uk-margin-remove uk-margin-top uk-padding-bottom uk-padding-top">
                                <button id="commsy-select-actions-select-all" class="uk-button" type="button" data-uk-button>{{ 'select all entries'|trans({},'rubric')}}</button>
                                <button id="commsy-select-actions-unselect" class="uk-button" type="button" data-uk-button>{{ 'unselect entries'|trans({},'rubric')}}</button>
                        </div>

 
                        {# selection actions old code #}
                        <div class="cs-list-select-buttons uk-text-right uk-width-2-4 uk-margin-remove uk-margin-top uk-padding-bottom">
                            <div class="uk-button-dropdown uk-text-left" data-uk-dropdown="" aria-haspopup="true" aria-expanded="false">

                                <button class="uk-button">{{ 'selected entries'|trans({},'rubric')}} <i class="uk-icon-caret-down"></i></button>
                                <div id="cs-entry-navigation" class="uk-dropdown uk-dropdown uk-padding-remove">
                                    <ul class="uk-nav uk-nav-dropdown uk-list-striped uk-padding-remove uk-margin-remove uk-text-left">

                                        
                                        <li>
                                            <a href="#" id="commsy-select-actions-mark-read">
                                                <i class="uk-icon-justify uk-icon-small uk-icon-check-square-o uk-visible-large"></i> {{ 'mark read'|trans({},'rubric')|capitalize }}
                                            </a>
                                        </li>

                                        
                                        <li>
                                            <a href="#" id="commsy-select-actions-copy">
                                                <i class="uk-icon-justify uk-icon-small uk-icon-copy uk-visible-large"></i> {{ 'copy'|trans({},'rubric')|capitalize }}
                                            </a>
                                        </li>

                                    
                                        <li>
                                            <a href="#" id="commsy-select-actions-save">
                                                <i class="uk-icon-justify uk-icon-small uk-icon-save uk-visible-large"></i> {{ 'save'|trans({},'rubric')|capitalize }}
                                            </a>
                                        </li>

                                        
                                        <li>
                                            <a href="#" id="commsy-select-actions-delete">
                                                <i class="uk-icon-justify uk-icon-small uk-icon-trash-o uk-visible-large"></i> {{ 'delete'|trans({},'rubric')|capitalize }}
                                            </a>
                                        </li>

                                    </ul>
                                </div>

                            </div>
                                <button id="commsy-select-actions-unselect" class="uk-button" type="button" data-uk-button>{{ 'cancel'|trans({},'rubric')}}</button>
                        </div>
                        

                    </div>
                </div>

                <div class="feed">
                    {% block feed %}
                    {% endblock%}
                </div>
            </div>
        </div>

        {# sidebar #}
        <div class="uk-width-medium-2-5">
            <div class="uk-panel uk-panel-box uk-panel-box-primary">
                <div class="uk-panel-teaser cs-panel-teaser-primary">
                    <div class="uk-clearfix">
                        <div class="uk-float-right">
                            <a href="#" class="button-toggle uk-button-mini uk-button-secondary" data-uk-toggle="{target: '#list-filter', animation: 'uk-animation-fade'}">
                                <i class="uk-icon-chevron-up"></i>
                            </a>
                        </div>
                        <div class="uk-text-large uk-float-left">
                            {{ 'list filter'|trans({},"room")}}
                        </div>
                    </div>
                </div>
                <div id="list-filter">
                    {{ form_start(form) }}
                    {{ form_widget(form) }}
                    {{ form_end(form) }}
                </div>
            </div>
        </div>
        
    </div>
{% endblock %}