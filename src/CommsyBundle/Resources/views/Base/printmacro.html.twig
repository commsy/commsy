{% macro ratingStatusDetail(item, ratingArray) %}
    {% set rating = 0 %}
    {% if ratingArray.ratingAverageDetail.0 is defined %}
        {% set rating = ratingArray.ratingAverageDetail.0 %}
    {% endif %}
    <div id="cs-rating-div" data-uk-dropdown="{pos:'bottom-right', remaintime:200}">
        {% set hasVoted = false %}
        {% if ratingArray.ratingOwnDetail %}
            {% set hasVoted = true %}
        {% endif %}
    
        <div id="cs-rating-wrapper" data-cs-rating-wrapper='{"hasVoted": "{{ hasVoted }}"}'>
            {% for i in 1..5 %}
                {% if rating >= i %}
                    {% if not ratingArray.ratingOwnDetail %}
                        <i class="cs-icon-star-small uk-icon-star uk-text-warning"></i>
                    {% else %}
                        <i class="cs-icon-star-small uk-icon-star uk-text-warning"></i>
                    {% endif %}
                {% endif %}
            {% endfor %}
            {% for i in 1..5 %}
                {% if rating < i %}
                    {% if not ratingArray.ratingOwnDetail %}
                        <i class="cs-icon-star-small uk-icon-star-o"></i>
                    {% else %}
                        <i class="cs-icon-star-small uk-icon-star-o uk-text-muted"></i>
                    {% endif %}
                {% endif %}
            {% endfor %}
        </div>
        <div class="uk-dropdown uk-dropdown-close">
            <div class="uk-text-left">
                <b>{{ 'ratingTitle'|trans({}, 'material') }}</b><br/>
                <div class="uk-margin-small-top uk-margin-small-bottom">
                    <table class="uk-table uk-table-condensed">
                        {% for ratingValue in 1..5 %}
                            <tr>
                                <td class="uk-padding-top-remove uk-padding-bottom-remove">
                                    {% for i in 1..5 %}
                                        {% if ratingValue >= i %}
                                            <i class="cs-icon-star-small uk-icon-star uk-text-warning"></i>
                                        {% endif %}
                                    {% endfor %}
                                    {% for i in 1..5 %}
                                        {% if ratingValue < i %}
                                            <i class="cs-icon-star-small uk-icon-star-o uk-text-muted"></i>
                                        {% endif %}
                                    {% endfor %}
                                </td>
                                <td class="uk-padding-top-remove uk-padding-bottom-remove uk-text-right">
                                    {% set ratingDisplay = 'rating'|transchoice(1, {}, 'material') %}
                                    <span class="uk-text-bold uk-margin-left">
                                    {% if ratingArray.ratingDetail[ratingValue] is defined %}
                                        {{ ratingArray.ratingDetail[ratingValue] }}
                                        {% if ratingArray.ratingDetail[ratingValue] == 1 %}
                                            {% set ratingDisplay = 'rating'|transchoice(0, {}, 'material') %}
                                        {% endif %}
                                    {% else %}
                                        0
                                    {% endif %}
                                    </span>
                                    <!-- {{ ratingDisplay }} -->
                                </td>
                            </tr>
                        {% endfor %}
                    </table>
                </div>
                {% if not hasVoted %}
                    {{ 'ratingNoOwn'|trans({}, 'material') }}
                {% else %}
                    {{ 'ratingOwn'|trans({}, 'material') }} <span class="uk-text-bold">{{ ratingArray.ratingOwnDetail }}</span>
                {% endif %}
            </div>
        </div>
    </div>
{% endmacro %}

{% macro workflowTrafficLight(item) %}
    {% import _self as macros %}
    
    {{ macros.workflowStatus(item.workflowTrafficLight) }}
{% endmacro %}

{% macro workflowStatus(status) %}
    <div class="uk-text-nowrap">
    {% if status == '0_green' %}
        <i class="cs-icon-xs-small-workflow uk-icon-circle uk-text-success"></i>
        <i class="cs-icon-xs-small-workflow uk-icon-circle-o"></i>
        <i class="cs-icon-xs-small-workflow uk-icon-circle-o"></i>
    {% elseif status == '1_yellow' %}
        <i class="cs-icon-xs-small-workflow uk-icon-circle-o"></i>
        <i class="cs-icon-xs-small-workflow uk-icon-circle uk-text-warning"></i>
        <i class="cs-icon-xs-small-workflow uk-icon-circle-o"></i>
    {% elseif status == '2_red' %}
        <i class="cs-icon-xs-small-workflow uk-icon-circle-o"></i>
        <i class="cs-icon-xs-small-workflow uk-icon-circle-o"></i>
        <i class="cs-icon-xs-small-workflow uk-icon-circle uk-text-danger"></i>
    {% else %}
        <i class="cs-icon-xs-small-workflow uk-icon-circle-o"></i>
        <i class="cs-icon-xs-small-workflow uk-icon-circle-o"></i>
        <i class="cs-icon-xs-small-workflow uk-icon-circle-o"></i>
    {% endif %}
    </div>
{% endmacro %}

{% macro workflow(item, workflowGroupArray, workflowUserArray, workflowText, workflowValidityDate, workflowResubmissionDate) %}
    {% import _self as macros %}

    {% set preview %}

    <div class="uk-grid">
        <div class="uk-width-1-3">
            <strong>{{ 'worflow status'|trans({}, "material") }}:</strong> <br/>
            <div class="uk-flex-inline">
                <div class="uk-margin-right">{{ macros.workflowTrafficLight(item) }}</div>
                <div>{{workflowText}}</div>
             </div>         
        </div>

        {% if workflowValidityDate != '0000-00-00 00:00:00' %}
            <div class="uk-width-1-3">
                <div class="uk-margin-bottom">
                    <strong>{{ 'workflow validity date'|trans({}, "material") }}</strong>: <br/>
                    {{ workflowValidityDate|craue_date }}       
                </div>
            </div>
        {% endif %}
        {% if workflowResubmissionDate != '0000-00-00 00:00:00' %}
             <div class="uk-width-1-3">
                <div class="uk-margin-bottom">
                    <strong>{{ 'workflow resubmission date'|trans({}, "material") }}</strong>:<br/> 
                    {{ workflowResubmissionDate|craue_date }}
                </div>
            </div>
       {% endif %}
    </div>

        
    {% endset %}

    {% set content %}
    <div class="uk-grid">
        <div class="uk-width-1-3">
            <strong>{{ 'worflow status'|trans({}, "material") }}:</strong> <br/>
            <div class="uk-flex-inline uk-margin-bottom">
                <div class="uk-margin-right">{{ macros.workflowTrafficLight(item) }}</div>
                <div>{{workflowText}}</div>
             </div>         
        </div>
        <div class="uk-width-1-3">
            {% if workflowValidityDate != '0000-00-00 00:00:00' %}
                <div class="uk-margin-bottom">
                    <strong>{{ 'workflow validity date'|trans({}, "material") }}</strong>: <br/>
                    {{ workflowValidityDate|craue_date }}       
                </div>
            {% endif %}
        </div>
        <div class="uk-width-1-3">
            {% if workflowResubmissionDate != '0000-00-00 00:00:00' %}
                <div class="uk-margin-bottom">
                    <strong>{{ 'workflow resubmission date'|trans({}, "material") }}</strong>:<br/> 
                    {{ workflowResubmissionDate|craue_date }}
                </div>
           {% endif %}
       </div>
       {% if not workflowGroupArray is empty %}
            <div class="uk-width-1-2">
                <strong>{{ 'workflow marked as read by groups'|trans({}, "material") }}:</strong><br/>
                {% set counter = 1 %}
                {% for workflowGroup in workflowGroupArray %}
                    {{workflowGroup.title}} ({{workflowGroup.userCount}} {{ 'of'|trans({}, "room") }} {{workflowGroup.userCountComplete}})
                    {% if counter != workflowGroupArray|length %}, {% endif %}
                    {% set counter = counter + 1 %}
                {% endfor %}
            </div>
        {% endif %}       
        {% if not workflowUserArray is empty %}
            <div class="uk-width-1-2">            
               <strong>{{ 'workflow marked as read by users'|trans({}, "material") }}:</strong><br/>
               {% set counter = 1 %}
               {% for workflowUser in workflowUserArray %}
                   {{workflowUser.name}} 
                    {% if counter != workflowUserArray|length %}, {% endif %}
                    {% set counter = counter + 1 %}
               {% endfor %}
           </div>
       {% endif %}       
     </div>
   {% endset %}
    
    {{ macros.editContent('workflow', item, true, content, preview, true, false, 0) }}
{% endmacro %}

{% macro links(item,withTags,withCategories,roomCategories) %}
    {% import _self as macros %}
    
    {%set countEntries = item.tagsArray|length + item.buzzwordArray|length + item.AllLinkeditemIDArray|length %}

    {% set preview %}
    <div class="uk-grid">
        <div class="uk-width-1-3">
            <strong>{{ 'linked entries'|trans({}, "room") }}:</strong> <br/>
            {{ render(controller(
                'CommsyBundle:Link:showDetailShort',
                { 'roomId': item.contextId, 'itemId': item.itemId }
            ))}}            
        </div>
        {% if withCategories %}
            <div class="uk-width-1-3">
                <strong>{{ 'categories'|trans({}, "room") }}:</strong> <br/>
                {% set count = 1 %}
                {% if (item.tagsArray|length) < 4 %}
                    {% if (item.tagsArray|length) == 0 %}
                        {{ 'no linked items'|trans({}, "room")}}    
                    {%else%}
                        {% for tag in item.tagsArray %}
                            {{tag.title}}{% if count < item.tagsArray|length %}, {% endif %}
                            {% set count = count +1 %}
                        {% endfor %}
                    {% endif %}
                {% else %}
                        {{item.tagsArray|length}} {{ 'categories'|trans({}, "room") }}
                {% endif %}
            </div>
        {% endif %}
        {%if withTags %}
            <div class="uk-width-1-3">
                <strong>{{ 'hashtags'|trans({}, "room") }}:</strong> <br/>
                {% set count = 1 %}
                {% if (item.buzzwordArray|length) < 4 %}
                    {% if (item.buzzwordArray|length) == 0 %}
                        {{ 'no linked items'|trans({}, "room")}}    
                    {%else%}
                        {% for tag in item.buzzwordArray %}
                            {{tag}}{% if count < item.buzzwordArray|length %}, {% endif %}
                            {% set count = count +1 %}
                        {% endfor %}
                    {% endif %}
                {% else %}
                        {{item.buzzwordArray|length}} {{ 'hashtags'|trans({}, "room") }}
                {% endif %}
            </div>
        {% endif %}
    </div>
    {% endset %}

    {% set content %}

    <div class="uk-grid">
        <div class="uk-width-1-3">
            <strong>{{ 'linked entries'|trans({}, "room") }}:</strong> <br/>
            {{ render(controller(
                'CommsyBundle:Link:showDetailPrint',
                { 'roomId': item.contextId, 'itemId': item.itemId }
            ))}}            
        </div>
        <div class="uk-width-1-3">
            <strong>{{ 'categories'|trans({}, "room") }}:</strong>
            <div class="cs-tree-plain">
                {{ _self.nestedTagList(item.tagsArray, roomCategories, 1) }}
            </div>
        </div>
        <div class="uk-width-1-3">
            <strong>{{ 'hashtags'|trans({}, "room") }}:</strong> <br/>
            {% set tagArray = item.buzzwordList.to_array() %} 
            {% if (tagArray|length) > 0 %}
                {% for tag in tagArray %}
                    <button class="uk-button uk-margin-small-bottom">{{tag.title}}
                {% endfor %}
            {% else %}
                {{ 'no linked items'|trans({}, "room")}}    
            {% endif %}
        </div>
    </div>
    {% endset %}
    
    {{ macros.editContent('links', item, true, content, preview, true, true, countEntries) }}
{% endmacro %}

{% macro files(item) %}
    {% import _self as macros %}

    {% set fileArray = item.fileList.to_array %}

    <hr />

    <article class="uk-article uk-margin-left uk-margin-right">
        <a name="description"></a>
        {% include 'CommsyBundle:Utils:editSpinner.html.twig' %}

        {# title row #}
        <div class="uk-grid uk-margin-small-bottom">
            <div class="uk-width-9-10">
                <h4 class="cs-detail-section-header">
                    {{- "files"|trans({}) }}
                    ({{ fileArray|length}} )
                </h4>
            </div>
        </div>

        {# content #}
        {% if not fileArray is empty %}
            <div class="uk-width-9-10 uk-margin-remove uk-padding-remove">

                
                {# full content #}
                <div>
                    <div class="uk-margin-top uk-margin-bottom" data-uk-grid="{gutter: 20}">
                        {% for file in fileArray %}
                            <div class="uk-width-medium-1-2 uk-width-large-1-4">
                                <div class="uk-panel uk-vertical-align">
                                   <div class="uk-vertical-align-middle">
                                        {{ file.filename}}
                                        ({{ file.fileSize }} kb)
                                    </div>
                                </div>
                            </div>
                        {% endfor %}
                    </div>
                </div>

            </div>
        {% else %}
            <div class="uk-width-9-10 uk-margin-top-remove">
                
                <div>
                    <span class="uk-text-muted">{{ 'no content'|trans({}, "room") }}</span>
                </div>

            </div>
        {% endif %}
    </article>
{% endmacro %}

{% macro itemDescription(title, item, edit, content) %}
    <hr/>

    <article class="uk-article uk-margin-left uk-margin-right">
        <a name="description"></a>
        {% include 'CommsyBundle:Utils:editSpinner.html.twig' %}

        {# title row #}
        <div class="uk-grid uk-margin-small-bottom">
            <div class="uk-width-9-10">
                <h4 class="cs-detail-section-header">
                    {{- title|trans({}) -}}
                </h4>
            </div>


        {# content #}
        {% if not content is empty %}
            <div class="uk-width-9-10">

                {# preview #}
                <div>
                    {{ content|raw }}
                </div>

            </div>
        {% endif %}
{% endmacro %}

{% macro userIconLink(user, size) %}
    {% import _self as macros %}
    
        {{  macros.userIcon(user, size) }}
    
{% endmacro %}

{% macro sections(item, sectionList) %}
    {% import _self as macros %}

     
<hr/>
    <article class="uk-article uk-margin-left uk-margin-right">
        <a name="description"></a>
        {% include 'CommsyBundle:Utils:editSpinner.html.twig' %}

        {# title row #}
        <div class="uk-grid uk-margin-small-bottom">
            <div class="uk-width-9-10">
                <h4 class="cs-detail-section-header">
                    {{- "sections"|trans({}) }}
                    ({{ sectionList|length }})
                </h4>
            </div>

            
        </div>

        {# content #}
        {% if not sectionList is empty %}
            <div class="uk-width-9-10 uk-margin-remove uk-padding-remove">

                {# preview #}
                <div>
                    <ul class="uk-list uk-list-striped uk-width-2-3">          
                        {% for section in sectionList %}
                            <li>
                                
                                    {{ loop.index }}. {{ section.title|raw }}
                                

                                {{ macros.fileListShort(section) }}
                            </li>                      
                        {% endfor %}
                    </ul>
                </div>

            </div>
        {% else %}
            <div class="uk-width-9-10 uk-margin-top-remove">
                
                <div>
                    <span class="uk-text-muted">{{ 'no content'|trans({}, "room") }}</span>
                </div>

            </div>
        {% endif %}
    </article>
{% endmacro %}

{% macro title(item, modifierList, userCount, readCount, readSinceModificationCount, draft, showRating, showWorkflow, ratingArray) %}
    {% import _self as macros %}
    {% set pathName = '' %}
    {% if item.itemType == 'material' %}
        {% set pathName = 'commsy_material_edit' %}
    {% elseif item.itemType == 'section' %}
        <a name="section{{item.ItemID}}"></a>
        {% set pathName = 'commsy_material_edit' %}
    {% endif %}
    {% if userCount == 0 %}
        {% set userCount = 1 %}
    {% endif %}
    
    <div>
        <div class="uk-margin-left uk-margin-right uk-margin-bottom uk-position-relative">
            <div class="uk-grid uk-margin-small-bottom">
                <div class="uk-width-9-10 uk-margin-small-bottom" >        
                    <div class="uk-grid">
                    {% if item.itemType != 'section' %}
                        <div class="uk-width-8-10">
                            <h1 class="uk-article-title">{{ item.title|raw }}</h1>
                            {% if item.itemType == 'material' %}
                                {% set material = item %}
                                {% include 'CommsyBundle:Material:biblio.html.twig' %}
                            {% endif %}
                        </div>
                       {%if showRating or showWorkflow%}
                            <div class="uk-width-2-10  uk-text-right uk-padding-remove">
                             {%if showRating%}
                                {{  macros.ratingStatusDetail(material, ratingArray) }}
                            {% endif %}
                            {%if showWorkflow%}
                                {{  macros.workflowTrafficLight(material) }}
                            {% endif %}
                            </div>
                        {% endif %}
                    {% else %}
                        <div class="uk-width-1-1">
                            <h1 class="uk-article-title">{{ item.title|raw }}</h1>
                        </div>
                {% endif %}
                </div>
                </div>        
               
            </div>
        </div>
        <div class="uk-margin-left uk-margin-right uk-position-relative">
            <div class="uk-width-1-1 uk-padding-remove uk-margin-small-bottom">    
                <div class="uk-grid uk-margin-small-left uk-margin-top-remove">
                    <div class="uk-width-9-10 uk-padding-remove">
                        
                        <div>
                            <div class="uk-panel">
                                <div class="uk-grid">
                                    <div class="uk-width-2-5">
                                        <div class="uk-flex">
                                            {{ 'last changed'|trans({})|capitalize }}
                                            <div class="uk-margin-right">
                                                {% if item.modificatorItem.isUser %}
                                                    {{  macros.userIconLink(item.modificatorItem) }}
                                                {% else %}
                                                    {{  macros.userIcon(item.modificatorItem) }}
                                                {% endif %}
                                            </div>
                                            <div class="uk-margin-right">
                                                {{item.modificationDate|date("d.m.Y H:i")}}<br/>
                                                {{ 'changed by'|trans({})|capitalize }}: <br>{{item.modificatorItem.Fullname}}<br/>
                                                {{ 'reference number'|trans({})|capitalize }}: {{ item.itemId }}
                                            </div>
                                        </div>
                                    </div>
                                    <div class="uk-width-1-5">
                                        <div class="uk-clearfix">
                                            {{ 'creator'|trans({})}}
                                            <div class="uk-margin-remove">
                                                {% if item.creator.isUser %}
                                                    {{  macros.userIconLink(item.creator) }}
                                                {% else %}
                                                    {{  macros.userIcon(item.creator) }}
                                                {% endif %}
                                            </div>
                                        </div>
                                        <div class="uk-clearfix">
                                            {{item.creator.Fullname}} 
                                        </div>
                                    </div>
                                    <div class="uk-width-2-5">                           
                                        <div class="uk-clearfix">
                                            {{ 'editors'|trans({})}}
                                            <div class="uk-margin-remove">
                                                {% if modifierList[item.itemId] is defined %}
                                                    {% if not modifierList[item.itemId] is empty %}
                                                        <div class="uk-flex">
                                                            
                                                            {% for modifier in modifierList[item.itemId] %}
                                                                <div
                                                                    {% if modifier.isUser %}
                                                                        {{  macros.userIconLink(modifier) }}
                                                                    {% else %}
                                                                        {{  macros.userIcon(modifier) }}
                                                                    {% endif %}
                                                                </div>
                                                                <div class="uk-clearfix">
                                                                    {{modifier.fullname}}
                                                                </div>
                                                            {% endfor %}
                                                        </div>
                                                    {% endif %}
                                                {% endif %}
                                            </div>
                                        </div>
                                    </div>                            
                                </div>                        
                            </div>
                            <div class="uk-panel uk-margin-top">
                                <div class="uk-grid">
                                    <div class="uk-width-2-5">                           
                                        <div class="uk-clearfix">
                                            <div class="uk-align-left uk-width-1-1">
                                            {{ 'clicked since last editing'|trans({})}}: <br/>
                                                <div class="uk-progress">
                                                    {% set activePercent = (readSinceModificationCount/userCount*100)|round %}
                                                    <div class="uk-progress-bar cs-progress-bar" style="width: {{ activePercent }}%;">{{readSinceModificationCount}}</div>
                                                </div>
                                           </div>
                                        </div>                           
                                    </div>                            
                                    <div class="uk-width-1-5">                            
                                    </div>                            
                                    <div class="uk-width-2-5">                           
                                        <div class="uk-clearfix">
                                            <div class="uk-align-left uk-width-1-1">
                                            {{ 'clicked since creating'|trans({}) }}: <br/>
                                                <div class="uk-progress">
                                                    {% set activePercent = (readCount/userCount*100)|round %}
                                                   <div class="uk-progress-bar cs-progress-bar" style="width: {{ activePercent }}%;">{{readCount}}</div>
                                                </div> 
                                            </div>
                                        </div>                           
                                    </div>                            
                                </div>                        
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
   </div>
{% endmacro %}

{% macro nestedTagList(tags, roomTags, level) %}
    {% set opened = true %}
    <ul class="uk-list">
    {% for child in roomTags %}
    
        {% set childTitle %}
            <div><span class="uk-text-muted">{{ child.title }}</span></div>
        {% endset %}
        {% for tag in tags %}
            {% if tag.id == child.item_id %}
                {% set childTitle %}
                    <div><span class="uk-text-bold">{{ child.title }}</span></div>
                {% endset %}
            {% endif %}
        {% endfor %}
    
        {% if child.children is defined and not child.children is empty %}
            <li id="tag_{{ child.title }}" data-jstree='{"opened": {{ opened }}}'>
                {{ childTitle }}
                {{ _self.nestedTagList(tags, child.children, level+1) }}
            </li>
        {% else %}
            <li id="tag_{{ child.title }}" data-jstree='{"opened": {{ opened }}}'>
                {{ childTitle }}
            </li>
        {% endif %}
    {% endfor %}
    </ul>
{% endmacro %}

{% macro editContent(title, item, edit, content, preview, shortPreview, displayCount, count) %}
    <hr />

    <article class="uk-article uk-margin-left uk-margin-right">
        <a name="description"></a>
        {% include 'CommsyBundle:Utils:editSpinner.html.twig' %}

        {# title row #}
        <div class="uk-grid uk-margin-small-bottom">
            <div class="uk-width-9-10">
                <h4 class="cs-detail-section-header">
                    {{- title|trans({}) }}
                    {% if displayCount %}
                        ({{count}})
                    {% endif %}
                </h4>
            </div>

            
        </div>

        {# content #}
        {% if not content is empty and not preview is empty %}
            <div class="uk-width-9-10 uk-margin-remove uk-padding-remove">


                {# full content #}
                <div>
                    {{ content|raw }}
                </div>

            </div>
        {% else %}
            <div class="uk-width-9-10 uk-margin-top-remove">
                
                {% if not content is empty %}
                    <div>
                        {{ content|raw }}
                    </div>
                {% else %}
                    <div>
                        <span class="uk-text-muted">{{ 'no content'|trans({}, "room") }}</span>
                    </div>
                {% endif %}

            </div>
        {% endif %}
    </article>

{% endmacro %}

{% macro userIcon(user, size) %}
    {% if size == 'small' %}
        <img class="uk-comment-avatar uk-thumbnail uk-border-circle" style="height:30px; width:30px;" src="{{ absolute_url(path('commsy_user_image', {'roomId': user.contextId, 'itemId': user.itemId}) )}}" data-uk-tooltip title="{{ user.fullname }}">
    {% elseif size matches '/^\\d+$/' %}
        <img class="uk-comment-avatar uk-thumbnail uk-border-circle" style="height:{{ size }}px; width:{{ size }}px;" src="{{ absolute_url(path('commsy_user_image', {'roomId': user.contextId, 'itemId': user.itemId}) )}}" data-uk-tooltip title="{{ user.fullname }}">
    {% else %}
        <img class="uk-comment-avatar uk-thumbnail uk-border-circle cs-comment-thumbnail" style="height:42px; width:42px;" src="{{ absolute_url(path('commsy_user_image', {'roomId': user.contextId, 'itemId': user.itemId}) )}}" data-uk-tooltip title="{{ user.fullname }}">
    {% endif %}
{% endmacro %}



{% macro iconClassForFileType(type) %}
    {% if type == 'xlsx' or type == 'xls' %}
        uk-icon-file-excel-o
    {% elseif type == 'docx' or type == 'doc' or type == 'ods' %}
        uk-icon-file-word-o
    {% elseif type == 'pptx' or type == 'ppt' %}
        uk-icon-file-powerpoint-o
    {% elseif type == 'pdf' %}
        uk-icon-file-pdf-o
    {% elseif type == 'zip' or type == 'ipa' %}
        uk-icon-file-archive-o
    {% elseif type == 'png' or type == 'jpg' or type == 'eps' or type == 'gif' or type == 'svg' %}
        uk-icon-file-image-o
    {% elseif type == 'txt' or type == 'csv' or type == 'md' %}
        uk-icon-file-text-o
    {% elseif type == 'mpg' or type == 'wmv' or type == 'mp4' or type == 'avi' %}
        uk-icon-file-movie-o
    {% else %}
        uk-icon-file-o
    {% endif %}
{% endmacro %}

{% macro fileListShort(item) %}
    {% import _self as macros %}
    {% if item.itemType != 'material' %}
        {% set fileArray = item.fileList.to_array %}
    {% else %}
        {% set fileArray = item.fileListWithFilesFromSections.to_array %}
    {% endif %}
    {% if not fileArray is empty %}
        {% for file in fileArray %}
            <i class="{{ macros.iconClassForFileType(file.extension) }}"></i>
        {% endfor %}
    {% endif %}
{% endmacro %}
{% macro iconClassForItemType(type) %}
    {% if type == 'announcement' %}
        uk-icon-comment-o
    {% elseif type == 'date' %}
        uk-icon-calendar
    {% elseif type == 'material' %}
        uk-icon-file-o
    {% elseif type == 'section' %}
        uk-icon-file-o
    {% elseif type == 'discussion' %}
        uk-icon-comments-o
    {% elseif type == 'user' %}
        uk-icon-user
    {% elseif type == 'group' %}
        uk-icon-group
    {% elseif type == 'todo' %}
        uk-icon-check
    {% elseif type == 'task' %}
        uk-icon-home
    {% endif %}
{% endmacro %}

{% macro statusColor(readerList, itemId, type='comment') %}
    {% if type == 'grid' %}
        {% if readerList[itemId] is defined %}
           {% if readerList[itemId] == 'new' %}
                <div class="cs-grid-change-info" data-uk-tooltip="{pos:'right'}" title="{{ 'newEntry'|trans({})}}">
                    <i class="uk-icon-medium uk-text-danger uk-icon-exclamation"></i>
                </div>
            {% elseif readerList[itemId] == 'changed' %}
                <div class="cs-grid-change-info" data-uk-tooltip="{pos:'right'}" title="{{ 'changedEntry'|trans({})}}">
                     <i class="uk-icon-medium uk-text-warning uk-icon-exclamation"></i>
                </div>
            {% elseif readerList[itemId] == 'new_annotation' %}
                <div class="cs-grid-change-info" data-uk-tooltip="{pos:'right'}" title="{{ 'newAnnotation'|trans({})}}">
                     <i class="uk-icon-medium uk-text-warning uk-icon-exclamation"></i>
                </div>
            {% elseif readerList[itemId] == 'changed_annotation' %}
                <div class="cs-grid-change-info" data-uk-tooltip="{pos:'right'}" title="{{ 'changedAnnotation'|trans({})}}">
                     <i class="uk-icon-medium uk-text-warning uk-icon-exclamation"></i>
                </div>
            {% endif %}
        {% endif %}
    {% else %}
        {% if readerList[itemId] is defined %}
           {% if readerList[itemId] == 'new' %}
                <div class="cs-comment-change-info" data-uk-tooltip="{pos:'right'}" title="{{ 'newEntry'|trans({})}}">
                    <i class="uk-icon-medium uk-text-danger uk-icon-exclamation"></i>
                </div>
            {% elseif readerList[itemId] == 'changed' %}
                <div class="cs-comment-change-info" data-uk-tooltip="{pos:'right'}" title="{{ 'changedEntry'|trans({})}}">
                     <i class="uk-icon-medium uk-text-warning uk-icon-exclamation"></i>
                </div>
            {% elseif readerList[itemId] == 'new_annotation' %}
                <div class="cs-comment-change-info" data-uk-tooltip="{pos:'right'}" title="{{ 'newAnnotation'|trans({})}}">
                     <i class="uk-icon-medium uk-text-warning uk-icon-exclamation"></i>
                </div>
            {% elseif readerList[itemId] == 'changed_annotation' %}
                <div class="cs-comment-change-info" data-uk-tooltip="{pos:'right'}" title="{{ 'changedAnnotation'|trans({})}}">
                     <i class="uk-icon-medium uk-text-warning uk-icon-exclamation"></i>
                </div>
            {% endif %}
        {% endif %}
    {% endif %}
{% endmacro %}

{% macro editAnnotationContent(title, item, content) %}
    <div class="uk-grid uk-margin-top-remove">

        {# content #}
        {% if not content is empty %}
            <div class="uk-width-9-10">

                {# preview #}
                <div>

                    <div class="cs-comment-head">
                        <div class="uk-comment-meta">
                            {{ 'by'|trans({})|capitalize }}: {{item.creator.getFullName}}
                        </div>   
                        <div class="uk-comment-meta uk-margin-bottom">
                            {{ 'last changed'|trans({})|capitalize }}: {{item.getModificationDate|date("d.m.Y H:i")}}
                        </div>
                    </div>

                    {{ content|raw }}
                </div>

            </div>
        {% endif %}

        {% include 'CommsyBundle:Utils:editSpinner.html.twig' %}

       

       </div>
    </div>    
{% endmacro %}