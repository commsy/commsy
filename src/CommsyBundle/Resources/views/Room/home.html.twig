{% extends 'CommsyBundle:Base:room.html.twig' %}

{% form_theme form 'CommsyBundle:Form:uikit_horizontal_dynamic_layout.html.twig' %}

{% block cover %}
    {% set widthHomeInformation = true %}
    {% set imgSrc = '/images/simpsons-wallpaper.jpg' %}
    {% set homeInformation = '<h2>Hallo Leute</h2><p>Lorem ipsum dolor sit amet, consetetur sadipscing elitr, sed diam nonumy eirmod tempor invidunt ut labore et dolore magna aliquyam erat, sed diam voluptua. At vero eos et accusam et justo duo dolores et ea rebum. Stet clita kasd gubergren, no sea takimata sanctus est Lorem ipsum dolor sit amet. Lorem ipsum dolor sit amet, consetetur sadipscing elitr, sed diam nonumy eirmod tempor invidunt ut labore et dolore magna aliquyam erat, sed diam voluptua. At vero eos et accusam et justo duo dolores et ea rebum. Stet clita kasd gubergren, no sea takimata sanctus est Lorem ipsum dolor sit amet.</p>' %}
     
    {% if widthHomeInformation %}
        <div id="cover" class="uk-cover-background uk-position-relative cs-cover-background" aria-hidden="false"> 
            {% if bgImageFilepath is not empty %}
                <img data-uk-parallax="{y: '-100'}" src="{{bgImageFilepath}}">
            {% endif %}
            <div class="uk-position-cover uk-grid cs-cover-grid">   
            {% if not homeInformation is empty%}
                <div class="uk-width-medium-2-3 cs-cover-height" style="margin-bottom:15px;">
                    <div class="uk-panel uk-panel-box cs-cover-grid-opacity" data-uk-parallax="{opacity: '0.5'}">
                        {{homeInformation | raw}}
                    </div>
                </div>
            {% endif %}
            {% if countAnnouncements > 0 %}
                <div class="uk-width-medium-1-3 cs-cover-height">
                    <div class="uk-panel uk-panel-box cs-cover-grid-opacity" data-uk-parallax="{opacity: '0.5'}">
                        <ul id="announcements-feed" class="uk-comment-list" data-uk-observe>
                            {{ render(controller(
                                'CommsyBundle:Announcement:shortfeed',
                                { 'roomId': roomItem.itemId }
                            ))}}
                        </ul>
                    </div>
                </div>    
            {% endif %}

            </div>
        </div>
     {% endif %}
{% endblock %}


{% block content %}
    <div class="uk-grid">

        <div class="uk-width-medium-2-3">
            <div class="uk-panel uk-panel-box uk-panel-box-primary">
                <div class="uk-panel-teaser cs-panel-teaser-primary">
                    <div class="uk-flex uk-flex-middle uk-flex-space-between">
                        <div class="uk-text-large">{{ 'latest entries'|trans({}, "room") }}</div>
                     </div>
                </div>

                <div>
                    <ul id="room-feed" class="uk-comment-list">
                        {{ render(controller(
                            'CommsyBundle:Room:feed',
                            { 'roomId': roomItem.itemId }
                        ))}}
                    </ul>
                    <div class="feed-load-more" data-uk-scrollspy="{cls: 'uk-animation-fade', repeat: true, topoffset: 500}" data-feed='{"url": "{{ app.request.baseURL }}/room/{{ roomItem.itemId }}/feed/", "target": "#room-feed"}'>
                        <i class="uk-icon-refresh uk-icon-spin uk-icon-medium"></i>
                    </div>
                </div>
                
            </div>
        </div>
        
        {# sidebar #}
        <div class="uk-width-medium-1-3 cs-right-column">
            
            <!--
            <div class="uk-panel uk-panel-box uk-panel-box-primary">
                <div class="uk-panel-teaser cs-panel-teaser-primary">
                    <div class="uk-clearfix">
                        <div class="uk-float-right">
                            <a href="#" class="button-toggle uk-button-mini uk-button-primary" data-uk-toggle="{target: '#room-dates', animation: 'uk-animation-fade'}">
                                <i class="uk-icon-chevron-up"></i>
                            </a>
                        </div>
                        <div class="uk-text-large uk-float-left">
                            {{ 'Dates'|trans({}, "room") }}
                        </div>
                    </div>
                </div>

                <div id="room-dates" class="uk-overflow-container">
                    Termine
                </div>
            </div>
            -->

            <div class="uk-panel uk-panel-box uk-panel-box-primary">
                <div class="uk-panel-teaser cs-panel-teaser-primary">
                    <div class="uk-clearfix">
                        <div class="uk-float-right">
                            <a href="#" class="button-toggle uk-button-mini uk-button-primary" data-uk-toggle="{target: '#room-info', animation: 'uk-animation-fade'}">
                                <i class="uk-icon-chevron-up"></i>
                            </a>
                        </div>
                        <div class="uk-text-large uk-float-left">
                            {{ 'Room-Information'|trans({}, "room") }}
                        </div>
                    </div>
                </div>
               
                <ul id="room-info" class="uk-list uk-list-striped">
                    <li class="uk-flex">
                        <div class="uk-width-1-3">{{ 'Entries:'|trans({}, "room") }}</div>
                        <div class="uk-width-2-3">
                            {% transchoice numNewEntries with {'%days%': timeSpread, '%num%': numNewEntries} from "room" %}
                                One new entry in the last %days% days|%num% new entries in the last %days% days
                            {% endtranschoice %}
                        </div>
                    </li>
                    <li class="uk-flex">
                        <div class="uk-width-1-3">{{ 'Persons:'|trans({}, "room") }}</div>
                        <div class="uk-width-2-3">
                            {% trans with {'%total%': numTotalMember, '%active%': numActiveMember} from "room" %}
                                total %total% | active %active%
                            {% endtrans %}
                            <div class="uk-progress">
                                {% set activePercent = (numActiveMember/numTotalMember*100)|round %}
                                <div class="uk-progress-bar cs-progress-bar" style="width: {{ activePercent }}%;"></div>
                            </div>
                        </div>
                    </li>
                    <li  class="uk-flex">
                        <div class="uk-width-1-3">{% trans from "room" %}Page Impressions:{% endtrans %}</div>
                        <div class="uk-width-2-3">{{ pageImpressions }}</div>
                    </li>
                    <li  class="uk-flex">
                        <div class="uk-width-1-3">{{ 'Moderation:'|trans({}, "room") }}</div>
                        <div class="uk-width-2-3">
                            {{ roomModerators|join(', ') }}
                        </div>
                    </li>
                </ul>
            </div>

 
            <div class="uk-panel uk-panel-box uk-panel-box-primary">
                <div class="uk-panel-teaser cs-panel-teaser-primary">
                    <div class="uk-clearfix">
                        <div class="uk-float-right">
                            <a href="#" class="button-toggle uk-button-mini uk-button-primary" data-uk-toggle="{target: '#list-filter', animation: 'uk-animation-fade'}">
                                <i class="uk-icon-chevron-up"></i>
                            </a>
                        </div>
                        <div class="uk-text-large uk-float-left">
                            {{ 'list filter'|trans({}, "room") }} 
                        </div>
                    </div>
                </div>
                <div id="list-filter">
                    {{ form_start(form) }}
                    {{ form_widget(form) }}
                    {{ form_end(form) }}
                </div>
 
            </div>
        </div>
    </div>
{% endblock %}
