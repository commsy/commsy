{% import 'CommsyBundle:Utils:macros.html.twig' as macros %}
{% if not feedList is empty %}
    {% for feedItem in feedList %}
        <article class="uk-comment">
            {{ macros.statusColor(readerList, feedItem.itemId) }}
            <header class="uk-comment-header uk-flex">
                <div class="uk-margin-right uk-flex-item-none">
                    {% if feedItem.itemType != 'user' %}
                        {% if feedItem.modificatorItem.isUser %}
                            {{  macros.userIconLink(feedItem.modificatorItem) }}
                        {% else %}
                            {{  macros.userIcon(feedItem.modificatorItem) }}
                        {% endif %}
                    {% else %}
                        {% if feedItem.isUser %}
                            {{  macros.userIconLink(feedItem) }}
                        {% else %}
                            {{  macros.userIcon(feedItem) }}
                        {% endif %}
                    {% endif %}
                    <div class="uk-comment-meta">
                        {% if feedItem.getModificationDate|date("d.m.Y") == "now"|date("d.m.Y") %}
                            {{ 'today'|trans({})|capitalize }}, {{feedItem.getModificationDate|date("H:i")}}
                        {% else %}
                            {{feedItem.getModificationDate|date("d.m.Y")}}
                        {% endif %}
                    </div>
                </div>
                <div class="uk-width-8-10">
                    <h4 class="uk-comment-title">
                        <a href="{{ app.request.baseURL }}/room/{{ app.request.attributes.get('roomId') }}/{{ feedItem.type }}/{{ feedItem.itemID }}">
                        {% if feedItem.itemType != 'user' %}
                            {{ feedItem.title }}
                        {% else %}
                            {{ feedItem.getFullName }}
                        {% endif %}
                        </a>
                    </h4>
                    {% if feedItem.itemType == 'announcement' %}
                        <div class="uk-comment-meta">{{ 'by'|trans({})|capitalize }}: {{feedItem.modificatorItem.getFullName}}</div>
                    {% elseif feedItem.itemType == 'date' %}
                        <div class="uk-comment-meta">{{feedItem.getDateListDescription}}{% if feedItem.getPlace != '' %}, {{feedItem.getPlace}}{% endif %}</div>
                    {% elseif feedItem.itemType == 'material' %}
                        <div class="uk-comment-meta">
                            {% if feedItem.author != '' %}
                                    {{ 'by'|trans({})|capitalize }}: {{feedItem.author}} ({{feedItem.publishingdate}})
                                {% else %}
                                    {{ 'by'|trans({})|capitalize }}: {{feedItem.modificatorItem.fullname}} ({{feedItem.getCreationDate|date("d.m.Y")}})
                            {% endif %}                        
                        </div>
                    {% elseif feedItem.itemType == 'discussion' %}
                        <div class="uk-comment-meta">{{ 'by'|trans({})|capitalize }}: {{feedItem.modificatorItem.getFullName}}</div>
                    {% elseif feedItem.itemType == 'user' %}
                        <div class="uk-comment-meta">{{ 'by'|trans({})|capitalize }}: {{feedItem.getFullName}}</div>
                    {% elseif feedItem.itemType == 'group' %}
                        <div class="uk-comment-meta">{{ 'by'|trans({})|capitalize }}: {{feedItem.modificatorItem.getFullName}}</div>
                    {% elseif feedItem.itemType == 'todo' %}
                        <div class="uk-comment-meta">{{ 'by'|trans({})|capitalize }}: {{feedItem.modificatorItem.getFullName}}</div>
                    {% elseif feedItem.itemType == 'task' %}
                        <div class="uk-comment-meta">{{ 'by'|trans({})|capitalize }}: {{feedItem.modificatorItem.getFullName}}</div>
                    {% endif %}
                    <div class="uk-comment-meta">{{  macros.fileListShort(feedItem) }}</div>
                </div>
                <div class="uk-width-2-10 uk-text-right">
                {%if showRating and feedItem.itemType != 'user' %}
                    {{  macros.ratingStatus(feedItem) }}
                    <i class="{{ macros.iconClassForItemType(feedItem.itemType) }} cs-icon-xs-small"></i>
                 {% else %}
                    <i class="{{ macros.iconClassForItemType(feedItem.itemType) }} uk-icon-small"></i>
                 {% endif %}                
                </div>
            </header>
        </article>
    {% endfor %}
{% endif %}