{% macro files(item) %}
    {% import 'CommsyBundle:Utils:macros.html.twig' as macros %}

    {% set preview = '' %}
    {% set content = '' %}
    
    {% set fileArray = item.fileList.to_array %}
    {% if not fileArray is empty %}
       {% set preview %}
            {% if fileArray|length > 10%}
                <div class="uk-slidenav-position uk-margin-top uk-margin-bottom" data-uk-slider="{infinite: false}">
                    <div class="uk-slider-container">
                        <ul class="uk-slider uk-grid uk-grid-width-medium-1-10">
            {% else %}
                <div class="uk-margin-top uk-margin-bottom">
                    <div>
                        <ul class="uk-grid cs-file-grid uk-grid-width-medium-1-10">
            {% endif %}
                        {% for file in fileArray %}
                             <li>
                                <div class="uk-panel uk-panel-box-secondary cs-file-panel-box uk-vertical-align">
                                    {% if file.extension|lower == 'jpg' or file.extension|lower == 'jpeg' or file.extension|lower == 'png' or file.extension|lower == 'gif' %}
                                        <a class="uk-margin-remove" href="{{ path('commsy_file_getfile', {'fileId': file.fileId, 'disposition': 'inline'}) }}" data-uk-lightbox="{group:{{ item.itemId }}}" data-lightbox-type="image">
                                            <div class="uk-clearfix">
                                                <div class="cs-align-center" data-uk-tooltip title="{{ file.filename}} ({{ file.fileSize }} kb)">
                                                    <img class="cs-align-center cs-slider" style="height:28px;" src="{{ path('commsy_file_getfile', {'fileId': file.fileId, 'disposition': 'inline'}) }}" />
                                                </div>
                                            </div>
                                        </a>
                                    {% else %} 
                                        <div class="uk-clearfix">
                                            <div class="cs-align-center"  data-uk-tooltip title="{{ file.filename}} ({{ file.fileSize }} kb)">
                                                <div class="cs-align-center uk-vertical-align-middle">                        
                                                    <a href="{{ path('commsy_file_getfile', {'fileId': file.fileId}) }}" ><i class="cs-icon-medium  cs-slider {{ macros.iconClassForFileType(file.extension) }}"></i></a>
                                                </div>
                                            </div>
                                        </div>
                                    {% endif %}
                                </div>
                            </li>
                        {% endfor %}
                    </ul>
                </div>
            {% if fileArray|length > 10%}
                <a href="" class="uk-slidenav uk-slidenav-contrast uk-slidenav-previous" data-uk-slider-item="previous" draggable="false"></a>
                <a href="" class="uk-slidenav uk-slidenav-contrast uk-slidenav-next" data-uk-slider-item="next" draggable="false"></a>
            {% endif %}
            </div>
        {% endset %}
    
        {% set content %}
        <div class="uk-margin-top uk-margin-bottom" data-uk-grid="{gutter: 20}">
            {% for file in fileArray %}
                <div class="uk-width-medium-1-2 uk-width-large-1-4">
                    <div class="uk-panel uk-panel-box-secondary uk-vertical-align">
                        {% if file.extension|lower == 'jpg' or file.extension|lower == 'jpeg' or file.extension|lower == 'png' or file.extension|lower == 'gif' %}
                            <a class="uk-margin-remove" href="{{ path('commsy_file_getfile', {'fileId': file.fileId, 'disposition': 'inline'}) }}" data-uk-lightbox="{group:{{ item.itemId }}}" data-lightbox-type="image">
                                <div class="uk-clearfix">
                                    <div class="cs-align-center">
                                        <img class="cs-align-center cs-slider" style="height:80px;" src="{{ path('commsy_file_getfile', {'fileId': file.fileId, 'disposition': 'inline'}) }}" />
                                    </div>
                                </div>
                            </a>
                        {% else %} 
                            <div class="uk-clearfix">
                                <div class="cs-align-center">
                                    <div class="cs-align-center uk-vertical-align-middle">                        
                                        <i class="cs-icon-xxl-large  cs-slider {{ macros.iconClassForFileType(file.extension) }}"></i>
                                    </div>
                                </div>
                            </div>
                        {% endif %}
                        <div class="uk-vertical-align-middle">
                            <a href="{{ path('commsy_file_getfile', {'fileId': file.fileId}) }}" data-uk-tooltip title="{{ file.filename }}">{{ file.filename|truncate(20) }}</a><br/>
                            ({{ file.fileSize }} kb)
                        </div>
                    </div>
                </div>
            {% endfor %}
        </div>
        {% endset %}
    {% endif %}
    {{ macros.editContent('files', item, true, content, preview, true, true, fileArray|length) }}
{% endmacro %}

{% macro links(item) %}
    {% import 'CommsyBundle:Utils:macros.html.twig' as macros %}
    
    {%set countEntries = item.tagsArray|length + item.buzzwordArray|length + item.AllLinkeditemIDArray|length %}

    {% set preview %}
    <div class="uk-grid">
        <div class="uk-width-1-3">
            <strong>{{ 'linked entries'|trans({}, "room") }}:</strong> <br/>
            {{ render(controller(
                'CommsyBundle:Link:showDetailShort',
                { 'roomId': item.contextId, 'itemId': item.itemId }
            ))}}            
        </div>
        <div class="uk-width-1-3">
            <strong>{{ 'categories'|trans({}, "room") }}:</strong> <br/>
            {% set count = 1 %}
            {% if (item.tagsArray|length) < 4 %}
                {% if (item.tagsArray|length) == 0 %}
                    {{ 'no linked items'|trans({}, "room")}}    
                {%else%}
                    {% for tag in item.tagsArray %}
                        {{tag.title}}{% if count < item.tagsArray|length %}, {% endif %}
                        {% set count = count +1 %}
                    {% endfor %}
                {% endif %}
             {% else %}
                    {{item.tagsArray|length}} {{ 'categories'|trans({}, "room") }}
             {% endif %}
        </div>
        <div class="uk-width-1-3">
            <strong>{{ 'hashtags'|trans({}, "room") }}:</strong> <br/>
            {% set count = 1 %}
            {% if (item.buzzwordArray|length) < 4 %}
                {% if (item.buzzwordArray|length) == 0 %}
                    {{ 'no linked items'|trans({}, "room")}}    
                {%else%}
                    {% for tag in item.buzzwordArray %}
                        {{tag}}{% if count < item.buzzwordArray|length %}, {% endif %}
                        {% set count = count +1 %}
                    {% endfor %}
                {% endif %}
             {% else %}
                    {{item.buzzwordArray|length}} {{ 'hashtags'|trans({}, "room") }}
             {% endif %}
        </div>
    </div>
    {% endset %}

    {% set content %}

    <div class="uk-grid">
        <div class="uk-width-1-3">
            <strong>{{ 'linked entries'|trans({}, "room") }}:</strong> <br/>
            {{ render(controller(
                'CommsyBundle:Link:showDetail',
                { 'roomId': item.contextId, 'itemId': item.itemId }
            ))}}            
        </div>
        <div class="uk-width-1-3">
            <strong>{{ 'categories'|trans({}, "room") }}:</strong> <br/>
            TODO: Tree-View for Detailview <br/>
            {% set count = 1 %}
            {% if (item.tagsArray|length) < 4 %}
                {% if (item.tagsArray|length) == 0 %}
                    {{ 'no linked items'|trans({}, "room")}}    
                {%else%}
                    {% for tag in item.tagsArray %}
                        {{tag.title}}{% if count < item.tagsArray|length %}, {% endif %}
                        {% set count = count +1 %}
                    {% endfor %}
                {% endif %}
             {% else %}
                    {{item.tagsArray|length}} {{ 'categories'|trans({}, "room") }}
             {% endif %}
        </div>
        <div class="uk-width-1-3">
            <strong>{{ 'hashtags'|trans({}, "room") }}:</strong> <br/>
            {% set tagArray = item.buzzwordList.to_array() %} 
            {% if (tagArray|length) > 0 %}
                {% for tag in tagArray %}
                    <button class="uk-button uk-margin-small-bottom">{{tag.title}}</button>
                {% endfor %}
            {% else %}
                {{ 'no linked items'|trans({}, "room")}}    
            {% endif %}
        </div>
    </div>
    {% endset %}
    
    {{ macros.editContent('links', item, true, content, preview, true, true, countEntries) }}
{% endmacro %}

{% macro workflow(item, workflowGroupArray, workflowUserArray, workflowText, workflowValidityDate, workflowResubmissionDate) %}
    {% import 'CommsyBundle:Utils:macros.html.twig' as macros %}

    {% set preview %}

    <div class="uk-grid">
        <div class="uk-width-1-3">
            <strong>{{ 'worflow status'|trans({}, "material") }}:</strong> <br/>
            <div class="uk-flex-inline">
                <div class="uk-margin-right">{{ macros.workflowTrafficLight(item) }}</div>
                <div>{{workflowText}}</div>
             </div>         
        </div>

        {% if workflowValidityDate != '0000-00-00 00:00:00' %}
            <div class="uk-width-1-3">
                <div class="uk-margin-bottom">
                    <strong>{{ 'workflow validity date'|trans({}, "material") }}</strong>: <br/>
                    {{ workflowValidityDate|craue_date }}       
                </div>
            </div>
        {% endif %}
        {% if workflowResubmissionDate != '0000-00-00 00:00:00' %}
             <div class="uk-width-1-3">
                <div class="uk-margin-bottom">
                    <strong>{{ 'workflow resubmission date'|trans({}, "material") }}</strong>:<br/> 
                    {{ workflowResubmissionDate|craue_date }}
                </div>
            </div>
       {% endif %}
    </div>

        
    {% endset %}

    {% set content %}
    <div class="uk-grid">
        <div class="uk-width-1-3">
            <strong>{{ 'worflow status'|trans({}, "material") }}:</strong> <br/>
            <div class="uk-flex-inline uk-margin-bottom">
                <div class="uk-margin-right">{{ macros.workflowTrafficLight(item) }}</div>
                <div>{{workflowText}}</div>
             </div>         
        </div>
        <div class="uk-width-1-3">
            {% if workflowValidityDate != '0000-00-00 00:00:00' %}
                <div class="uk-margin-bottom">
                    <strong>{{ 'workflow validity date'|trans({}, "material") }}</strong>: <br/>
                    {{ workflowValidityDate|craue_date }}       
                </div>
            {% endif %}
        </div>
        <div class="uk-width-1-3">
            {% if workflowResubmissionDate != '0000-00-00 00:00:00' %}
                <div class="uk-margin-bottom">
                    <strong>{{ 'workflow resubmission date'|trans({}, "material") }}</strong>:<br/> 
                    {{ workflowResubmissionDate|craue_date }}
                </div>
           {% endif %}
       </div>
       {% if not workflowGroupArray is empty %}
            <div class="uk-width-1-2">
                <strong>{{ 'workflow marked as read by groups'|trans({}, "material") }}:</strong><br/>
                {% set counter = 1 %}
                {% for workflowGroup in workflowGroupArray %}
                    <a href="{{ path('commsy_group_detail', {'roomId': item.contextId, 'itemId': workflowGroup.iid}) }}">{{workflowGroup.title}}</a> ({{workflowGroup.userCount}} {{ 'of'|trans({}, "room") }} {{workflowGroup.userCountComplete}})
                    {% if counter != workflowGroupArray|length %}, {% endif %}
                    {% set counter = counter + 1 %}
                {% endfor %}
            </div>
        {% endif %}       
        {% if not workflowUserArray is empty %}
            <div class="uk-width-1-2">            
               <strong>{{ 'workflow marked as read by users'|trans({}, "material") }}:</strong><br/>
               {% set counter = 1 %}
               {% for workflowUser in workflowUserArray %}
                   <a href="{{ path('commsy_user_detail', {'roomId': item.contextId, 'itemId': workflowUser.iid}) }}">{{workflowUser.name}}</a> 
                    {% if counter != workflowUserArray|length %}, {% endif %}
                    {% set counter = counter + 1 %}
               {% endfor %}
           </div>
       {% endif %}       
     </div>
   {% endset %}
    
    {{ macros.editContent('workflow', item, true, content, preview, true, false, 0) }}
{% endmacro %}