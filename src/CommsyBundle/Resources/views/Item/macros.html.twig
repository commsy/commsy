{% macro files(item) %}
    {% import 'CommsyBundle:Utils:macros.html.twig' as macros %}

    {% set preview = '' %}
    {% set content = '' %}
    
    {% set fileArray = item.fileList.to_array %}
    {% if not fileArray is empty %}
        {% if fileArray|length > 4 %}
            {% set preview %}
            <div class="uk-slidenav-position" data-uk-slider="{infinite: false}">
                <div class="uk-slider-container">
                    <ul class="uk-slider uk-grid uk-grid-width-medium-1-4">
                        {% for file in fileArray %}
                             <li>
                                <div class="uk-panel uk-panel-box-secondary uk-vertical-align">
                                    {% if file.extension|lower == 'jpg' or file.extension|lower == 'jpeg' or file.extension|lower == 'png' or file.extension|lower == 'gif' %}
                                        <a class="uk-margin-remove" href="{{ path('commsy_file_getfile', {'fileId': file.fileId, 'disposition': 'inline'}) }}" data-uk-lightbox="{group:{{ item.itemId }}}" data-lightbox-type="image">
                                            <div class="uk-clearfix">
                                                <div class="cs-align-center">
                                                    <img class="cs-align-center cs-slider" style="max-height:80px;" src="{{ path('commsy_file_getfile', {'fileId': file.fileId, 'disposition': 'inline'}) }}" />
                                                </div>
                                            </div>
                                        </a>
                                    {% else %} 
                                        <div class="uk-clearfix">
                                            <div class="cs-align-center">
                                                <div class="cs-align-center uk-vertical-align-middle">                        
                                                    <i class="cs-icon-xxl-large  cs-slider {{ macros.iconClassForFileType(file.extension) }}"></i>
                                                </div>
                                            </div>
                                        </div>
                                    {% endif %}
                                    <div class="uk-vertical-align-middle">
                                        <a href="{{ path('commsy_file_getfile', {'fileId': file.fileId}) }}" data-uk-tooltip title="{{ file.filename }}">{{ file.filename|truncate(25) }}</a><br/>
                                        ({{ file.fileSize }} kb)
                                    </div>
                                </div>
                            </li>
                        {% endfor %}
                    </ul>
                </div>
                <a href="" class="uk-slidenav uk-slidenav-contrast uk-slidenav-previous" data-uk-slider-item="previous" draggable="false"></a>
                <a href="" class="uk-slidenav uk-slidenav-contrast uk-slidenav-next" data-uk-slider-item="next" draggable="false"></a>
            </div>
            {% endset %}
        {% endif %}
    
        {% set content %}
        <div data-uk-grid="{gutter: 20}">
            {% for file in fileArray %}
                <div class="uk-width-medium-1-2 uk-width-large-1-4">
                    <div class="uk-panel uk-panel-box-secondary uk-vertical-align">
                        {% if file.extension|lower == 'jpg' or file.extension|lower == 'jpeg' or file.extension|lower == 'png' or file.extension|lower == 'gif' %}
                            <a class="uk-margin-remove" href="{{ path('commsy_file_getfile', {'fileId': file.fileId, 'disposition': 'inline'}) }}" data-uk-lightbox="{group:{{ item.itemId }}}" data-lightbox-type="image">
                                <div class="uk-clearfix">
                                    <div class="cs-align-center">
                                        <img class="cs-align-center cs-slider" style="max-height:80px;" src="{{ path('commsy_file_getfile', {'fileId': file.fileId, 'disposition': 'inline'}) }}" />
                                    </div>
                                </div>
                            </a>
                        {% else %} 
                            <div class="uk-clearfix">
                                <div class="cs-align-center">
                                    <div class="cs-align-center uk-vertical-align-middle">                        
                                        <i class="cs-icon-xxl-large  cs-slider {{ macros.iconClassForFileType(file.extension) }}"></i>
                                    </div>
                                </div>
                            </div>
                        {% endif %}
                        <div class="uk-vertical-align-middle">
                            <a href="{{ path('commsy_file_getfile', {'fileId': file.fileId}) }}" data-uk-tooltip title="{{ file.filename }}">{{ file.filename|truncate(25) }}</a><br/>
                            ({{ file.fileSize }} kb)
                        </div>
                    </div>
                </div>
            {% endfor %}
        </div>
        {% endset %}
    {% endif %}
    
    {{ macros.editContent('files', item, true, content, preview) }}
{% endmacro %}

{% macro links(item) %}
    {% import 'CommsyBundle:Utils:macros.html.twig' as macros %}

    {% set preview %}
    <ul id="linksDisplayTabs" class="uk-tab" data-uk-tab="{connect:'#linksDisplayPreview'}">
        <li><a href="">{{ 'linked entries'|trans({})|capitalize }}</a></li>
        <li><a href="">{{ 'categories'|trans({})|capitalize }}</a></li>
        <li><a href="">{{ 'hashtags'|trans({})|capitalize }}</a></li>
    </ul>

    <!-- This is the container of the content items -->
    <ul id="linksDisplayPreview" class="uk-switcher uk-margin">
        <li>
            <div class="uk-width-1-1">
                {{ render(controller(
                    'CommsyBundle:Link:showDetail',
                    { 'roomId': item.contextId, 'itemId': item.itemId }
                ))}}
            </div>            
        </li>
        
        <li>
            <div class="uk-width-1-1">
                {{ render(controller(
                    'CommsyBundle:Category:showDetail',
                    { 'roomId': item.contextId }
                ))}}
            </div>
        </li>

        <li>
            <div class="uk-width-1-1">
                {{ render(controller(
                    'CommsyBundle:Hashtag:showDetail',
                    { 'roomId': item.contextId }
                ))}}
            </div>
        </li>
    </ul>
    {% endset %}

    {% set content %}
    <ul id="linksDisplayTabs" class="uk-tab" data-uk-tab="{connect:'#linksDisplay'}">
        <li><a href="">{{ 'linked entries'|trans({})|capitalize }}</a></li>
        <li><a href="">{{ 'categories'|trans({})|capitalize }}</a></li>
        <li><a href="">{{ 'hashtags'|trans({})|capitalize }}</a></li>
    </ul>
    <!-- This is the container of the content items -->
    <ul id="linksDisplay" class="uk-switcher uk-margin">
        <li>
            <div class="uk-width-1-1">
                {{ render(controller(
                    'CommsyBundle:Link:showDetail',
                    { 'roomId': item.contextId, 'itemId': item.itemId }
                ))}}
            </div>            
        </li>       
        <li>
            <div class="uk-width-1-1"> H
                {{ render(controller(
                    'CommsyBundle:Category:showDetail',
                    { 'roomId': item.contextId }
                ))}}
            </div>
        </li>
        <li>
            <div class="uk-width-1-1">
                {{ render(controller(
                    'CommsyBundle:Hashtag:showDetail',
                    { 'roomId': item.contextId }
                ))}}
            </div>
        </li>
    </ul> 
    {% endset %}
    
    {{ macros.editContent('links', item, true, content, preview) }}
{% endmacro %}

{% macro workflow(item) %}
    {% import 'CommsyBundle:Utils:macros.html.twig' as macros %}

    {% set preview %}
        {{ macros.workflowTrafficLight(item) }}
    {% endset %}

    {% set content %}
        {{ macros.workflowTrafficLight(item) }}
    {% endset %}
    
    {{ macros.editContent('workflow', item, true, content, preview) }}
{% endmacro %}