//>>built
define("commsy/widgets/WidgetsReleasedEntries","dojo/_base/declare,dijit/_WidgetBase,commsy/base,dijit/_TemplatedMixin,dojo/_base/lang,dojo/dom-construct,dojo/dom-attr,dojo/query,dojo/on".split(","),function(h,i,j,k,f,a){return h([j,i,k],{baseClass:"CommSyWidget",widgetHandler:null,itemId:null,currentPage:{released:1,viewable:1},maxPage:{released:1,viewable:1},entriesPerPage:{released:20,viewable:20},constructor:function(a){a=a||{};h.safeMixin(this,a)},postCreate:function(){this.inherited(arguments);
this.itemId=this.from_php.ownRoom.id;this.updateLists()},updateLists:function(){this.updateReleasedList();this.updateViewableList()},updateReleasedList:function(){a.empty(this.releasedItemListNode);this.AJAXRequest("widget_released_entries","getReleasedListContent",{start:(this.currentPage.released-1)*this.entriesPerPage.released,numEntries:this.entriesPerPage.released},f.hitch(this,function(e){dojo.forEach(e.items,f.hitch(this,function(c,e){var d=a.create("div",{className:0==e%2?"row_even even_sep_search":
"row_odd odd_sep_search"},this.releasedItemListNode,"last"),b=a.create("div",{className:"column_280"},d,"last"),b=a.create("p",{},b,"last"),g=a.create("a",{id:"listItem"+c.itemId,className:"stack_link",href:"#",innerHTML:c.title},b,"last"),b=a.create("div",{className:"column_45"},d,"last"),b=a.create("p",{},b,"last");0<c.fileCount&&a.create("a",{className:"attachment",href:"#",innerHTML:c.fileCount},b,"last");b=a.create("div",{className:"column_65"},d,"last");b=a.create("p",{},b,"last");a.create("img",
{src:this.from_php.template.tpl_path+"img/netnavigation/"+c.image.img,title:c.image.text},b,"last");b=a.create("div",{className:"column_260"},d,"last");a.create("p",{innerHTML:c.releasedFor},b,"last");a.create("div",{className:"clear"},d,"last");require(["commsy/popups/ClickDetailPopup"],f.hitch(this,function(a){(new a).init(g,{iid:c.itemId,module:c.module,contextId:this.itemId,versionId:c.versionId})}))}));this.maxPage.released=Math.ceil(e.total/this.entriesPerPage.released);this.currentPageNodeReleased.innerHTML=
Math.min(this.currentPage.released,this.maxPage.released);this.maxPageNodeReleased.innerHTML=this.maxPage.released}))},updateViewableList:function(){a.empty(this.viewableItemListNode);this.AJAXRequest("widget_released_entries","getViewableListContent",{start:(this.currentPage.viewable-1)*this.entriesPerPage.viewable,numEntries:this.entriesPerPage.viewable},f.hitch(this,function(e){dojo.forEach(e.items,f.hitch(this,function(c,e){var d=a.create("div",{className:0==e%2?"row_even even_sep_search":"row_odd odd_sep_search"},
this.viewableItemListNode,"last"),b=a.create("div",{className:"column_280"},d,"last"),b=a.create("p",{},b,"last"),g=a.create("a",{id:"listItem"+c.itemId,className:"stack_link",href:"#",innerHTML:c.title},b,"last"),b=a.create("div",{className:"column_45"},d,"last"),b=a.create("p",{},b,"last");0<c.fileCount&&a.create("a",{className:"attachment",href:"#",innerHTML:c.fileCount},b,"last");b=a.create("div",{className:"column_65"},d,"last");b=a.create("p",{},b,"last");a.create("img",{src:this.from_php.template.tpl_path+
"img/netnavigation/"+c.image.img,title:c.image.text},b,"last");b=a.create("div",{className:"column_260"},d,"last");a.create("p",{innerHTML:c.releasedFrom},b,"last");a.create("div",{className:"clear"},d,"last");require(["commsy/popups/ClickDetailPopup"],f.hitch(this,function(a){(new a).init(g,{iid:c.itemId,module:c.module,contextId:this.itemId,versionId:c.versionId})}))}));this.maxPage.viewable=Math.ceil(e.total/this.entriesPerPage.viewable);this.currentPageNodeViewable.innerHTML=Math.min(this.currentPage.viewable,
this.maxPage.viewable);this.maxPageNodeViewable.innerHTML=this.maxPage.viewable}))},onClickPaging20Released:function(){this.entriesPerPage.released=20;this.currentPage.released=1;this.paging20Released.innerHTML="<strong>20</strong>";this.paging50Released.innerHTML="50";this.updateReleasedList()},onClickPaging50Released:function(){this.entriesPerPage.released=50;this.currentPage.released=1;this.paging20Released.innerHTML="20";this.paging50Released.innerHTML="<strong>50</strong>";this.updateReleasedList()},
onClickPagingFirstReleased:function(){if(1<this.currentPage.released)this.currentPage.released=1;this.updateReleasedList()},onClickPagingPrevReleased:function(){1<this.currentPage.released&&this.currentPage.released--;this.updateReleasedList()},onClickPagingNextReleased:function(){this.currentPage.released<this.maxPage.released&&this.currentPage.released++;this.updateReleasedList()},onClickPagingLastReleased:function(){if(this.currentPage.released<this.maxPage.released)this.currentPage.released=this.maxPage.released;
this.updateReleasedList()},onClickPaging20Viewable:function(){this.entriesPerPage.viewable=20;this.currentPage.viewable=1;this.paging20Viewable.innerHTML="<strong>20</strong>";this.paging50Viewable.innerHTML="50";this.updateViewableList()},onClickPaging50Viewable:function(){this.entriesPerPage.viewable=50;this.currentPage.viewable=1;this.paging20Viewable.innerHTML="20";this.paging50Viewable.innerHTML="<strong>50</strong>";this.updateViewableList()},onClickPagingFirstViewable:function(){if(1<this.currentPage.viewable)this.currentPage.viewable=
1;this.updateViewableList()},onClickPagingPrevViewable:function(){1<this.currentPage.viewable&&this.currentPage.viewable--;this.updateViewableList()},onClickPagingNextViewable:function(){this.currentPage.viewable<this.maxPage.viewable&&this.currentPage.viewable++;this.updateViewableList()},onClickPagingLastViewable:function(){if(this.currentPage.viewable<this.maxPage.viewable)this.currentPage.viewable=this.maxPage.viewable;this.updateViewableList()},onClickListEntry:function(a){a=this.getAttrAsObject(a,
"data-custom");this.reload(a.iid,a.module,a.cid)}})});