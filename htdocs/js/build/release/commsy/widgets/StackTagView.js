//>>built
define("commsy/widgets/StackTagView","dojo/_base/declare,dijit/_WidgetBase,commsy/base,dijit/_TemplatedMixin,dojo/_base/lang,dojo/dom-construct,dojo/dom-attr,dojo/on,dojo/query,dojo/topic".split(","),function(d,e,f,g,c,i,j,h){return d([f,e,g],{baseClass:"CommSyWidget",widgetHandler:null,module:null,itemId:null,constructor:function(a){a=a||{};d.safeMixin(this,a)},postCreate:function(){this.inherited(arguments);this.module="tags";this.itemId=this.from_php.ownRoom.id;require(["commsy/tree"],c.hitch(this,
function(a){var b=new a({room_id:this.itemId,followUrl:!1});b.setupTree(this.treeNode,c.hitch(this,function(){h(b.tree.tree,"click",c.hitch(this,function(a,c,b){this.onClickTag(a.item_id[0],a.title[0]);b.preventDefault()}))}),!0)}));require(["commsy/popups/ClickTagsPopup"],c.hitch(this,function(a){(new a).init(this.tagEditNode,{module:"tags",contextId:this.itemId})}))},onClickTag:function(a,b){this.widgetHandler.getWidget("widgets/StackStack").addTagRestriction(a,b)}})});