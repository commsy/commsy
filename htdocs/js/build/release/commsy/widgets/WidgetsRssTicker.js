//>>built
define("commsy/widgets/WidgetsRssTicker","dojo/_base/declare,dijit/_WidgetBase,commsy/base,dijit/_TemplatedMixin,dojo/_base/lang,dojo/dom-construct,dojo/dom-attr,dojo/_base/xhr,dojo/query,dojo/on,dojo/topic".split(","),function(f,g,h,i,b,c,k,l,m,n,j){return f([h,g,i],{baseClass:"CommSyWidget",widgetHandler:null,items:[],constructor:function(a){a=a||{};f.safeMixin(this,a)},postCreate:function(){this.inherited(arguments);this.itemId=this.from_php.ownRoom.id;j.subscribe("refreshRssList",b.hitch(this,
function(){this.updateList()}));this.updateList();require(["commsy/popups/ClickRssPopup"],b.hitch(this,function(a){(new a).init(this.rssEditNode,{module:"rss",contextId:this.itemId})}))},updateList:function(){this.AJAXRequest("widget_rss_ticker","getRssFeeds",{},b.hitch(this,function(a){c.empty(this.rssContentNode);dojo.forEach(a.feeds,b.hitch(this,function(a){"1"==a.display&&this.AJAXRequest("widget_rss_ticker","getFeed",{address:a.adress},b.hitch(this,function(d){var e="";dojo.forEach(d,b.hitch(this,
function(a){a.title&&a.link&&(e+="<a href='"+a.link+"'>"+a.title+"</a><br/>")}));d=c.create("div",{},this.rssContentNode,"last");c.create("h3",{innerHTML:a.title},d,"last");c.create("div",{innerHTML:e},d,"last")}))}))}))}})});