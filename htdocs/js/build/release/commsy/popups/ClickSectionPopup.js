//>>built
define("commsy/popups/ClickSectionPopup","dojo/_base/declare,commsy/ClickPopupHandler,dojo/query,dojo/dom-class,dojo/_base/lang,dojo/dom-construct,dojo/dom-attr,dojo/on".split(","),function(d,e,c,h,f,i,g){return d(e,{constructor:function(){},init:function(a,b){this.triggerNode=a;this.item_id=b.iid;this.ref_iid=b.ref_iid;this.module="section";this.version_id=b.vid;this.contextId=b.contextId;this.features=["editor","tree","upload","netnavigation","calendar"];this.registerPopupClick()},setupSpecific:function(){},
onPopupSubmit:function(){dojo.forEach(this.featureHandles.editor,function(a){a.getInstance();var b=a.getNode().parentNode;g.set(c("input[type='hidden']",b)[0],"value",a.getInstance().getData())});this.submit({tabs:[{id:"rights_tab"},{id:"buzzwords_tab",group:"buzzwords"},{id:"tags_tab",group:"tags"}],nodeLists:[{query:c("div#files_attached",this.contentNode)},{query:c("div#files_finished",this.contentNode),group:"files"},{query:c("input[name='form_data[description]']",this.contentNode)},{query:c("input[name='form_data[title]']",
this.contentNode)},{query:c("select[name='form_data[number]']",this.contentNode)}]},{ref_iid:this.ref_iid,version_id:this.version_id,contextId:this.contextId})},onPopupSubmitSuccess:function(a){if("NEW"===this.item_id)this.featureHandles.netnavigation[0].afterItemCreation(a,f.hitch(this,function(){if(this.contextId){this.close();var b=c("a#listItem"+a)[0];b&&b.click()}else"undefined"!=typeof this.version_id?this.reload(a+"&version_id="+this.version_id):this.reload(a)}));else if(this.contextId){this.close();
var b=c("a#listItem"+a)[0];b&&b.click()}else"undefined"!=typeof this.version_id?this.reload(a+"&version_id="+this.version_id):this.reload(a)}})});