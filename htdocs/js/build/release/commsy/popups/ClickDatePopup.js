//>>built
define("commsy/popups/ClickDatePopup","dojo/_base/declare,commsy/ClickPopupHandler,dojo/query,dojo/dom-class,dojo/_base/lang,dojo/dom-construct,dojo/dom-attr,dojo/on,dojo/topic".split(","),function(g,h,a,e,d,l,f,i,j){return g(h,{constructor:function(){},init:function(a,c){this.triggerNode=a;this.item_id=c.iid;this.module="date";this.editType=c.editType;this.contextId=c.contextId;this.date_new=c.date_new;this.features=["editor","tree","upload","netnavigation","calendar"];this.registerPopupClick()},
setupSpecific:function(){var b=a("select[name='form_data[recurring_select]']")[0],c=a("div[id^='recurring_details_']");b&&i(b,"change",d.hitch(this,function(){var k=f.get(b,"value");dojo.forEach(c,d.hitch(this,function(a){e.add(a,"hidden")}));e.remove(a("div#recurring_details_"+k)[0],"hidden")}))},onPopupSubmit:function(b){dojo.forEach(this.featureHandles.editor,function(c){c.getInstance();var b=c.getNode().parentNode;f.set(a("input[type='hidden']",b)[0],"value",c.getInstance().getData())});this.submit({tabs:[{id:"rights_tab"},
{id:"addon_tab"},{id:"buzzwords_tab",group:"buzzwords"},{id:"tags_tab",group:"tags"}],nodeLists:[{query:a("div#files_attached",this.contentNode)},{query:a("div#files_finished",this.contentNode),group:"files"},{query:a("input[name='form_data[description]']",this.contentNode)},{query:a("input[name='form_data[dayStart]']",this.contentNode)},{query:a("input[name='form_data[timeStart]']",this.contentNode)},{query:a("input[name='form_data[dayEnd]']",this.contentNode)},{query:a("input[name='form_data[timeEnd]']",
this.contentNode)},{query:a("input[name='form_data[place]']",this.contentNode)},{query:a("input.tabStatus",this.contentNode)},{query:a("input[name='form_data[title]']",this.contentNode)}]},{part:b.part,contextId:this.contextId})},onPopupSubmitSuccess:function(b){if("NEW"===this.item_id)this.featureHandles.netnavigation[0].afterItemCreation(b,d.hitch(this,function(){this.contextId?(this.close(),j.publish("newOwnRoomItem",{itemId:b})):this.reload(b)}));else if(this.contextId){this.close();var c=a("a#listItem"+
b)[0];c&&c.click()}else this.reload(b)}})});