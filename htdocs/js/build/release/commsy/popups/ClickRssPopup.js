//>>built
define("commsy/popups/ClickRssPopup","dojo/_base/declare,commsy/ClickPopupHandler,dojo/query,dojo/dom-class,dojo/_base/lang,dojo/dom-construct,dojo/dom-attr,dojo/on,dojo/topic,dojo/NodeList-traverse".split(","),function(e,j,a,l,f,b,g,h,k){return e(j,{constructor:function(){},init:function(a,b){this.triggerNode=a;this.module="rss";this.contextId=b.contextId;this.features=[];this.registerPopupClick()},setupSpecific:function(){var c=a("input.deleteButton",this.contentNode);h(c,"click",f.hitch(this,function(a){this.onDeleteRssFeed(a.target)}));
(c=a("input#rssCreateButton",this.contentNode)[0])&&h(c,"click",f.hitch(this,function(){var c=g.get(a("input#rssNewTitle",this.contentNode)[0],"value"),e=g.get(a("input#rssNewAddress",this.contentNode)[0],"value"),d=b.create("div",{className:"rowWrapper"},a("div#rssList",this.contentNode)[0],"last");b.create("input",{type:"checkbox",name:"form_data[feeds]",value:"feed_"+(a("div#rssList div",this.contentNode).length-1),checked:"checked"},d,"last");b.create("input",{type:"text",name:"form_data[feedsName]",
size:15,value:c},d,"last");b.create("input",{type:"text",name:"form_data[feedsAddress]",size:30,value:e},d,"last");var i=b.create("input",{type:"button",className:"deleteButton",value:g.get(a("div.translationDelete",this.contentNode)[0],"innerHTML")},d,"last");h(i,"click",f.hitch(this,function(){this.onDeleteRssFeed(i)}))}))},onDeleteRssFeed:function(a){(a=(new dojo.NodeList(a)).parent("div.rowWrapper")[0])&&b.destroy(a)},onPopupSubmit:function(){this.submit({tabs:[],nodeLists:[{query:a("input[name='form_data[feeds]']",
this.contentNode),group:"feeds"},{query:a("input[name='form_data[feedsName]']",this.contentNode),group:"feedsName"},{query:a("input[name='form_data[feedsAddress]']",this.contentNode),group:"feedsAddress"}]})},onPopupSubmitSuccess:function(){this.close();k.publish("refreshRssList",{})}})});