//>>built
define("commsy/popups/ClickGroupPopup","dojo/_base/declare,commsy/ClickPopupHandler,dojo/query,dojo/dom-class,dojo/_base/lang,dojo/dom-construct,dojo/dom-attr,dojo/on".split(","),function(f,g,c,i,d,e,h){return f(g,{sendImages:[],constructor:function(){this.sendImages=[]},init:function(a,b){this.triggerNode=a;this.item_id=b.iid;this.module="group";this.editType=b.editType;this.features=["editor","upload","netnavigation","calendar","upload-single"];this.registerPopupClick()},setupSpecific:function(){dojo.ready(d.hitch(this,
function(){this.featureHandles["upload-single"][0].setCallback(d.hitch(this,function(a){var b=c("div.filePreview",this.featureHandles["upload-single"][0].uploader.form)[0];e.empty(b);e.create("img",{src:"commsy.php?cid="+this.uri_object.cid+"&mod=picture&fct=getTemp&fileName="+a.file},b,"last");this.sendImages.push({part:"upload_picture",fileInfo:a})}))}))},onPopupSubmit:function(){dojo.forEach(this.featureHandles.editor,function(a){a.getInstance();var b=a.getNode().parentNode;h.set(c("input[type='hidden']",
b)[0],"value",a.getInstance().getData())});this.submit({tabs:[{id:"rights_tab"},{id:"grouproom_tab"}],nodeLists:[{query:c("div#files_attached",this.contentNode)},{query:c("div#files_finished",this.contentNode),group:"files"},{query:c("div#popup_content",this.contentNode)}]})},onPopupSubmitSuccess:function(a){if(0<this.sendImages.length)var b={module:"group",additional:{action:this.sendImages[0].part,fileInfo:this.sendImages[0].fileInfo,iid:a}};"NEW"===this.item_id?this.featureHandles.netnavigation[0].afterItemCreation(a,
d.hitch(this,function(){0<this.sendImages.length?this.AJAXRequest("popup","save",b,d.hitch(this,function(){this.reload(a)})):this.reload(a)})):0<this.sendImages.length?this.AJAXRequest("popup","save",b,d.hitch(this,function(){this.reload(a)})):this.reload(a)}})});