//>>built
define("commsy/DiscussionTree","dojo/_base/declare,dojo/dom-construct,dojo/io-query,commsy/tree,dojo/_base/lang,dijit/Dialog,cbtree/Tree,dijit/form/TextBox,dijit/form/Button,dojo/query,dojo/dom-class,cbtree/models/ForestStoreModel,dojo/data/ItemFileWriteStore,dojo/dom-attr,cbtree/CheckBox,dojo/on,cbtree/models/StoreModel-API,dojo/NodeList-traverse".split(","),function(g,h,l,i,d,m,e,n,o,b,a,j,k,p,q,f){return g(i,{textbox:null,dialog:null,button:null,constructor:function(){},createTree:function(){return new e({autoExpand:this.expanded,
model:this.model,showRoot:!1,checkBoxes:!1,onClick:d.hitch(this,function(){})})},createModel:function(){return new j({store:this.store,checkedAttr:"match"})},createTree:function(){return new e({autoExpand:this.expanded,model:this.model,showRoot:!1,checkBoxes:this.checkboxes,persist:!1,onClick:d.hitch(this,function(c){this.followUrl&&(c=b("a[name='article"+c.item_id+"']")[0])&&this.scrollToNodeAnimated(c)})})},setupTree:function(c){this.AJAXRequest("threaded_discussion","getTreeData",{discussionId:this.item_id||
this.uri_object.iid},d.hitch(this,function(a){this.store=new k({data:{identifier:"item_id",label:"subject",items:a}});dijit._TreeNode.prototype._setLabelAttr={node:"labelNode",type:"innerHTML"};this.model=this.createModel();this.tree=this.createTree();h.empty(c);this.tree.placeAt(c);var a=b("a#discussionShortExpandAll")[0],e=b("a#discussionShortCollapseAll")[0];a&&f(a,"click",d.hitch(this,function(){this.onClickExpandAll()}));e&&f(e,"click",d.hitch(this,function(){this.onClickCollapseAll()}));10<
this.getNumItems(this.tree)?this.autoExpandToLevel(this.tree,1):this.autoExpandToLevel(this.tree,this.autoExpandLevel)}))},onClickExpandAll:function(){this.autoExpandToLevel(this.tree,0,!0);a.add(b("a#discussionShortExpandAll")[0],"hidden");a.remove(b("a#discussionShortCollapseAll")[0],"hidden")},onClickCollapseAll:function(){this.autoExpandToLevel(this.tree,0);a.add(b("a#discussionShortCollapseAll")[0],"hidden");a.remove(b("a#discussionShortExpandAll")[0],"hidden")}})});