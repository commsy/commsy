//>>built
define("commsy/TogglePopupHandler","dojo/_base/declare,commsy/PopupHandler,dojo/on,dojo/topic,dojo/_base/lang,dojo/query,dojo/dom-class,dojo/dom-construct,dojo/dom-attr".split(","),function(e,f,c,h,b,d,i,g){return e(f,{is_loaded:!1,is_open:!1,popup_button_node:null,statics:{togglePopups:[]},constructor:function(){this.fct="popup"},registerPopupClick:function(){c(this.popup_button_node,"click",b.hitch(this,function(a){this.open();a.preventDefault()}))},open:function(){if(!1===this.is_loaded)this.setupLoading(),
this.statics.togglePopups.push(this),this.AJAXRequest("popup","getHTML",{module:this.module},b.hitch(this,function(a){g.place(a,this.contentNode,"last");this.setupTabs();this.setupFeatures();this.setupSpecific();this.onCreate();c(d("a",this.contentNode)[0],"click",b.hitch(this,function(a){this.close();a.preventDefault()}));c(d("input.submit",this.contentNode),"click",b.hitch(this,function(a){this.onPopupSubmit(this.getAttrAsObject(a.target,"data-custom"));a.preventDefault()}));this.destroyLoading()})),
this.is_loaded=!0;(this.is_open=!this.is_open)&&dojo.forEach(this.statics.togglePopups,b.hitch(this,function(a){if(a!==this)a.close(),a.is_open=!1}));this.onTogglePopup()},close:function(){this.inherited(arguments);this.onTogglePopup()}})});