//>>built
define("commsy/WidgetPopupHandler","dojo/_base/declare,commsy/TogglePopupHandler,dojo/query,dojo/dom-class,dojo/dom-attr,dojo/dom-construct,dojo/on,dojo/_base/lang,dojo/_base/Deferred,dojo/DeferredList".split(","),function(f,e,j,k,l,m,n,d,h,i){return f(e,{widgetArray:[],widgetHandles:[],constructor:function(a,b){this.popup_button_node=a;this.contentNode=b;this.widgetArray=[];this.widgetHandles=[];this.defWidgets=null;this.registerPopupClick()},setupSpecific:function(){this.AJAXRequest("widgets","get"+
this.ucFirst(this.module)+"Configuration",{},d.hitch(this,function(a){this.widgetArray=this.widgetArray.concat(a.displayConfig);this.loadWidgets()}))},loadWidgets:function(){dojo.forEach(this.widgetArray,d.hitch(this,function(a){var a=a.split("_"),b="widgets/"+this.ucFirst(this.module)+this.ucFirst(a[1]);a[3]&&"preferences"==a[3]&&(b+="Preferences");this.loadWidget(b)}))},loadWidgetsManual:function(a){var b=[];dojo.forEach(a,d.hitch(this,function(a){b.push(this.loadWidget(a))}));return new i(b)},
loadWidget:function(a,b){var b=b||{},g=new h;require(["commsy/"+a],d.hitch(this,function(e){this.AJAXRequest("widgets","getHTMLForWidget",{widgetPath:a},d.hitch(this,function(c){c={templateString:c,widgetHandler:this};f.safeMixin(c,b);c=new e(c);c.startup();this.widgetHandles.push({path:a,handler:c});g.resolve({handle:c})}))}));return g},getWidget:function(a){return dojo.filter(this.widgetHandles,function(b){return b.path==a})[0].handler||null},onPopupSubmit:function(){},onPopupSubmitSuccess:function(){}})});