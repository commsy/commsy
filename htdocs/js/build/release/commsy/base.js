//>>built
define("commsy/base","dojo/_base/declare,dojo/_base/xhr,dojo/io-query,dojox/fx,dojox/fx/scroll,dojo/query,dojo/dom-attr,dojo/dom-construct,dojo/window,dojo/dom-geometry,dojo/_base/lang".split(","),function(h,i,k,l,p,e,m,d,n,o,j){return h(null,{uri_object:null,from_php:null,constructor:function(){this.uri_object=k.queryToObject(dojo.doc.location.search.substr("?"===dojo.doc.location.search[0]?1:0));this.from_php=dojo.fromJson(from_php)},replaceOrSetURIParam:function(a,b){var c=this.uri_object;c[a]=
b;return c},replaceOrSetAnchor:function(a){return location.href.split("#")[0]+a},setupLoading:function(){var a=e("#loadingScreen")[0];a||(a=d.create("div",{id:"loadingScreen"},e("div#popup_uploader")[0],"first"),a=d.create("div",{id:"loadingScreenInner"},a,"last"),d.create("h2",{innerHTML:"Loading..."},a,"last"),d.create("img",{src:this.from_php.template.tpl_path+"img/ajax_loader_big.gif"},a,"last"))},destroyLoading:function(){var a=e("#loadingScreen")[0];a&&dojo.fadeOut({node:a,duration:1E3,onEnd:function(){d.destroy(a)}}).play()},
request:function(a,b,c){a={url:"commsy.php?cid="+this.uri_object.cid+"&mod=ajax&fct="+a+"&action="+b,headers:{"Content-Type":"application/json; charset=utf-8",Accept:"application/json"},postData:dojo.toJson(c),handleAs:"json",error:j.hitch(this,function(a,b){0!==b.xhr.status&&this.from_php.dev.xhr_error_reporting&&!0===this.from_php.dev.xhr_error_reporting&&this.AJAXRequest("actions","sendXHRErrorReporting",{ioargs:b,error:a},function(){},function(){},!1,{error:function(){}})})};return i.post(a)},
AJAXRequest:function(a,b,c,d,e,g,f){d=d||function(){};e=e||function(){};g=g||!1;f=f||{};a={url:"commsy.php?cid="+this.uri_object.cid+"&mod=ajax&fct="+a+"&action="+b,headers:{"Content-Type":"application/json; charset=utf-8",Accept:"application/json"},postData:dojo.toJson(c),handleAs:"json",sync:g,error:j.hitch(this,function(a,b){0!==b.xhr.status&&this.from_php.dev.xhr_error_reporting&&!0===this.from_php.dev.xhr_error_reporting&&this.AJAXRequest("actions","sendXHRErrorReporting",{ioargs:b,error:a},
function(){},function(){},!1,{error:function(){}})})};h.safeMixin(a,f);f=i.post(a);f.then(function(a){"success"===a.status?d(a.data):e(a)});return f},scrollToNodeAnimated:function(a){var b=n.getBox(),c=o.position(a);(c.y>b.t+b.h||c.y+c.h<b.t)&&l.smoothScroll({node:a,win:window,duration:400}).play()},ucFirst:function(a){return a.charAt(0).toUpperCase()+a.slice(1)},getAttrAsObject:function(a,b){if(a){var c=m.get(a,b);if(c)return dojo.fromJson("{"+c+"}")}return{}},reload:function(a,b,c){b=b||null;c=
c||null;if(!c)c=this.uri_object.cid;if(!b)b=this.uri_object.mod;if("home"===b)b=this.module;location.href="commsy.php?cid="+c+"&mod="+b+"&fct=detail&iid="+a}})});