//>>built
define("dojox/io/windowName","dojo/_base/kernel,dojo/_base/window,dojo/_base/xhr,dojo/_base/sniff,dojo/_base/url,dojo/domReady!".split(","),function(d){d.getObject("io.windowName",!0,dojox);dojox.io.windowName={send:function(m,a){a.url+=(a.url.match(/\?/)?"&":"?")+"windowname="+(a.authElement?"auth":!0);var i=a.authElement,k=function(a){try{var h=g.ioArgs.frame.contentWindow.document;h.write(" ");h.close()}catch(k){}(i||d.body()).removeChild(g.ioArgs.outerFrame);return a},g=d._ioSetArgs(a,k,k,k);
a.timeout&&setTimeout(function(){-1==g.fired&&g.callback(Error("Timeout"))},a.timeout);dojox.io.windowName._send(g,m,i,a.onAuthLoad);return g},_send:function(m,a,i,k){function g(a){a.style.width="100%";a.style.height="100%";a.style.border="0px"}var j=m.ioArgs,h=dojox.io.windowName._frameNum++,q=(d.config.dojoBlankHtmlUrl||d.config.dojoCallbackUrl||d.moduleUrl("dojo","resources/blank.html"))+"#"+h,n=new d._Url(window.location,q),e=d.doc,f=i||d.body();if(d.isMoz&&![].reduce){var b=e.createElement("iframe");
g(b);if(!i)b.style.display="none";f.appendChild(b);f=b.contentWindow;e=f.document;e.write("<html><body margin='0px'><iframe style='width:100%;height:100%;border:0px' name='protectedFrame'></iframe></body></html>");e.close();e=f[0];f.__defineGetter__(0,function(){});f.__defineGetter__("protectedFrame",function(){});e=e.document;e.write("<html><body margin='0px'></body></html>");e.close();f=e.body}var c;if(d.isIE){var l=e.createElement("div");l.innerHTML='<iframe name="'+n+'" onload="dojox.io.windowName['+
h+']()">';c=l.firstChild}else c=e.createElement("iframe");j.frame=c;g(c);j.outerFrame=b=b||c;if(!i)b.style.display="none";var o=0;dojox.io.windowName[h]=c.onload=function(){try{if(!d.isMoz&&"about:blank"==c.contentWindow.location)return}catch(a){}if(!o)o=1,i?k&&k():c.contentWindow.location=q;try{if(2>o){var b=c.contentWindow.name;if("string"==typeof b&&b!=n)o=2,m.ioArgs.hash=c.contentWindow.location.hash,m.callback(b)}}catch(e){}};c.name=n;if(a.match(/GET/i))d._ioAddQueryToUrl(j),c.src=j.url,f.appendChild(c),
c.contentWindow&&c.contentWindow.location.replace(j.url);else if(a.match(/POST/i)){f.appendChild(c);a=d.doc.createElement("form");d.body().appendChild(a);var h=d.queryToObject(j.query),p;for(p in h){b=h[p];b=b instanceof Array?b:[b];for(f=0;f<b.length;f++)l=e.createElement("input"),l.type="hidden",l.name=p,l.value=b[f],a.appendChild(l)}a.method="POST";a.action=j.url;a.target=n;a.submit();a.parentNode.removeChild(a)}else throw Error("Method "+a+" not supported with the windowName transport");if(c.contentWindow)c.contentWindow.name=
n},_frameNum:0};return dojox.io.windowName});