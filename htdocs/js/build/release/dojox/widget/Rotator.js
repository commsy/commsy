//>>built
define("dojox/widget/Rotator","dojo/aspect,dojo/_base/declare,dojo/_base/Deferred,dojo/_base/lang,dojo/_base/array,dojo/_base/fx,dojo/dom,dojo/dom-attr,dojo/dom-construct,dojo/dom-geometry,dojo/dom-style,dojo/topic,dojo/on,dojo/parser,dojo/query,dojo/fx/easing,dojo/NodeList-dom".split(","),function(u,o,v,i,j,w,x,k,s,q,h,r,A,y,t){o=o("dojox.widget.Rotator",null,{transition:"dojox.widget.rotator.swap",transitionParams:"duration:500",panes:null,constructor:function(c,a){i.mixin(this,c);var b=this,e=
b.transition,l=b._transitions={},z=b._idMap={},g=b.transitionParams=eval("({ "+b.transitionParams+" })"),a=b._domNode=x.byId(a);b._domNodeContentBox=q.getContentBox(a);var f={left:0,top:0},m=function(a,c){console.warn(b.declaredClass,' - Unable to find transition "',a,'", defaulting to "',c,'".')};b.id=a.id||(new Date).getTime();"static"==h.get(a,"position")&&h.set(a,"position","relative");l[e]=i.getObject(e);if(!l[e])m(e,"dojox.widget.rotator.swap"),l[b.transition="dojox.widget.rotator.swap"]=d.getObject("dojox.widget.rotator.swap");
if(!g.duration)g.duration=500;j.forEach(b.panes,function(b){s.create("div",b,a)});var n=b.panes=[];t(">",a).forEach(function(a,c){var e={node:a,idx:c,params:i.mixin({},g,eval("({ "+(k.get(a,"transitionParams")||"")+" })"))},p=e.trans=k.get(a,"transition")||b.transition;j.forEach(["id","title","duration","waitForEvent"],function(b){e[b]=k.get(a,b)});e.id&&(z[e.id]=c);if(!l[p]&&!(l[p]=i.getObject(p)))m(p,e.trans=b.transition);f.position="absolute";f.display="none";if(null==b.idx||k.get(a,"selected"))null!=
b.idx&&h.set(n[b.idx].node,"display","none"),b.idx=c,f.display="";h.set(a,f);t("> script[type^='dojo/method']",a).orphan().forEach(function(a){var b=k.get(a,"event");b&&(e[b]=y._functionFromScript(a))});n.push(e)});b._controlSub=r.subscribe(b.id+"/rotator/control",i.hitch(b,this.control))},destroy:function(){j.forEach([this._controlSub,this.wfe],function(c){c.remove()});s.destroy(this._domNode)},next:function(){return this.go(this.idx+1)},prev:function(){return this.go(this.idx-1)},go:function(c){var a=
this,b=a.idx,e=a.panes,l=e.length,k=a._idMap[c];a._resetWaitForEvent();c=null!=k?k:c||0;c=c<l?0>c?l-1:c:0;if(c==b||a.anim)return null;var g=e[b],f=e[c];h.set(g.node,"zIndex",2);h.set(f.node,"zIndex",1);var m={current:g,next:f,rotator:a};if(b=a.anim=a._transitions[f.trans](i.mixin({rotatorBox:a._domNodeContentBox},m,f.params))){var n=new v,j=f.waitForEvent,o=u.after(b,"onEnd",function(){h.set(g.node,{display:"none",left:0,opacity:1,top:0,zIndex:0});o.remove();a.anim=null;a.idx=c;if(g.onAfterOut)g.onAfterOut(m);
if(f.onAfterIn)f.onAfterIn(m);a.onUpdate("onAfterTransition");j||(a._resetWaitForEvent(),n.callback())},!0);a.wfe=j?r.subscribe(j,function(){a._resetWaitForEvent();n.callback(!0)}):null;a.onUpdate("onBeforeTransition");if(g.onBeforeOut)g.onBeforeOut(m);if(f.onBeforeIn)f.onBeforeIn(m);b.play();return n}},onUpdate:function(c,a){r.publish(this.id+"/rotator/update",c,this,a||{})},_resetWaitForEvent:function(){this.wfe&&(this.wfe.remove(),delete this.wfe)},control:function(c){var a=i._toArray(arguments),
b=this;a.shift();b._resetWaitForEvent();b[c]?((a=b[c].apply(b,a))&&a.addCallback(function(){b.onUpdate(c)}),b.onManualChange(c)):console.warn(b.declaredClass,' - Unsupported action "',c,'".')},resize:function(c,a){var b=this._domNodeContentBox={w:c,h:a};q.setContentSize(this._domNode,b);j.forEach(this.panes,function(a){q.setContentSize(a.node,b)})},onManualChange:function(){}});i.setObject("dojox.widget.rotator.swap",function(c){return new w.Animation({play:function(){h.set(c.current.node,"display",
"none");h.set(c.next.node,"display","");this._fire("onEnd")}})});return o});