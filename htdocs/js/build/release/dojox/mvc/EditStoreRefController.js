//>>built
define("dojox/mvc/EditStoreRefController","dojo/_base/declare,dojo/_base/lang,dojo/when,./getPlainValue,./EditModelRefController,./StoreRefController".split(","),function(e,d,f,g,h,i){return e("dojox.mvc.EditStoreRefController",[i,h],{getPlainValueOptions:null,_removals:[],_resultsWatchHandle:null,_refSourceModelProp:"sourceModel",queryStore:function(a,b){if((this.store||{}).query){this._resultsWatchHandle&&this._resultsWatchHandle.unwatch();this._removals=[];var c=this;return f(this.inherited(arguments),
function(a){if(!c._beingDestroyed){if(d.isArray(a))c._resultsWatchHandle=a.watchElements(function(a,b){[].push.apply(c._removals,b)});return a}})}},getStore:function(a,b){this._resultsWatchHandle&&this._resultsWatchHandle.unwatch();return this.inherited(arguments)},commit:function(){if(this._removals){for(var a=0;a<this._removals.length;a++)this.store.remove(this.store.getIdentity(this._removals[a]));this._removals=[]}var b=g(this.get(this._refEditModelProp),this.getPlainValueOptions);if(d.isArray(b))for(a=
0;a<b.length;a++)this.store.put(b[a]);else this.store.put(b);this.inherited(arguments)},reset:function(){this.inherited(arguments);this._removals=[]},destroy:function(){this._resultsWatchHandle&&this._resultsWatchHandle.unwatch();this.inherited(arguments)}})});