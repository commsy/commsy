//>>built
require({cache:{"url:dojox/calendar/templates/MonthColumnView.html":'<div data-dojo-attach-events="keydown:_onKeyDown">\t\t\n\t<div data-dojo-attach-point="columnHeader" class="dojoxCalendarColumnHeader">\n\t\t<table data-dojo-attach-point="columnHeaderTable" class="dojoxCalendarColumnHeaderTable" cellpadding="0" cellspacing="0"></table>\n\t</div>\t\n\t<div data-dojo-attach-point="vScrollBar" class="dojoxCalendarVScrollBar">\n\t\t<div data-dojo-attach-point="vScrollBarContent" style="visibility:hidden;position:relative; width:1px; height:1px;" ></div>\n\t</div>\t\n\t<div data-dojo-attach-point="scrollContainer" class="dojoxCalendarScrollContainer">\n\t\t<div data-dojo-attach-point="sheetContainer" style="position:relative;left:0;right:0;margin:0;padding:0">\t\t\t\n\t\t\t<div data-dojo-attach-point="grid" class="dojoxCalendarGrid">\n\t\t\t\t<table data-dojo-attach-point="gridTable" class="dojoxCalendarGridTable" cellpadding="0" cellspacing="0" style="width:100%"></table>\n\t\t\t</div>\n\t\t\t<div data-dojo-attach-point="itemContainer" class="dojoxCalendarContainer" data-dojo-attach-event="mousedown:_onGridMouseDown,mouseup:_onGridMouseUp,ondblclick:_onGridDoubleClick,touchstart:_onGridTouchStart,touchmove:_onGridTouchMove,touchend:_onGridTouchEnd">\n\t\t\t\t<table data-dojo-attach-point="itemContainerTable" class="dojoxCalendarContainerTable" cellpadding="0" cellspacing="0" style="width:100%"></table>\n\t\t\t</div>\n\t\t</div> \n\t</div>\t\n</div>\n'}});
define("dojox/calendar/MonthColumnView","./ViewBase,dijit/_TemplatedMixin,./_VerticalScrollBarBase,dojo/text!./templates/MonthColumnView.html,dojo/_base/declare,dojo/_base/event,dojo/_base/lang,dojo/_base/array,dojo/_base/sniff,dojo/_base/fx,dojo/_base/html,dojo/on,dojo/dom,dojo/dom-class,dojo/dom-style,dojo/dom-geometry,dojo/dom-construct,dojo/mouse,dojo/query,dojo/i18n,dojox/html/metrics".split(","),function(t,u,v,w,x,p,q,D,r,y,z,l,E,j,n,s,o,A,m,B,C){return x("dojox.calendar.MonthColumnView",[t,
u],{baseClass:"dojoxCalendarMonthColumnView",templateString:w,viewKind:"monthColumns",_setTabIndexAttr:"domNode",renderData:null,startDate:null,columnCount:6,daySize:30,showCellLabel:!0,showHiddenItems:!0,verticalRenderer:null,percentOverlap:0,horizontalGap:4,columnHeaderFormatLength:null,gridCellDatePattern:null,roundToDay:!0,_layoutUnit:"month",_columnHeaderHandlers:null,constructor:function(){this.invalidatingProperties="columnCount,startDate,daySize,percentOverlap,verticalRenderer,columnHeaderDatePattern,horizontalGap,scrollBarRTLPosition,itemToRendererKindFunc,layoutPriorityFunction,textDir,items,showCellLabel,showHiddenItems".split(",");
this._columnHeaderHandlers=[]},postCreate:function(){this.inherited(arguments);this.keyboardUpDownUnit="day";this.keyboardUpDownSteps=1;this.keyboardLeftRightUnit="month";this.keyboardLeftRightSteps=1;this.allDayKeyboardUpDownUnit="day";this.allDayKeyboardUpDownSteps=1;this.allDayKeyboardLeftRightUnit="month";this.allDayKeyboardLeftRightSteps=1},destroy:function(a){this._cleanupColumnHeader();this.scrollBar&&this.scrollBar.destroy(a);this.inherited(arguments)},_scrollBar_onScroll:function(a){this.scrollContainer.scrollTop=
a},buildRendering:function(){this.inherited(arguments);if(this.vScrollBar)this.scrollBar=new v({content:this.vScrollBarContent},this.vScrollBar),this.scrollBar.on("scroll",q.hitch(this,this._scrollBar_onScroll)),this._viewHandles.push(l(this.scrollContainer,A.wheel,dojo.hitch(this,this._mouseWheelScrollHander)))},postscript:function(){this.inherited(arguments);this._initialized=!0;this.invalidRendering||this.refreshRendering()},_setVerticalRendererAttr:function(a){this._destroyRenderersByKind("vertical");
this._set("verticalRenderer",a)},_createRenderData:function(){var a={};a.daySize=this.get("daySize");a.scrollbarWidth=C.getScrollbar().w+1;a.dateLocaleModule=this.dateLocaleModule;a.dateClassObj=this.dateClassObj;a.dateModule=this.dateModule;a.dates=[];a.columnCount=this.get("columnCount");var b=this.get("startDate");null==b&&(b=new a.dateClassObj);this.startDate=b=this.floorToMonth(b,!1,a);for(var c=b.getMonth(),d=0,f=0;f<a.columnCount;f++){var h=[];for(a.dates.push(h);b.getMonth()==c;)h.push(b),
b=a.dateModule.add(b,"day",1),b=this.floorToDay(b,!1,a);c=b.getMonth();if(d<h.length)d=h.length}a.startTime=new a.dateClassObj(a.dates[0][0]);a.endTime=new a.dateClassObj(h[h.length-1]);a.endTime=a.dateModule.add(a.endTime,"day",1);a.maxDayCount=d;a.sheetHeight=a.daySize*d;if(this.displayedItemsInvalidated)this.displayedItemsInvalidated=!1,this._computeVisibleItems(a),this._isEditing&&this._endItemEditing(null,!1);else if(this.renderData)a.items=this.renderData.items;return a},_validateProperties:function(){this.inherited(arguments);
if(1>this.columnCount||isNaN(this.columnCount))this.columnCount=1;if(5>this.daySize||isNaN(this.daySize))this.daySize=5},_setStartDateAttr:function(a){this.displayedItemsInvalidated=!0;this._set("startDate",a)},_setColumnCountAttr:function(a){this.displayedItemsInvalidated=!0;this._set("columnCount",a)},__fixEvt:function(a){a.sheet="primary";a.source=this;return a},_formatColumnHeaderLabel:function(a){var b="wide";if(this.columnHeaderFormatLength)b=this.columnHeaderFormatLength;return this.renderData.dateLocaleModule.getNames("months",
b,"standAlone")[a.getMonth()]},_formatGridCellLabel:function(a){var b;if(null==a)return"";if(this.gridCellPattern)return this.renderData.dateLocaleModule.format(a,{selector:"date",datePattern:this.gridCellDatePattern});b=B.getLocalization("dojo.cldr",this._calendar)["dateFormatItem-d"];return this.renderData.dateLocaleModule.getNames("days","abbr","standAlone")[a.getDay()].substring(0,1)+" "+this.renderData.dateLocaleModule.format(a,{selector:"date",datePattern:b})},scrollPosition:null,scrollBarRTLPosition:"left",
_setScrollPositionAttr:function(a){this._setScrollPosition(a.date,a.duration,a.easing)},_getScrollPositionAttr:function(){return{date:this.scrollContainer.scrollTop/this.daySize+1}},_setScrollPosition:function(a,b,c){1>a?a=1:31<a&&(a=31);a=(a-1)*this.daySize;b?(this._scrollAnimation&&this._scrollAnimation.stop(),b=Math.abs((a-this.scrollContainer.scrollTop)*b/this.renderData.sheetHeight),this._scrollAnimation=new y.Animation({curve:[this.scrollContainer.scrollTop,a],duration:b,easing:c,onAnimate:q.hitch(this,
function(a){this._setScrollImpl(a)})}),this._scrollAnimation.play()):this._setScrollImpl(a)},_setScrollImpl:function(a){this.scrollContainer.scrollTop=a;this.scrollBar&&this.scrollBar.set("value",a)},ensureVisibility:function(a,b,c,d,f){d=void 0==d?1:d;if(this.scrollable&&this.autoScroll){a=a.getDate()-d;this.isStartOfDay(b)&&(b=this._waDojoxAddIssue(b,"day",-1));var b=b.getDate()+d,d=this.get("scrollPosition").date,h=s.getContentBox(this.scrollContainer),h=this.get("scrollPosition").date+h.h/this.daySize,
g=!1,e=null;switch(c){case "start":g=a>=d&&a<=h;e=a;break;case "end":g=b>=d&&b<=h;e=b-(h-d);break;case "both":g=a>=d&&b<=h,e=a}g||this._setScrollPosition(e,f)}},scrollView:function(a){this._setScrollPosition(this.get("scrollPosition").date+a)},_mouseWheelScrollHander:function(a){this.scrollView(0<a.wheelDelta?-1:1)},refreshRendering:function(){if(this._initialized){this._validateProperties();var a=this.renderData,b=this._createRenderData();this.renderData=b;this._createRendering(b,a);this._layoutRenderers(b)}},
_createRendering:function(a,b){n.set(this.sheetContainer,"height",a.sheetHeight+"px");this._configureScrollBar(a);this._buildColumnHeader(a,b);this._buildGrid(a,b);this._buildItemContainer(a,b)},_configureScrollBar:function(a){r("ie")&&this.scrollBar&&n.set(this.scrollBar.domNode,"width",a.scrollbarWidth+1+"px");var b=this.isLeftToRight()?!0:"right"==this.scrollBarRTLPosition,c=b?"right":"left",b=b?"left":"right";this.scrollBar&&(this.scrollBar.set("maximum",a.sheetHeight),n.set(this.scrollBar.domNode,
c,0),n.set(this.scrollBar.domNode,b,"auto"));n.set(this.scrollContainer,c,a.scrollbarWidth+"px");n.set(this.scrollContainer,b,"0");n.set(this.columnHeader,c,a.scrollbarWidth+"px");n.set(this.columnHeader,b,"0");this.buttonContainer&&null!=this.owner&&this.owner.currentView==this&&(n.set(this.buttonContainer,c,a.scrollbarWidth+"px"),n.set(this.buttonContainer,b,"0"))},_columnHeaderClick:function(a){p.stop(a);var b=m("td",this.columnHeaderTable).indexOf(a.currentTarget);this._onColumnHeaderClick({index:b,
date:this.renderData.dates[b][0],triggerEvent:a})},_buildColumnHeader:function(a,b){var c=this.columnHeaderTable;if(c){var d=a.columnCount-(b?b.columnCount:0);if(8==r("ie"))if(null==this._colTableSave)this._colTableSave=q.clone(c);else if(0>d)this._cleanupColumnHeader(),this.columnHeader.removeChild(c),o.destroy(c),this.columnHeaderTable=c=q.clone(this._colTableSave),this.columnHeader.appendChild(c),d=a.columnCount;var f=m("tbody",c),h=m("tr",c),g,f=1==f.length?f[0]:z.create("tbody",null,c),h=1==
h.length?h[0]:o.create("tr",null,f);if(0<d)for(f=0;f<d;f++){g=o.create("td",null,h);var e=[];e.push(l(g,"click",q.hitch(this,this._columnHeaderClick)));r("touch")?(e.push(l(g,"touchstart",function(a){p.stop(a);j.add(a.currentTarget,"Active")})),e.push(l(g,"touchend",function(a){p.stop(a);j.remove(a.currentTarget,"Active")}))):(e.push(l(g,"mousedown",function(a){p.stop(a);j.add(a.currentTarget,"Active")})),e.push(l(g,"mouseup",function(a){p.stop(a);j.remove(a.currentTarget,"Active")})),e.push(l(g,
"mouseover",function(a){p.stop(a);j.add(a.currentTarget,"Hover")})),e.push(l(g,"mouseout",function(a){p.stop(a);j.remove(a.currentTarget,"Hover")})));this._columnHeaderHandlers.push(e)}else{d=-d;for(f=0;f<d;f++){g=h.lastChild;h.removeChild(g);o.destroy(g);for(g=this._columnHeaderHandlers.pop();0<g.length;)g.pop().remove()}}m("td",c).forEach(function(b,c){b.className="";0==c?j.add(b,"first-child"):c==this.renderData.columnCount-1&&j.add(b,"last-child");var d=a.dates[c][0];this._setText(b,this._formatColumnHeaderLabel(d));
this.styleColumnHeaderCell(b,d,a)},this)}},_cleanupColumnHeader:function(){for(;0<this._columnHeaderHandlers.length;)for(var a=this._columnHeaderHandlers.pop();0<a.length;)a.pop().remove()},styleColumnHeaderCell:function(){},_buildGrid:function(a,b){var c=this.gridTable;if(c){n.set(c,"height",a.sheetHeight+"px");var d=a.maxDayCount-(b?b.maxDayCount:0),f=0<d,h=a.columnCount-(b?b.columnCount:0);if(8==r("ie"))if(null==this._gridTableSave)this._gridTableSave=q.clone(c);else if(0>h)this.grid.removeChild(c),
o.destroy(c),this.gridTable=c=q.clone(this._gridTableSave),this.grid.appendChild(c),h=a.columnCount,d=a.maxDayCount,f=!0;var g=m("tbody",c),g=1==g.length?g[0]:o.create("tbody",null,c);if(f)for(var e=0;e<d;e++)o.create("tr",null,g);else{d=-d;for(e=0;e<d;e++)g.removeChild(g.lastChild)}var i=a.maxDayCount-d,k=f||0<h,h=k?h:-h;m("tr",c).forEach(function(b,c){if(k)for(var d=c>=i?a.columnCount:h,c=0;c<d;c++){var e=o.create("td",null,b);o.create("span",null,e)}else for(c=0;c<h;c++)b.removeChild(b.lastChild)});
m("tr",c).forEach(function(b,c){b.className="";0==c&&j.add(b,"first-child");c==a.maxDayCount-1&&j.add(b,"last-child");m("td",b).forEach(function(b,d){b.className="";0==d&&j.add(b,"first-child");d==a.columnCount-1&&j.add(b,"last-child");var e=null;c<a.dates[d].length&&(e=a.dates[d][c]);this._setText(m("span",b)[0],this.showCellLabel?this._formatGridCellLabel(e,c,d):null);this.styleGridCell(b,e,d,c,a)},this)},this)}},styleGridCell:function(a,b){null!=b&&(this.isToday(b)?j.add(a,"dojoxCalendarToday"):
this.isWeekEnd(b)&&j.add(a,"dojoxCalendarWeekend"))},_buildItemContainer:function(a,b){var c=this.itemContainerTable;if(c){var d=[];n.set(c,"height",a.sheetHeight+"px");var f=a.columnCount-(b?b.columnCount:0);if(8==r("ie"))if(null==this._itemTableSave)this._itemTableSave=q.clone(c);else if(0>f)this.itemContainer.removeChild(c),this._recycleItemRenderers(!0),o.destroy(c),this.itemContainerTable=c=q.clone(this._itemTableSave),this.itemContainer.appendChild(c),f=a.columnCount;var h=m("tbody",c),g=m("tr",
c),h=1==h.length?h[0]:o.create("tbody",null,c),g=1==g.length?g[0]:o.create("tr",null,h);if(0<f)for(var e=0;e<f;e++)h=o.create("td",null,g),o.create("div",{className:"dojoxCalendarContainerColumn"},h);else{f=-f;for(e=0;e<f;e++)g.removeChild(g.lastChild)}m("td>div",c).forEach(function(b){n.set(b,{height:a.sheetHeight+"px"});d.push(b)},this);a.cells=d}},_overlapLayoutPass2:function(a){var b,c,d,f;d=a[a.length-1];for(c=0;c<d.length;c++)d[c].extent=1;for(b=0;b<a.length-1;b++){d=a[b];for(c=0;c<d.length;c++)if(f=
d[c],-1==f.extent){f.extent=1;for(var h=0,g=!1,e=b+1;e<a.length&&!g;e++){for(var i=a[e],k=0;k<i.length&&!g;k++){var j=i[k];f.start<j.end&&j.start<f.end&&(g=!0)}g||h++}f.extent+=h}}},_defaultItemToRendererKindFunc:function(a){return a.allDay?"vertical":1440<=Math.abs(this.renderData.dateModule.difference(a.startTime,a.endTime,"minute"))?"vertical":null},_layoutRenderers:function(a){this.hiddenEvents={};this.inherited(arguments)},_layoutInterval:function(a,b,c,d,f){var h=[],g=[];a.colW=this.itemContainer.offsetWidth/
a.columnCount;for(var e=0;e<f.length;e++){var i=f[e];"vertical"==this._itemToRendererKind(i)?h.push(i):this.showHiddenItems&&g.push(i)}0<h.length&&this._layoutVerticalItems(a,b,c,d,h);0<g.length&&this._layoutBgItems(a,b,c,d,g)},_dateToYCoordinate:function(a,b,c){a=0;a=c?(b.getDate()-1)*this.renderData.daySize:this.renderData.daySize+(this._waDojoxAddIssue(b,"day",-1).getDate()-1)*this.renderData.daySize;return a+=(60*b.getHours()+b.getMinutes())*this.renderData.daySize/1440},_layoutVerticalItems:function(a,
b,c,d,f){if(null!=this.verticalRenderer){for(var b=a.cells[b],h=[],g=0;g<f.length;g++){var e=f[g],i=this.computeRangeOverlap(a,e.startTime,e.endTime,c,d),k=this._dateToYCoordinate(a,i[0],!0),j=this._dateToYCoordinate(a,i[1],!1);j>k&&(e=q.mixin({start:k,end:j,range:i,item:e},e),h.push(e))}c=this.computeOverlapping(h,this._overlapLayoutPass2).numLanes;d=this.percentOverlap/100;for(g=0;g<h.length;g++){e=h[g];k=e.lane;i=e.extent;0==d?(f=1==c?a.colW:(a.colW-(c-1)*this.horizontalGap)/c,k*=f+this.horizontalGap,
f=1==i?f:f*i+(i-1)*this.horizontalGap,f=100*f/a.colW,k=100*k/a.colW):(f=1==c?100:100/(c-(c-1)*d),k*=f-d*f,f=1==i?f:f*(i-(i-1)*d));i=this._createRenderer(e,"vertical",this.verticalRenderer,"dojoxCalendarVertical");n.set(i.container,{top:e.start+"px",left:k+"%",width:f+"%",height:e.end-e.start+1+"px"});var k=this.isItemBeingEdited(e),j=this.isItemSelected(e),m=this.isItemHovered(e),p=this.isItemFocused(e),l=i.renderer;l.set("hovered",m);l.set("selected",j);l.set("edited",k);l.set("focused",this.showFocus?
p:!1);l.set("moveEnabled",this.isItemMoveEnabled(e,"vertical"));l.set("resizeEnabled",this.isItemResizeEnabled(e,"vertical"));this.applyRendererZIndex(e,i,m,j,k,p);l.updateRendering&&l.updateRendering(f,e.end-e.start+1);o.place(i.container,b);n.set(i.container,"display","block")}}},_getCellAt:function(a,b,c){if((void 0==c||!0==c)&&!this.isLeftToRight())b=this.renderData.columnCount-1-b;return this.gridTable.childNodes[0].childNodes[a].childNodes[b]},invalidateLayout:function(){m("td",this.gridTable).forEach(function(a){j.remove(a,
"dojoxCalendarHiddenEvents")});this.inherited(arguments)},_layoutBgItems:function(a,b,c,d,f){for(var h={},g=0;g<f.length;g++){var e=f[g],i=this.computeRangeOverlap(a,e.startTime,e.endTime,c,d),e=i[0].getDate()-1;this.isStartOfDay(i[1])?(i=this._waDojoxAddIssue(i[1],"day",-1),i=i.getDate()-1):i=i[1].getDate()-1;for(;e<=i;e++)h[e]=!0}for(var k in h)h[k]&&(a=this._getCellAt(k,b,!1),j.add(a,"dojoxCalendarHiddenEvents"))},_sortItemsFunction:function(a,b){var c=this.dateModule.compare(a.startTime,b.startTime);
0==c&&(c=-1*this.dateModule.compare(a.endTime,b.endTime));return this.isLeftToRight()?c:-c},getTime:function(a,b,c,d){null!=a&&(c=s.position(this.itemContainer,!0),a.touches?(d=void 0==d?0:d,b=a.touches[d].pageX-c.x,c=a.touches[d].pageY-c.y):(b=a.pageX-c.x,c=a.pageY-c.y));a=s.getContentBox(this.itemContainer);this.isLeftToRight()||(b=a.w-b);0>b?b=0:b>a.w&&(b=a.w-1);0>c?c=0:c>a.h&&(c=a.h-1);b=Math.floor(b/(a.w/this.renderData.columnCount));c=Math.floor(c/(a.h/this.renderData.maxDayCount));a=null;b<
this.renderData.dates.length&&c<this.renderData.dates[b].length&&(a=this.newDate(this.renderData.dates[b][c]));return a},_onGridMouseUp:function(a){this.inherited(arguments);if(this._gridMouseDown)this._gridMouseDown=!1,this._onGridClick({date:this.getTime(a),triggerEvent:a})},_onGridTouchStart:function(a){this.inherited(arguments);var b=this._gridProps;b.moved=!1;b.start=a.touches[0].screenY;b.scrollTop=this.scrollContainer.scrollTop},_onGridTouchMove:function(a){this.inherited(arguments);if(1<a.touches.length&&
!this._isEditing)p.stop(a);else if(this._gridProps&&!this._isEditing){var b=a.touches[0].screenX,c=a.touches[0].screenY,d=this._edProps;if(!d||d&&(25<Math.abs(b-d.start.x)||25<Math.abs(c-d.start.y)))this._gridProps.moved=!0,b=this._gridProps.scrollTop-(a.touches[0].screenY-this._gridProps.start),c=this.itemContainer.offsetHeight-this.scrollContainer.offsetHeight,0>b?(this._gridProps.start=a.touches[0].screenY,this._setScrollImpl(0),this._gridProps.scrollTop=0):b>c?(this._gridProps.start=a.touches[0].screenY,
this._setScrollImpl(c),this._gridProps.scrollTop=c):this._setScrollImpl(b)}},_onGridTouchEnd:function(a){this.inherited(arguments);var b=this._gridProps;if(b){if(!this._isEditing&&!b.moved&&(!b.fromItem&&!b.editingOnStart&&this.selectFromEvent(a,null,null,!0),!b.fromItem))this._pendingDoubleTap&&this._pendingDoubleTap.grid?(this._onGridDoubleClick({date:this.getTime(this._gridProps.event),triggerEvent:this._gridProps.event}),clearTimeout(this._pendingDoubleTap.timer),delete this._pendingDoubleTap):
(this._onGridClick({date:this.getTime(this._gridProps.event),triggerEvent:this._gridProps.event}),this._pendingDoubleTap={grid:!0,timer:setTimeout(q.hitch(this,function(){delete this._pendingDoubleTap}),this.doubleTapDelay)});this._gridProps=null}},_onColumnHeaderClick:function(a){this._dispatchCalendarEvt(a,"onColumnHeaderClick")},onColumnHeaderClick:function(){},_onScrollTimer_tick:function(){this._setScrollImpl(this.scrollContainer.scrollTop+this._scrollProps.scrollStep)},snapUnit:"day",snapSteps:1,
minDurationUnit:"day",minDurationSteps:1,liveLayout:!1,stayInView:!0,allowStartEndSwap:!0,allowResizeLessThan24H:!1})});