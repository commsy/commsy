//>>built
define("dojox/fx/flip","dojo/_base/kernel,dojo/_base/html,dojo/dom,dojo/dom-construct,dojo/dom-geometry,dojo/_base/connect,dojo/_base/Color,dojo/_base/sniff,dojo/_base/lang,dojo/_base/window,dojo/_base/fx,dojo/fx,./_base".split(","),function(C,m,D,w,E,x,F,G,y,A,B,z,o){C.experimental("dojox.fx.flip");o.flip=function(c){var l=w.create("div"),d=c.node=D.byId(c.node),g=d.style,b=null,j=null,a=null,p=c.lightColor||"#dddddd",t=c.darkColor||"#555555",q=m.style(d,"backgroundColor"),r=c.endColor||q,n={},k=
[],h=c.duration?c.duration/2:250,a=c.dir||"left",i=0.9,j="transparent",u=c.whichAnim,s=c.axis||"center",i=c.depth,e=function(a){return"#000000"===(new F(a)).toHex()?"#000001":a};if(7>G("ie"))r=e(r),p=e(p),t=e(t),q=e(q),j="black",l.style.filter="chroma(color='#000000')";(function(a){return function(){var c=m.coords(a,!0);b={top:c.y,left:c.x,width:c.w,height:c.h}}})(d)();j={position:"absolute",top:b.top+"px",left:b.left+"px",height:"0",width:"0",zIndex:c.zIndex||g.zIndex||0,border:"0 solid "+j,fontSize:"0",
visibility:"hidden"};d=[{},{top:b.top,left:b.left}];a={left:"Left,Right,Top,Bottom,Width,Height,endHeightMin,Left,endHeightMax".split(","),right:"Right,Left,Top,Bottom,Width,Height,endHeightMin,Left,endHeightMax".split(","),top:"Top,Bottom,Left,Right,Height,Width,endWidthMin,Top,endWidthMax".split(","),bottom:"Bottom,Top,Left,Right,Height,Width,endWidthMin,Top,endWidthMax".split(",")}[a];"undefined"!=typeof i?(i=Math.max(0,Math.min(1,i))/2,i=0.4+(0.5-i)):i=Math.min(0.9,Math.max(0.4,b[a[5].toLowerCase()]/
b[a[4].toLowerCase()]));for(var e=d[0],f=4;6>f;f++)"center"==s||"cube"==s?(b["end"+a[f]+"Min"]=b[a[f].toLowerCase()]*i,b["end"+a[f]+"Max"]=b[a[f].toLowerCase()]/i):"shortside"==s?(b["end"+a[f]+"Min"]=b[a[f].toLowerCase()],b["end"+a[f]+"Max"]=b[a[f].toLowerCase()]/i):"longside"==s&&(b["end"+a[f]+"Min"]=b[a[f].toLowerCase()]*i,b["end"+a[f]+"Max"]=b[a[f].toLowerCase()]);"center"==s?e[a[2].toLowerCase()]=b[a[2].toLowerCase()]-(b[a[8]]-b[a[6]])/4:"shortside"==s&&(e[a[2].toLowerCase()]=b[a[2].toLowerCase()]-
(b[a[8]]-b[a[6]])/2);n[a[5].toLowerCase()]=b[a[5].toLowerCase()]+"px";n[a[4].toLowerCase()]="0";n["border"+a[1]+"Width"]=b[a[4].toLowerCase()]+"px";n["border"+a[1]+"Color"]=q;e["border"+a[1]+"Width"]=0;e["border"+a[1]+"Color"]=t;e["border"+a[2]+"Width"]=e["border"+a[3]+"Width"]="cube"!=s?(b["end"+a[5]+"Max"]-b["end"+a[5]+"Min"])/2:b[a[6]]/2;e[a[7].toLowerCase()]=b[a[7].toLowerCase()]+b[a[4].toLowerCase()]/2+(c.shift||0);e[a[5].toLowerCase()]=b[a[6]];c=d[1];c["border"+a[0]+"Color"]={start:p,end:r};
c["border"+a[0]+"Width"]=b[a[4].toLowerCase()];c["border"+a[2]+"Width"]=0;c["border"+a[3]+"Width"]=0;c[a[5].toLowerCase()]={start:b[a[6]],end:b[a[5].toLowerCase()]};y.mixin(j,n);m.style(l,j);A.body().appendChild(l);p=function(){w.destroy(l);g.backgroundColor=r;g.visibility="visible"};if("last"==u){for(f in e)e[f]={start:e[f]};e["border"+a[1]+"Color"]={start:t,end:r};c=e}(!u||"first"==u)&&k.push(B.animateProperty({node:l,duration:h,properties:e}));(!u||"last"==u)&&k.push(B.animateProperty({node:l,
duration:h,properties:c,onEnd:p}));x.connect(k[0],"play",function(){l.style.visibility="visible";g.visibility="hidden"});return z.chain(k)};o.flipCube=function(c){var l=[],d=E.getMarginBox(c.node),g=d.w/2,d=d.h/2,g={top:{pName:"height",args:[{whichAnim:"first",dir:"top",shift:-d},{whichAnim:"last",dir:"bottom",shift:d}]},right:{pName:"width",args:[{whichAnim:"first",dir:"right",shift:g},{whichAnim:"last",dir:"left",shift:-g}]},bottom:{pName:"height",args:[{whichAnim:"first",dir:"bottom",shift:d},
{whichAnim:"last",dir:"top",shift:-d}]},left:{pName:"width",args:[{whichAnim:"first",dir:"left",shift:-g},{whichAnim:"last",dir:"right",shift:g}]}}[c.dir||"left"].args;c.duration=c.duration?2*c.duration:500;c.depth=0.8;c.axis="cube";for(d=g.length-1;0<=d;d--)y.mixin(c,g[d]),l.push(o.flip(c));return z.combine(l)};o.flipPage=function(c){var l=c.node,d=m.coords(l,!0),g=d.x,b=d.y,j=d.w,a=d.h,p=m.style(l,"backgroundColor"),t=c.lightColor||"#dddddd",q=c.darkColor,r=w.create("div"),n=[],k=[],h=c.dir||"right",
i={left:["left","right","x","w"],top:["top","bottom","y","h"],right:["left","left","x","w"],bottom:["top","top","y","h"]},u={right:[1,-1],left:[-1,1],top:[-1,1],bottom:[1,-1]};m.style(r,{position:"absolute",width:j+"px",height:a+"px",top:b+"px",left:g+"px",visibility:"hidden"});g=[];for(b=0;2>b;b++){var a=(j=b%2)?i[h][1]:h,s=j?"last":"first",e=j?p:t,f=j?e:c.startColor||l.style.backgroundColor;k[b]=y.clone(r);var v=function(a){return function(){w.destroy(k[a])}}(b);A.body().appendChild(k[b]);g[b]=
{backgroundColor:j?f:p};g[b][i[h][0]]=d[i[h][2]]+u[h][0]*b*d[i[h][3]]+"px";m.style(k[b],g[b]);n.push(dojox.fx.flip({node:k[b],dir:a,axis:"shortside",depth:c.depth,duration:c.duration/2,shift:u[h][b]*d[i[h][3]]/2,darkColor:q,lightColor:t,whichAnim:s,endColor:e}));x.connect(n[b],"onEnd",v)}return z.chain(n)};o.flipGrid=function(c){var l=c.rows||4,d=c.cols||4,g=[],b=w.create("div"),j=c.node,a=m.coords(j,!0),p=a.x,t=a.y,q=a.w,r=a.h,n=a.w/d,k=a.h/l,a=[];m.style(b,{position:"absolute",width:n+"px",height:k+
"px",backgroundColor:m.style(j,"backgroundColor")});for(var h=0;h<l;h++){var i=h%2,u=i?"right":"left",s=i?1:-1,e=y.clone(j);m.style(e,{position:"absolute",width:q+"px",height:r+"px",top:t+"px",left:p+"px",clip:"rect("+h*k+"px,"+q+"px,"+r+"px,0)"});A.body().appendChild(e);g[h]=[];for(var f=0;f<d;f++){var v=y.clone(b),o=i?f:d-(f+1),B=function(a,b,c){return function(){b%2?m.style(a,{clip:"rect("+b*k+"px,"+q+"px,"+(b+1)*k+"px,"+(c+1)*n+"px)"}):m.style(a,{clip:"rect("+b*k+"px,"+(q-(c+1)*n)+"px,"+(b+1)*
k+"px,0px)"})}}(e,h,f);A.body().appendChild(v);m.style(v,{left:p+o*n+"px",top:t+h*k+"px",visibility:"hidden"});o=dojox.fx.flipPage({node:v,dir:u,duration:c.duration||900,shift:s*n/2,depth:0.2,darkColor:c.darkColor,lightColor:c.lightColor,startColor:c.startColor||c.node.style.backgroundColor});v=function(a){return function(){w.destroy(a)}}(v);x.connect(o,"play",this,B);x.connect(o,"play",this,v);g[h].push(o)}a.push(z.chain(g[h]))}x.connect(a[0],"play",function(){m.style(j,{visibility:"hidden"})});
return z.combine(a)};return o});