//>>built
define("dojox/gfx/fx","dojo/_base/lang,./_base,./matrix,dojo/_base/Color,dojo/_base/array,dojo/_base/fx,dojo/_base/connect".split(","),function(x,m,i,n,q,j,k){function o(a,b){this.start=a;this.end=b}function r(a,b,d){this.start=a;this.end=b;this.units=d}function s(a,b){this.start=a;this.end=b;this.temp=new n}function g(a){this.values=a;this.length=a.length}function p(a,b){this.values=a;this.def=b?b:{}}function t(a,b){this.stack=a;this.original=b}function u(a,b,d,e){if(a.values)return new g(a.values);
var c,v;v=a.start?m.normalizeColor(a.start):c=b?d?b[d]:b:e;a.end?a=m.normalizeColor(a.end):(c||(c=b?d?b[d]:b:e),a=c);return new s(v,a)}var l=m.fx={};o.prototype.getValue=function(a){return(this.end-this.start)*a+this.start};r.prototype.getValue=function(a){return(this.end-this.start)*a+this.start+this.units};s.prototype.getValue=function(a){return n.blendColors(this.start,this.end,a,this.temp)};g.prototype.getValue=function(a){return this.values[Math.min(Math.floor(a*this.length),this.length-1)]};
p.prototype.getValue=function(a){var b=x.clone(this.def),d;for(d in this.values)b[d]=this.values[d].getValue(a);return b};t.prototype.getValue=function(a){var b=[];q.forEach(this.stack,function(d){if(d instanceof i.Matrix2D)b.push(d);else if("original"==d.name&&this.original)b.push(this.original);else if("matrix"==d.name){if(d.start instanceof i.Matrix2D&&d.end instanceof i.Matrix2D){var e=new i.Matrix2D,c;for(c in d.start)e[c]=(d.end[c]-d.start[c])*a+d.start[c];b.push(e)}}else d.name in i&&(e=i[d.name],
"function"!=typeof e?b.push(e):(c=q.map(d.start,function(c,b){return(d.end[b]-c)*a+c}),e=e.apply(i,c),e instanceof i.Matrix2D&&b.push(e)))},this);return b};var w=new n(0,0,0,0);l.animateStroke=function(a){if(!a.easing)a.easing=j._defaultEasing;var b=new j.Animation(a),d=a.shape,e;k.connect(b,"beforeBegin",b,function(){e=d.getStroke();var c=a.color,b={},f;if(c)b.color=u(c,e,"color",w);if((c=a.style)&&c.values)b.style=new g(c.values);if(c=a.width){var h=c;h.values?f=new g(h.values):(c=h.start?h.start:
f=e?e.width:1,h.end?f=h.end:"number"!=typeof f&&(f=e?e.width:1),f=new o(c,f));b.width=f}if((c=a.cap)&&c.values)b.cap=new g(c.values);if(c=a.join)if(c.values)b.join=new g(c.values);else if(f=c.start?c.start:e&&e.join||0,c=c.end?c.end:e&&e.join||0,"number"==typeof f&&"number"==typeof c)b.join=new o(f,c);this.curve=new p(b,e)});k.connect(b,"onAnimate",d,"setStroke");return b};l.animateFill=function(a){if(!a.easing)a.easing=j._defaultEasing;var b=new j.Animation(a),d=a.shape,e;k.connect(b,"beforeBegin",
b,function(){e=d.getFill();var c=a.color;if(c)this.curve=u(c,e,"",w)});k.connect(b,"onAnimate",d,"setFill");return b};l.animateFont=function(a){if(!a.easing)a.easing=j._defaultEasing;var b=new j.Animation(a),d=a.shape,e;k.connect(b,"beforeBegin",b,function(){e=d.getFont();var c=a.style,b={},f,h;if(c&&c.values)b.style=new g(c.values);if((c=a.variant)&&c.values)b.variant=new g(c.values);if((c=a.weight)&&c.values)b.weight=new g(c.values);if((c=a.family)&&c.values)b.family=new g(c.values);if((c=a.size)&&
c.units)f=parseFloat(c.start?c.start:d.font&&d.font.size||"0"),h=parseFloat(c.end?c.end:d.font&&d.font.size||"0"),b.size=new r(f,h,c.units);this.curve=new p(b,e)});k.connect(b,"onAnimate",d,"setFont");return b};l.animateTransform=function(a){if(!a.easing)a.easing=j._defaultEasing;var b=new j.Animation(a),d=a.shape,e;k.connect(b,"beforeBegin",b,function(){e=d.getTransform();this.curve=new t(a.transform,e)});k.connect(b,"onAnimate",d,"setTransform");return b};return l});