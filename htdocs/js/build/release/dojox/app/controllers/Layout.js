//>>built
define("dojox/app/controllers/Layout","dojo/_base/lang,dojo/_base/declare,dojo/sniff,dojo/on,dojo/_base/window,dojo/_base/array,dojo/query,dojo/dom-style,dojo/dom-attr,dojo/dom-geometry,dijit/registry,../Controller,../layout/utils".split(","),function(i,j,k,r,l,m,n,d,f,g,o,p,q){return j("dojox.app.controllers.Layout",p,{constructor:function(b,a){this.events={layout:this.layout,select:this.select};this.inherited(arguments);this.bind(l.global,k("ios")?"orientationchange":"resize",i.hitch(this,this.onResize))},
onResize:function(){this._doResize(this.app)},layout:function(b){this._doResize(b.view,b.changeSize||null,b.resultSize||null)},_doLayout:function(b){if(b){var a;b.selectedChild&&b.selectedChild.isFullScreen?console.warn("fullscreen sceen layout"):(a=n("> [data-app-region], > [region]",b.domNode).map(function(b){var a=o.getEnclosingWidget(b);return a?(a.region=f.get(b,"data-app-region")||f.get(b,"region"),a):{domNode:b,region:f.get(b,"data-app-region")||f.get(b,"region")}}),b.selectedChild&&(a=m.filter(a,
function(a){if("center"==a.region&&b.selectedChild&&b.selectedChild.domNode!==a.domNode)return d.set(a.domNode,"zIndex",25),d.set(a.domNode,"display","none"),!1;"center"!=a.region&&(d.set(a.domNode,"display",""),d.set(a.domNode,"zIndex",100));return a.domNode&&a.region},b)));b._contentBox&&q.layoutChildren(b.domNode,b._contentBox,a)}else console.warn("layout empty view.")},_doResize:function(b,a,c){var e=b.domNode;if(a){g.setMarginBox(e,a);if(a.t)e.style.top=a.t+"px";if(a.l)e.style.left=a.l+"px"}c=
c||{};i.mixin(c,a||{});if(!("h"in c)||!("w"in c))c=i.mixin(g.getMarginBox(e),c);var a=d.getComputedStyle(e),h=g.getMarginExtents(e,a),f=g.getBorderExtents(e,a),c=b._borderBox={w:c.w-(h.w+f.w),h:c.h-(h.h+f.h)},h=g.getPadExtents(e,a);b._contentBox={l:d.toPixelValue(e,a.paddingLeft),t:d.toPixelValue(e,a.paddingTop),w:c.w-h.w,h:c.h-h.h};this._doLayout(b);b.selectedChild&&this._doResize(b.selectedChild)},select:function(b){var a=b.parent||this.app;if(b=b.view){if(b!==a.selectedChild)a.selectedChild&&d.set(a.selectedChild.domNode,
"zIndex",25),d.set(b.domNode,"display",""),d.set(b.domNode,"zIndex",50),a.selectedChild=b;this._doResize(a)}}})});