//>>built
define("dojo/html","./_base/kernel,./_base/lang,./_base/array,./_base/declare,./dom,./dom-construct,./parser".split(","),function(h,e,g,i,j,f,k){var c={};e.setObject("dojo.html",c);var l=0;c._secureForInnerHtml=function(a){return a.replace(/(?:\s*<!DOCTYPE\s[^>]+>|<title[^>]*>[\s\S]*?<\/title>)/ig,"")};c._emptyNode=f.empty;c._setNodeContent=function(a,b){f.empty(a);if(b)if("string"==typeof b&&(b=f.toDom(b,a.ownerDocument)),!b.nodeType&&e.isArrayLike(b))for(var d=b.length,c=0;c<b.length;c=d==b.length?
c+1:0)f.place(b[c],a,"last");else f.place(b,a,"last");return a};c._ContentSetter=i("dojo.html._ContentSetter",null,{node:"",content:"",id:"",cleanContent:!1,extractContent:!1,parseContent:!1,parserScope:h._scopeName,startup:!0,constructor:function(a,b){e.mixin(this,a||{});b=this.node=j.byId(this.node||b);if(!this.id)this.id=["Setter",b?b.id||b.tagName:"",l++].join("_")},set:function(a,b){if(void 0!==a)this.content=a;b&&this._mixin(b);this.onBegin();this.setContent();var d=this.onEnd();return d&&d.then?
d:this.node},setContent:function(){var a=this.node;if(!a)throw Error(this.declaredClass+": setContent given no node");try{a=c._setNodeContent(a,this.content)}catch(b){var d=this.onContentError(b);try{a.innerHTML=d}catch(e){console.error("Fatal "+this.declaredClass+".setContent could not change content due to "+e.message,e)}}this.node=a},empty:function(){this.parseDeferred&&(this.parseDeferred.isResolved()||this.parseDeferred.cancel(),delete this.parseDeferred);this.parseResults&&this.parseResults.length&&
(g.forEach(this.parseResults,function(a){a.destroy&&a.destroy()}),delete this.parseResults);c._emptyNode(this.node)},onBegin:function(){var a=this.content;if(e.isString(a)&&(this.cleanContent&&(a=c._secureForInnerHtml(a)),this.extractContent)){var b=a.match(/<body[^>]*>\s*([\s\S]+)\s*<\/body>/im);b&&(a=b[1])}this.empty();this.content=a;return this.node},onEnd:function(){this.parseContent&&this._parse();return this.node},tearDown:function(){delete this.parseResults;delete this.parseDeferred;delete this.node;
delete this.content},onContentError:function(a){return"Error occurred setting content: "+a},onExecError:function(a){return"Error occurred executing scripts: "+a},_mixin:function(a){var b={},d;for(d in a)d in b||(this[d]=a[d])},_parse:function(){var a=this.node;try{var b={};g.forEach(["dir","lang","textDir"],function(a){this[a]&&(b[a]=this[a])},this);var d=this;this.parseDeferred=k.parse({rootNode:a,noStart:!this.startup,inherited:b,scope:this.parserScope}).then(function(a){return d.parseResults=a})}catch(c){this._onError("Content",
c,"Error parsing in _ContentSetter#"+this.id)}},_onError:function(a,b,d){a=this["on"+a+"Error"].call(this,b);d?console.error(d,b):a&&c._setNodeContent(this.node,a,!0)}});c.set=function(a,b,d){void 0==b&&(console.warn("dojo.html.set: no cont argument provided, using empty string"),b="");return d?(new c._ContentSetter(e.mixin(d,{content:b,node:a}))).set():c._setNodeContent(a,b,!0)};return c});