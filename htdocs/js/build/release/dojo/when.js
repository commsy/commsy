//>>built
define("dojo/when",["./Deferred","./promise/Promise"],function(d,g){return function(a,c,e,f){var b=a&&"function"===typeof a.then,h=b&&a instanceof g;if(b){if(!h)b=new d(a.cancel),a.then(b.resolve,b.reject,b.progress),a=b.promise}else return c?c(a):(new d).resolve(a);return c||e||f?a.then(c,e,f):a}});