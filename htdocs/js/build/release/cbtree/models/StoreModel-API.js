//>>built
define("cbtree/models/StoreModel-API",["dojo/_base/array","dojo/_base/lang","dojo/has","./TreeStoreModel"],function(h,e,i,j){i.add("cbtree-storeModel-API",!0);e.extend(j,{_checkOrUncheck:function(a,c,b,d,f){var e=0,g=0;this.fetchItemsWithChecked(a,function(a){h.forEach(a,function(a){this.store.getValue(a,this.checkedAttr)!=c&&(this._ItemCheckedSetter(a,c),g+=1);e+=1},this);b&&b.call(d?d:this,e,g)},this,f)},_ItemCheckedGetter:function(a){return this.getChecked(a)},_ItemCheckedSetter:function(a,c){this.setChecked(a,
c)},_ItemIdentityGetter:function(a){if(this.store.isItem(a))return this.store.getIdentity(a);if(a===this.root)return this.root.id;throw new TypeError(this.moduleName+"::getIdentity(): invalid item specified.");},_ItemIdentitySetter:function(){throw Error(this.moduleName+"::setItemAttr(): Identity attribute cannot be changed");},_ItemLabelGetter:function(a){return a!==this.root?this.labelAttr?this.store.getValue(a,this.labelAttr):this.store.getLabel(a):this.root.label},_ItemLabelSetter:function(a,
c){var b=this.get("labelAttr");if(b){if(b!=this.store.getIdentifierAttr())return this.store.setValue(a,b,c);throw Error(this.moduleName+"::setItemAttr(): Label attribute {"+b+"} cannot be changed");}},_ItemParentsGetter:function(a){return this.getParents(a)},getItemAttr:function(a,c){var b=c==this.checkedAttr?"checked":c;if(this.isItem(a)||a===this.root){var d=this._getFuncNames("Item",b);return e.isFunction(this[d.get])?this[d.get](a):a===this.root&&this.hasFakeRoot?this.root[b]:this.store.getValue(a,
b)}throw Error(this.moduleName+"::getItemAttr(): argument is not a valid store item.");},setItemAttr:function(a,c,b){if(this._writeEnabled){c=c==this.checkedAttr?"checked":c;if(this.isItem(a)){var d=this._getFuncNames("Item",c);return e.isFunction(this[d.set])?this[d.set](a,b):this.store.setValue(a,c,b)}throw Error(this.moduleName+"::setItemAttr(): argument is not a valid store item.");}throw Error(this.moduleName+"::setItemAttr(): store is not write enabled.");},fetchItem:function(a,c){var b=this.store.getIdentifierAttr(),
d=this._anyToQuery(a,c);if(d)return d[b]!=this.root.id?this.store.itemExist(d):this.root},fetchItemsWithChecked:function(a,c,b,d){var a=this._anyToQuery(a,null),f=[],d=void 0!==d?d:!0,b=b||this;if(e.isObject(a))this.store.fetch({query:a,queryOptions:{deep:!0,storeOnly:d},onItem:function(a){this.store.hasAttribute(a,this.checkedAttr)?f.push(a):this.checkedAll&&(this.setChecked(a,this.checkedState),f.push(a))},onComplete:function(){c&&c.call(b,f)},onError:this.onError,scope:this});else throw Error(this.moduleName+
"::fetchItemsWithChecked(): query must be of type object.");},isRootItem:function(a){return a!==this.root?this.store.isRootItem(a):!0},addReference:function(a,c,b){this.store.addReference(a,c,b||this.childrenAttrs[0])&&this._updateCheckedParent(a)},attachToRoot:function(a){a!==this.root&&this.store.attachToRoot(a)},check:function(a,c,b,d){this.checkedStrict&&(d=!0);this._checkOrUncheck(a,!0,c,b,d)},detachFromRoot:function(a){a!==this.root&&this.store.detachFromRoot(a)},newReferenceItem:function(a,
c,b){(a=this.newItem(a,c,b))&&this.store.attachToRoot(a);return a},removeReference:function(a,c,b){this.store.removeReference(a,c,b||this.childrenAttrs[0])&&this.getChildren(c,e.hitch(this,function(a){a.length&&this._updateCheckedParent(a[0])}))},uncheck:function(a,c,b,d){this.checkedStrict&&(d=!0);this._checkOrUncheck(a,!1,c,b,d)},_anyToQuery:function(a,c){var b=this.store.getIdentifierAttr();if(b){var d=c?c:b,f={};if(e.isString(a))return f[b]=a,f;if(e.isObject(a))return e.mixin(f,a),a[d]&&(f[b]=
a[d]),f}return null},_getFuncNames:function(a,c){if(e.isString(c)){var b=c.replace(/^[a-z]|-[a-zA-Z]/g,function(a){return a.charAt(a.length-1).toUpperCase()});return{set:"_"+a+b+"Setter",get:"_"+a+b+"Getter"}}throw Error(this.moduleName+"::_getFuncNames(): get"+a+"/set"+a+" attribute name must be of type string.");}})});