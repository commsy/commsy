//>>built
define("cbtree/TreeStyling","dojo/_base/array,dojo/_base/connect,dojo/_base/lang,dojo/dom-class,dojo/dom-prop,dojo/dom-style,dojo/has,dijit/Tree".split(","),function(h,o,f,j,k,m,n,l){n.add("cbtree-treeStyling-API",!0);f.extend(l._TreeNode,{_applyClassAndStyle:function(a,b){var c,d,e,i,g,f;i=b+"Class";g=b+"Style";f=b+"Node";c=k.get(this[f],"className");d=this.tree.get(i,this.item,this.isExpanded,this)||c;c!==d&&(j.replace(this[f],d,c||""),this[i]=d);a:{c=this[g];for(e in c)if(c.hasOwnProperty(e)){e=
!1;break a}e=!0}e=e?this.tree.get(g,this.item,this.isExpanded)||{}:this[g];m.set(this[f],e);this[g]=e},_set_icon_Attr:function(a){if(a.iconClass)this._set_iconClass_Attr(a.iconClass),this.icon=a},_set_iconClass_Attr:function(a){a&&a!==this.iconClass&&(j.replace(this.iconNode,a,this.iconClass||""),this._applyClassAndStyle(this.item,"icon"))},_set_styling_Attr:function(){this._updateItemClasses(this.item)},_setIconStyleAttr:function(a){this.iconStyle=a;this._applyClassAndStyle(this.item,"icon")},_setLabelStyleAttr:function(a){this.labelStyle=
a;this._applyClassAndStyle(this.item,"label")},_setRowStyleAttr:function(a){this.rowStyle=a;this._applyClassAndStyle(this.item,"row")}});f.extend(l,{_hasStyling:!0,_icon:null,_iconAttr:null,_itemStyleMap:{},_itemAttr:["icon","label","row"],_typeAttr:["Class","Style"],_dijitIconClasses:["dijitFolderOpened","dijitFolderClosed","dijitLeaf"],iconClass:"",_getBaseClass:function(a){var a=a?k.get(a.iconNode,"className"):"",b,c;b="";a=f.trim(a).split(/\s+/);if(a[0]){for(c=0;c<this._dijitIconClasses.length;c++)b=
h.indexOf(a,this._dijitIconClasses[c]),-1!=b&&a.splice(b,1);b=a.toString()}return b.replace(/,/g," ")},_getClassOrStyle:function(a,b,c){if(-1!=h.indexOf(this._itemAttr,b)&&-1!=h.indexOf(this._typeAttr,c))return this._getItemStyling(a)[b][b+c];throw new TypeError(this.declaredClass+"::_getClassOrStyle(): invalid attribute type specified.");},_getHasTreeSytlingAttr:function(){return this._hasStyling},_getItemStyling:function(a){this._connected||this._connectModel();if(this.model.isItem(a)){var a=this.model.getIdentity(a),
b=this._itemStyleMap[a];if(!b){b=this._getTreeStyling();if(this._icon)b.icon=this._icon;this._itemStyleMap[a]=b}return b}throw new TypeError(this.declaredClass+"::getItemStyling(): invalid data item specified.");},_getTreeStyling:function(){var a={};if(this.rootNode){var b=this._itemStyleMap[this.model.getIdentity(this.rootNode.item)];b&&(a=f.clone(b))}else h.forEach(this._itemAttr,function(b){a[b]=this._initStyleElement(b)},this),a.root=!0;return a},_initStyleElement:function(a){var b={};h.forEach(this._typeAttr,
function(c){b[a+c]=null},this);return b},_setAllItems:function(a,b,c,d){var a=a?f.isArray(a)?a:this._object2Array(a):[],e;a.unshift(null);for(e in this._itemStyleMap)a[0]=this._itemStyleMap[e],b.apply(d||this,Array.prototype.slice.call(a,0));c&&c.apply(d||this,Array.prototype.slice.call(a,1))},_setAttrClass:function(a,b,c,d){if(f.isString(c)){if(-1!=h.indexOf(this._itemAttr,b)){var e=f.trim(c).split(/\s+/);if(e[0]){if(a){var i=this._getItemStyling(a);i[b][b+"Class"]=c;i[b].baseClass=e[0];delete i.root;
d&&d.call(this,a,b,c,e[0]);return i[b]}this._setAllItems([b,c,e[0]],function(a,b,c,d){a[b][b+"Class"]=c;a[b].baseClass=d;delete a.root},d,this)}return null}throw new TypeError(this.declaredClass+"::setItemClass(): invalid attribute specified.");}throw new TypeError(this.declaredClass+"::setItemClass(): invalid argument type specified.");},_setAttrClassSet:function(a,b,c){a?this._setAttrClass(a,b,c,function(a,b,c){this._setStyling(a,"_styling_",c)}):this._setAttrClass(null,b,c,function(a,b){this._setTreeNodes(this.rootNode,
{_styling_:b})})},_setAttrStyle:function(a,b,c,d){if(f.isObject(c)){if(-1!=h.indexOf(this._itemAttr,b)){if(a){var e=this._getItemStyling(a);e[b][b+"Style"]=c;d&&d.call(this,a,b,c);return e[b]}this._setAllItems([b,c],function(a,b,c){a[b][b+"Style"]=c},d,this);return null}throw new TypeError(this.declaredClass+"::setItemStyle(): invalid attribute specified.");}throw new TypeError(this.declaredClass+"::setItemStyle(): invalid argument type specified.");},_setAttrStyleSet:function(a,b,c){var d={};a?this._setAttrStyle(a,
b,c,function(a,b,c){this._setStyling(a,b+"Style",c)}):this._setAttrStyle(null,b,c,function(a,b){d[a+"Style"]=b;this._setTreeNodes(this.rootNode,d)})},_setStyling:function(a,b,c){var a=this._itemNodesMap[this.model.getIdentity(a)],d={};a&&(d[b]=c,h.forEach(a,function(a){a.set(d)},this))},_getIconAttr:function(a){var b=this._getItemStyling(a);if(b.root&&this._iconAttr){if(b=this.model.getIcon(a))return b=this._setIconAttr(b,a)}else return b.icon},_getIconClassAttr:function(a,b,c){return this.getIconClass(a,
b,c)},_getIconStyleAttr:function(a,b){return this.getIconStyle(a,b)},_getLabelClassAttr:function(a,b,c){return this.getLabelClass(a,b,c)},_getLabelStyleAttr:function(a,b){return this.getLabelStyle(a,b)},_getRowClassAttr:function(a,b,c){return this.getRowClass(a,b,c)},_getRowStyleAttr:function(a,b){return this.getRowStyle(a,b)},_setIconAttr:function(a,b){var c=this._icon2Object(a);if(c)if(b){var d=this._getItemStyling(b);d.icon=c;delete d.root;this._setStyling(b,"_icon_",c)}else this._setAllItems([c],
function(a,b){a.icon=b;delete a.root},function(a){this._setTreeNodes(this.rootNode,{_icon_:a})},this),this._icon=c;return c},_setIconClassAttr:function(a,b){return this._setAttrClassSet(b,"icon",a)},_setIconStyleAttr:function(a,b){return this._setAttrStyleSet(b,"icon",a)},_setLabelClassAttr:function(a,b){return this._setAttrClassSet(b,"label",a)},_setLabelStyleAttr:function(a,b){return this._setAttrStyleSet(b,"label",a)},_setRowClassAttr:function(a,b){return this._setAttrClassSet(b,"row",a)},_setRowStyleAttr:function(a,
b){return this._setAttrStyleSet(b,"row",a)},_modelIconUpdate:function(a,b,c){a=this._getItemStyling(a);if(c=this._icon2Object(c))a.icon=c,delete a.root;return c},getIconClass:function(a,b,c){var d,e=a,f,g;if(!e&&this.rootNode)e=this.rootNode.item,c=this.rootNode,b=this.rootNode.isExpanded;a=e?this.model.mayHaveChildren(e):!1;d=this._getItemStyling(e).icon;if(!d||!d.iconClass)return b=!e||a?b?"dijitFolderOpened":"dijitFolderClosed":"dijitLeaf",(f=this._getBaseClass(c))?f+" "+b:b;e=d.iconClass;f=d.baseClass;
g=d.indent;if(d.fixed)e+=" "+d.fixed;else if(c){b=f+(a?b?"Expanded":"Collapsed":"Terminal");if(void 0!==g&&!1!==g&&(!0===g||g>=c.indent))b+=" "+b+"_"+c.indent;e+=" "+b}return e},getIconStyle:function(a){return this._getClassOrStyle(a,"icon","Style")},getLabelClass:function(a){return this._getClassOrStyle(a,"label","Class")},getLabelStyle:function(a){return this._getClassOrStyle(a,"label","Style")},getRowClass:function(a){return this._getClassOrStyle(a,"row","Class")},getRowStyle:function(a){return this._getClassOrStyle(a,
"row","Style")},get:function(a){var b=this[this._getAttrNames(a).g];return"function"===typeof b?b.apply(this,Array.prototype.slice.call(arguments,1)):this[a]},_connectModel:function(){var a=this.model;this._itemStyleMap={};this._connected=!0;if(a){if(a.iconAttr)!a.getIcon||!f.isFunction(a.getIcon)?(console.warn("cbtree/TreeStyling::_connectModel(): model has 'iconAttr' set but does not provide support for getIcon()."),this._iconAttr=null):this._iconAttr=this.model.iconAttr;this.mapEventToAttr&&f.isFunction(this.mapEventToAttr)&&
this.mapEventToAttr(null,this._iconAttr,"_icon_",this._modelIconUpdate);this.connect(this.model,"onDelete","_onStyleDelete")}},_icon2Object:function(a){var b,c,d;if(a){if(f.isObject(a)){if(a.iconClass&&(c=f.trim(a.iconClass).split(/\s+/),c[0])){d=this._initStyleElement("icon");d.baseClass=c[0];d.indent=!0;for(b in a)d[b]=a[b];return d}throw Error(this.declaredClass+"::_icon2Object(): required property 'iconClass' is missing or empty");}if(f.isString(a)&&a.length){if(c=f.trim(a).split(/\s+/),c[0])return d=
this._initStyleElement("icon"),d.baseClass=c[0],d.iconClass=a,d.indent=!0,d}else throw new TypeError(this.declaredClass+"::_icon2Object(): icon must be an object or string");}return null},_object2Array:function(a){var b=[],c;if(!f.isArray(a)){if(f.isObject(a))for(c in a)b.push(a[c]);else b.push(a);return b}return a},_onStyleDelete:function(a){delete this._itemStyleMap[this.model.getIdentity(a)]},_setTreeNodes:function(a,b){a&&f.isObject(b)&&(a.set(b),h.forEach(a.getChildren(),function(a){this._setTreeNodes(a,
b)},this))}})});