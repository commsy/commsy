//>>built
define("ckeditor/_source/plugins/styles/plugin",["dijit","dojo","dojox"],function(){CKEDITOR.plugins.add("styles",{requires:["selection"],init:function(i){i.on("contentDom",function(){i.document.setCustomData("cke_includeReadonly",!i.config.disableReadonlyStyling)})}});CKEDITOR.editor.prototype.attachStyleStateChange=function(i,l){var j=this._.styleStateChangeCallbacks;if(!j)j=this._.styleStateChangeCallbacks=[],this.on("selectionChange",function(i){for(var l=0;l<j.length;l++){var v=j[l],B=v.style.checkActive(i.data.path)?
CKEDITOR.TRISTATE_ON:CKEDITOR.TRISTATE_OFF;v.fn.call(this,B)}});j.push({style:i,fn:l})};CKEDITOR.STYLE_BLOCK=1;CKEDITOR.STYLE_INLINE=2;CKEDITOR.STYLE_OBJECT=3;(function(){function i(a){for(var d,c;(a=a.getParent())&&!("body"==a.getName());)if(a.getAttribute("data-nostyle"))d=a;else if(!c){var b=a.getAttribute("contentEditable");"false"==b?d=a:"true"==b&&(c=1)}return d}function l(a){var d=a.document;if(a.collapsed)d=C(this,d),a.insertNode(d),a.moveToPosition(d,CKEDITOR.POSITION_BEFORE_END);else{var c=
this.element,b=this._.definition,e,f=b.ignoreReadonly,g=f||b.includeReadonly;void 0==g&&(g=d.getCustomData("cke_includeReadonly"));var h=CKEDITOR.dtd[c]||(e=!0,CKEDITOR.dtd.span);a.enlarge(CKEDITOR.ENLARGE_ELEMENT,1);a.trim();var j=a.createBookmark(),l=j.startNode,x=j.endNode,k=l,o;if(!f){var f=i(l),u=i(x);f&&(k=f.getNextSourceNode(!0));u&&(x=u)}for(k.getPosition(x)==CKEDITOR.POSITION_FOLLOWING&&(k=0);k;){f=!1;if(k.equals(x))k=null,f=!0;else{var p=k.type,q=p==CKEDITOR.NODE_ELEMENT?k.getName():null,
u=q&&"false"==k.getAttribute("contentEditable"),s=q&&k.getAttribute("data-nostyle");if(q&&k.data("cke-bookmark")){k=k.getNextSourceNode(!0);continue}if(!q||h[q]&&!s&&(!u||g)&&(k.getPosition(x)|CKEDITOR.POSITION_PRECEDING|CKEDITOR.POSITION_IDENTICAL|CKEDITOR.POSITION_IS_CONTAINED)==CKEDITOR.POSITION_PRECEDING+CKEDITOR.POSITION_IDENTICAL+CKEDITOR.POSITION_IS_CONTAINED&&(!b.childRule||b.childRule(k))){var m=k.getParent();if(m&&((m.getDtd()||CKEDITOR.dtd.span)[c]||e)&&(!b.parentRule||b.parentRule(m))){if(!o&&
(!q||!CKEDITOR.dtd.$removeEmpty[q]||(k.getPosition(x)|CKEDITOR.POSITION_PRECEDING|CKEDITOR.POSITION_IDENTICAL|CKEDITOR.POSITION_IS_CONTAINED)==CKEDITOR.POSITION_PRECEDING+CKEDITOR.POSITION_IDENTICAL+CKEDITOR.POSITION_IS_CONTAINED))o=new CKEDITOR.dom.range(d),o.setStartBefore(k);if(p==CKEDITOR.NODE_TEXT||u||p==CKEDITOR.NODE_ELEMENT&&!k.getChildCount()){for(var p=k,n;(f=!p.getNext(P))&&(n=p.getParent(),h[n.getName()])&&(n.getPosition(l)|CKEDITOR.POSITION_FOLLOWING|CKEDITOR.POSITION_IDENTICAL|CKEDITOR.POSITION_IS_CONTAINED)==
CKEDITOR.POSITION_FOLLOWING+CKEDITOR.POSITION_IDENTICAL+CKEDITOR.POSITION_IS_CONTAINED&&(!b.childRule||b.childRule(n));)p=n;o.setEndAfter(p)}}else f=!0}else f=!0;k=k.getNextSourceNode(s||u)}if(f&&o&&!o.collapsed){for(var f=C(this,d),u=f.hasAttributes(),s=o.getCommonAncestor(),p={},q={},m={},v={},w,t,r;f&&s;){if(s.getName()==c){for(w in b.attributes)if(!v[w]&&(r=s.getAttribute(t)))f.getAttribute(w)==r?q[w]=1:v[w]=1;for(t in b.styles)if(!m[t]&&(r=s.getStyle(t)))f.getStyle(t)==r?p[t]=1:m[t]=1}s=s.getParent()}for(w in q)f.removeAttribute(w);
for(t in p)f.removeStyle(t);u&&!f.hasAttributes()&&(f=null);f?(o.extractContents().appendTo(f),G(this,f),o.insertNode(f),f.mergeSiblings(),CKEDITOR.env.ie||f.$.normalize()):(f=new CKEDITOR.dom.element("span"),o.extractContents().appendTo(f),o.insertNode(f),G(this,f),f.remove(!0));o=null}}a.moveToBookmark(j);a.shrink(CKEDITOR.SHRINK_TEXT)}}function j(a){a.enlarge(CKEDITOR.ENLARGE_ELEMENT,1);var d=a.createBookmark(),c=d.startNode;if(a.collapsed){for(var b=new CKEDITOR.dom.elementPath(c.getParent()),
e,f=0,g;f<b.elements.length&&(g=b.elements[f])&&!(g==b.block||g==b.blockLimit);f++)if(this.checkElementRemovable(g)){var h;a.collapsed&&(a.checkBoundaryOfElement(g,CKEDITOR.END)||(h=a.checkBoundaryOfElement(g,CKEDITOR.START)))?(e=g,e.match=h?"start":"end"):(g.mergeSiblings(),g.getName()==this.element?y(this,g):z(g,r(this)[g.getName()]))}if(e){g=c;for(f=0;;f++){h=b.elements[f];if(h.equals(e))break;else if(h.match)continue;else h=h.clone();h.append(g);g=h}g["start"==e.match?"insertBefore":"insertAfter"](e)}}else{var i=
d.endNode,j=this,b=function(){for(var a=new CKEDITOR.dom.elementPath(c.getParent()),b=new CKEDITOR.dom.elementPath(i.getParent()),d=null,e=null,f=0;f<a.elements.length;f++){var g=a.elements[f];if(g==a.block||g==a.blockLimit)break;j.checkElementRemovable(g)&&(d=g)}for(f=0;f<b.elements.length;f++){g=b.elements[f];if(g==b.block||g==b.blockLimit)break;j.checkElementRemovable(g)&&(e=g)}e&&i.breakParent(e);d&&c.breakParent(d)};b();for(e=c;!e.equals(i);)f=e.getNextSourceNode(),e.type==CKEDITOR.NODE_ELEMENT&&
this.checkElementRemovable(e)&&(e.getName()==this.element?y(this,e):z(e,r(this)[e.getName()]),f.type==CKEDITOR.NODE_ELEMENT&&f.contains(c)&&(b(),f=c.getNext())),e=f}a.moveToBookmark(d)}function n(a){(a=a.getCommonAncestor(!0,!0).getAscendant(this.element,!0))&&!a.isReadOnly()&&D(a,this)}function A(a){if(a=a.getCommonAncestor(!0,!0).getAscendant(this.element,!0)){var d=this._.definition,c=d.attributes;if(c)for(var b in c)a.removeAttribute(b,c[b]);if(d.styles)for(var e in d.styles)d.styles.hasOwnProperty(e)&&
a.removeStyle(e)}}function v(a){var d=a.createBookmark(!0),c=a.createIterator();c.enforceRealBlocks=!0;if(this._.enterMode)c.enlargeBr=this._.enterMode!=CKEDITOR.ENTER_BR;for(var b,e=a.document;b=c.getNextParagraph();)if(!b.isReadOnly()){var f=C(this,e,b);H(b,f)}a.moveToBookmark(d)}function B(a){var d=a.createBookmark(1),c=a.createIterator();c.enforceRealBlocks=!0;c.enlargeBr=this._.enterMode!=CKEDITOR.ENTER_BR;for(var b;b=c.getNextParagraph();)if(this.checkElementRemovable(b))if(b.is("pre")){var e=
this._.enterMode==CKEDITOR.ENTER_BR?null:a.document.createElement(this._.enterMode==CKEDITOR.ENTER_P?"p":"div");e&&b.copyAttributes(e);H(b,e)}else y(this,b,1);a.moveToBookmark(d)}function H(a,d){var c=!d;c&&(d=a.getDocument().createElement("div"),a.copyAttributes(d));var b=d&&d.is("pre"),e=a.is("pre"),f=!b&&e;if(b&&!e){e=d;(f=a.getBogus())&&f.remove();f=a.getHtml();f=m(f,/(?:^[ \t\n\r]+)|(?:[ \t\n\r]+$)/g,"");f=f.replace(/[ \t\r\n]*(<br[^>]*>)[ \t\r\n]*/gi,"$1");f=f.replace(/([ \t\n\r]+|&nbsp;)/g,
" ");f=f.replace(/<br\b[^>]*>/gi,"\n");if(CKEDITOR.env.ie){var g=a.getDocument().createElement("div");g.append(e);e.$.outerHTML="<pre>"+f+"</pre>";e.copyAttributes(g.getFirst());e=g.getFirst().remove()}else e.setHtml(f);d=e}else f?d=Q(c?[a.getHtml()]:R(a),d):a.moveChildren(d);d.replace(a);if(b){var c=d,h;if((h=c.getPrevious(E))&&h.is&&h.is("pre"))b=m(h.getHtml(),/\n$/,"")+"\n\n"+m(c.getHtml(),/^\n/,""),CKEDITOR.env.ie?c.$.outerHTML="<pre>"+b+"</pre>":c.setHtml(b),h.remove()}else c&&F(d)}function R(a){a.getName();
var d=[];m(a.getOuterHtml(),/(\S\s*)\n(?:\s|(<span[^>]+data-cke-bookmark.*?\/span>))*\n(?!$)/gi,function(a,b,d){return b+"</pre>"+d+"<pre>"}).replace(/<pre\b.*?>([\s\S]*?)<\/pre>/gi,function(a,b){d.push(b)});return d}function m(a,d,c){var b="",e="",a=a.replace(/(^<span[^>]+data-cke-bookmark.*?\/span>)|(<span[^>]+data-cke-bookmark.*?\/span>$)/gi,function(a,c,d){c&&(b=c);d&&(e=d);return""});return b+a.replace(d,c)+e}function Q(a,d){var c;1<a.length&&(c=new CKEDITOR.dom.documentFragment(d.getDocument()));
for(var b=0;b<a.length;b++){var e=a[b],e=e.replace(/(\r\n|\r)/g,"\n"),e=m(e,/^[ \t]*\n/,""),e=m(e,/\n$/,""),e=m(e,/^[ \t]+|[ \t]+$/g,function(a,b){return 1==a.length?"&nbsp;":b?" "+CKEDITOR.tools.repeat("&nbsp;",a.length-1):CKEDITOR.tools.repeat("&nbsp;",a.length-1)+" "}),e=e.replace(/\n/g,"<br>"),e=e.replace(/[ \t]{2,}/g,function(a){return CKEDITOR.tools.repeat("&nbsp;",a.length-1)+" "});if(c){var f=d.clone();f.setHtml(e);c.append(f)}else d.setHtml(e)}return c||d}function y(a,d){var c=a._.definition,
b=c.attributes,c=c.styles,e=r(a)[d.getName()],f=CKEDITOR.tools.isEmpty(b)&&CKEDITOR.tools.isEmpty(c),g;for(g in b)("class"==g||a._.definition.fullMatch)&&d.getAttribute(g)!=I(g,b[g])||(f=d.hasAttribute(g),d.removeAttribute(g));for(var h in c)a._.definition.fullMatch&&d.getStyle(h)!=I(h,c[h],!0)||(f=f||!!d.getStyle(h),d.removeStyle(h));z(d,e,J[d.getName()]);f&&(!CKEDITOR.dtd.$block[d.getName()]||a._.enterMode==CKEDITOR.ENTER_BR&&!d.hasAttributes()?F(d):d.renameNode(a._.enterMode==CKEDITOR.ENTER_P?
"p":"div"))}function G(a,d){for(var c=r(a),b=d.getElementsByTag(a.element),e=b.count();0<=--e;)y(a,b.getItem(e));for(var f in c)if(f!=a.element){b=d.getElementsByTag(f);for(e=b.count()-1;0<=e;e--){var g=b.getItem(e);z(g,c[f])}}}function z(a,d,c){if(d=d&&d.attributes)for(var b=0;b<d.length;b++){var e=d[b][0],f;if(f=a.getAttribute(e)){var g=d[b][1];(null===g||g.test&&g.test(f)||"string"==typeof g&&f==g)&&a.removeAttribute(e)}}c||F(a)}function F(a){if(!a.hasAttributes())if(CKEDITOR.dtd.$block[a.getName()]){var d=
a.getPrevious(E),c=a.getNext(E);d&&(d.type==CKEDITOR.NODE_TEXT||!d.isBlockBoundary({br:1}))&&a.append("br",1);c&&(c.type==CKEDITOR.NODE_TEXT||!c.isBlockBoundary({br:1}))&&a.append("br");a.remove(!0)}else d=a.getFirst(),c=a.getLast(),a.remove(!0),d&&(d.type==CKEDITOR.NODE_ELEMENT&&d.mergeSiblings(),c&&!d.equals(c)&&c.type==CKEDITOR.NODE_ELEMENT&&c.mergeSiblings())}function C(a,d,c){var b;b=a.element;"*"==b&&(b="span");b=new CKEDITOR.dom.element(b,d);c&&c.copyAttributes(b);b=D(b,a);d.getCustomData("doc_processing_style")&&
b.hasAttribute("id")?b.removeAttribute("id"):d.setCustomData("doc_processing_style",1);return b}function D(a,d){var c=d._.definition,b=c.attributes,c=CKEDITOR.style.getStyleText(c);if(b)for(var e in b)a.setAttribute(e,b[e]);c&&a.setAttribute("style",c);return a}function K(a,d){for(var c in a)a[c]=a[c].replace(S,function(a,c){return d[c]})}function r(a){if(a._.overrides)return a._.overrides;var d=a._.overrides={},c=a._.definition.overrides;if(c){CKEDITOR.tools.isArray(c)||(c=[c]);for(var b=0;b<c.length;b++){var e=
c[b],f,g;"string"==typeof e?f=e.toLowerCase():(f=e.element?e.element.toLowerCase():a.element,g=e.attributes);e=d[f]||(d[f]={});if(g){var e=e.attributes=e.attributes||[],h;for(h in g)e.push([h.toLowerCase(),g[h]])}}}return d}function I(a,d,c){var b=new CKEDITOR.dom.element("span");b[c?"setStyle":"setAttribute"](a,d);return b[c?"getStyle":"getAttribute"](a)}function L(a,d){var c;!1!==d?(c=new CKEDITOR.dom.element("span"),c.setAttribute("style",a),c=c.getAttribute("style")||""):c=a;c=c.replace(/(font-family:)(.*?)(?=;|$)/,
function(a,c,d){a=d.split(",");for(d=0;d<a.length;d++)a[d]=CKEDITOR.tools.trim(a[d].replace(/["']/g,""));return c+a.join(",")});return c.replace(/\s*([;:])\s*/,"$1").replace(/([^\s;])$/,"$1;").replace(/,\s+/g,",").replace(/\"/g,"").toLowerCase()}function M(a){var d={};a.replace(/&quot;/g,'"').replace(/\s*([^ :;]+)\s*:\s*([^;]+)\s*(?=;|$)/g,function(a,b,e){d[b]=e});return d}function N(a,d){for(var c=a.getSelection(),b=c.createBookmarks(1),e=c.getRanges(),f=d?this.removeFromRange:this.applyToRange,
g,h=e.createIterator();g=h.getNextRange();)f.call(this,g);1==b.length&&b[0].collapsed?(c.selectRanges(e),a.getById(b[0].startNode).remove()):c.selectBookmarks(b);a.removeCustomData("doc_processing_style")}var J={address:1,div:1,h1:1,h2:1,h3:1,h4:1,h5:1,h6:1,p:1,pre:1,section:1,header:1,footer:1,nav:1,article:1,aside:1,figure:1,dialog:1,hgroup:1,time:1,meter:1,menu:1,command:1,keygen:1,output:1,progress:1,details:1,datagrid:1,datalist:1},T={a:1,embed:1,hr:1,img:1,li:1,object:1,ol:1,table:1,td:1,tr:1,
th:1,ul:1,dl:1,dt:1,dd:1,form:1,audio:1,video:1},O=/\s*(?:;\s*|$)/,S=/#\((.+?)\)/g,P=CKEDITOR.dom.walker.bookmark(0,1),E=CKEDITOR.dom.walker.whitespaces(1);CKEDITOR.style=function(a,d){d&&(a=CKEDITOR.tools.clone(a),K(a.attributes,d),K(a.styles,d));var c=this.element=a.element?"string"==typeof a.element?a.element.toLowerCase():a.element:"*";this.type=J[c]?CKEDITOR.STYLE_BLOCK:T[c]?CKEDITOR.STYLE_OBJECT:CKEDITOR.STYLE_INLINE;if("object"==typeof this.element)this.type=CKEDITOR.STYLE_OBJECT;this._={definition:a}};
CKEDITOR.style.prototype={apply:function(a){N.call(this,a,!1)},remove:function(a){N.call(this,a,!0)},applyToRange:function(a){return(this.applyToRange=this.type==CKEDITOR.STYLE_INLINE?l:this.type==CKEDITOR.STYLE_BLOCK?v:this.type==CKEDITOR.STYLE_OBJECT?n:null).call(this,a)},removeFromRange:function(a){return(this.removeFromRange=this.type==CKEDITOR.STYLE_INLINE?j:this.type==CKEDITOR.STYLE_BLOCK?B:this.type==CKEDITOR.STYLE_OBJECT?A:null).call(this,a)},applyToObject:function(a){D(a,this)},checkActive:function(a){switch(this.type){case CKEDITOR.STYLE_BLOCK:return this.checkElementRemovable(a.block||
a.blockLimit,!0);case CKEDITOR.STYLE_OBJECT:case CKEDITOR.STYLE_INLINE:for(var d=a.elements,c=0,b;c<d.length;c++)if(b=d[c],!(this.type==CKEDITOR.STYLE_INLINE&&(b==a.block||b==a.blockLimit))){if(this.type==CKEDITOR.STYLE_OBJECT){var e=b.getName();if(!("string"==typeof this.element?e==this.element:e in this.element))continue}if(this.checkElementRemovable(b,!0))return!0}}return!1},checkApplicable:function(a){switch(this.type){case CKEDITOR.STYLE_OBJECT:return a.lastElement.getAscendant(this.element,
!0)}return!0},checkElementMatch:function(a,d){var c=this._.definition;if(!a||!c.ignoreReadonly&&a.isReadOnly())return!1;var b=a.getName();if("string"==typeof this.element?b==this.element:b in this.element){if(!d&&!a.hasAttributes())return!0;if(b=c._AC)c=b;else{var b={},e=0,f=c.attributes;if(f)for(var g in f)e++,b[g]=f[g];if(g=CKEDITOR.style.getStyleText(c))b.style||e++,b.style=g;b._length=e;c=c._AC=b}if(c._length){for(var h in c)if("_length"!=h){e=a.getAttribute(h)||"";if("style"==h)a:{b=c[h];e=L(e,
!1);"string"==typeof b&&(b=M(b));"string"==typeof e&&(e=M(e));g=void 0;for(g in b)if(!(g in e&&(e[g]==b[g]||"inherit"==b[g]||"inherit"==e[g]))){b=!1;break a}b=!0}else b=c[h]==e;if(b){if(!d)return!0}else if(d)return!1}if(d)return!0}else return!0}return!1},checkElementRemovable:function(a,d){if(this.checkElementMatch(a,d))return!0;var c=r(this)[a.getName()];if(c){var b;if(!(c=c.attributes))return!0;for(var e=0;e<c.length;e++)if(b=c[e][0],b=a.getAttribute(b)){var f=c[e][1];if(null===f||"string"==typeof f&&
b==f||f.test(b))return!0}}return!1},buildPreview:function(a){var d=this._.definition,c=[],b=d.element;"bdo"==b&&(b="span");var c=["<",b],e=d.attributes;if(e)for(var f in e)c.push(" ",f,'="',e[f],'"');(e=CKEDITOR.style.getStyleText(d))&&c.push(' style="',e,'"');c.push(">",a||d.name,"</",b,">");return c.join("")}};CKEDITOR.style.getStyleText=function(a){var d=a._ST;if(d)return d;var d=a.styles,c=a.attributes&&a.attributes.style||"",b="";c.length&&(c=c.replace(O,";"));for(var e in d){var f=d[e],g=(e+
":"+f).replace(O,";");"inherit"==f?b+=g:c+=g}c.length&&(c=L(c));return a._ST=c+b}})();CKEDITOR.styleCommand=function(i){this.style=i};CKEDITOR.styleCommand.prototype.exec=function(i){i.focus();(i=i.document)&&(this.state==CKEDITOR.TRISTATE_OFF?this.style.apply(i):this.state==CKEDITOR.TRISTATE_ON&&this.style.remove(i));return!!i};CKEDITOR.stylesSet=new CKEDITOR.resourceManager("","stylesSet");CKEDITOR.addStylesSet=CKEDITOR.tools.bind(CKEDITOR.stylesSet.add,CKEDITOR.stylesSet);CKEDITOR.loadStylesSet=
function(i,l,j){CKEDITOR.stylesSet.addExternal(i,l,"");CKEDITOR.stylesSet.load(i,j)};CKEDITOR.editor.prototype.getStylesSet=function(i){if(this._.stylesDefinitions)i(this._.stylesDefinitions);else{var l=this,j=l.config.stylesCombo_stylesSet||l.config.stylesSet||"default";if(j instanceof Array)l._.stylesDefinitions=j,i(j);else{var j=j.split(":"),n=j[0],A=CKEDITOR.plugins.registered.styles.path;CKEDITOR.stylesSet.addExternal(n,j[1]?j.slice(1).join(":"):A+"styles/"+n+".js","");CKEDITOR.stylesSet.load(n,
function(j){l._.stylesDefinitions=j[n];i(l._.stylesDefinitions)})}}}});