//>>built
define("ckeditor/_source/plugins/maximize/plugin",["dijit","dojo","dojox"],function(){(function(){function m(a){if(!a||a.type!=CKEDITOR.NODE_ELEMENT||"form"!=a.getName())return[];for(var e=[],f=["style","className"],b=0;b<f.length;b++){var d=a.$.elements.namedItem(f[b]);d&&(d=new CKEDITOR.dom.element(d),e.push([d,d.nextSibling]),d.remove())}return e}function p(a,e){if(a&&!(a.type!=CKEDITOR.NODE_ELEMENT||"form"!=a.getName())&&0<e.length)for(var f=e.length-1;0<=f;f--){var b=e[f][0],d=e[f][1];d?b.insertBefore(d):
b.appendTo(a)}}function o(a,e){var f=m(a),b={},d=a.$;if(!e)b["class"]=d.className||"",d.className="";b.inline=d.style.cssText||"";if(!e)d.style.cssText="position: static; overflow: visible";p(f);return b}function q(a,e){var f=m(a),b=a.$;if("class"in e)b.className=e["class"];if("inline"in e)b.style.cssText=e.inline;p(f)}function r(a){var e=CKEDITOR.instances,f;for(f in e){var b=e[f];"wysiwyg"==b.mode&&!b.readOnly&&(b=b.document.getBody(),b.setAttribute("contentEditable",!1),b.setAttribute("contentEditable",
!0))}a.focusManager.hasFocus&&(a.toolbox.focus(),a.focus())}function s(a){if(!CKEDITOR.env.ie||6<CKEDITOR.env.version)return null;var e=CKEDITOR.dom.element.createFromHtml('<iframe frameborder="0" tabindex="-1" src="javascript:void((function(){document.open();'+(CKEDITOR.env.isCustomDomain()?"document.domain='"+this.getDocument().$.domain+"';":"")+'document.close();})())" style="display:block;position:absolute;z-index:-1;progid:DXImageTransform.Microsoft.Alpha(opacity=0);"></iframe>');return a.append(e,
!0)}CKEDITOR.plugins.add("maximize",{init:function(a){function e(){var b=d.getViewPaneSize();l&&l.setStyles({width:b.width+"px",height:b.height+"px"});a.resize(b.width,b.height,null,!0)}var f=a.lang,b=CKEDITOR.document,d=b.getWindow(),j,k,n,l,m=CKEDITOR.TRISTATE_OFF;a.addCommand("maximize",{modes:{wysiwyg:!CKEDITOR.env.iOS,source:!CKEDITOR.env.iOS},readOnly:1,editorFocus:!1,exec:function(){var h=a.container.getChild(1),g=a.getThemeSpace("contents");if("wysiwyg"==a.mode){var c=a.getSelection();j=c&&
c.getRanges();k=d.getScrollPosition()}else{var i=a.textarea.$;j=!CKEDITOR.env.ie&&[i.selectionStart,i.selectionEnd];k=[i.scrollLeft,i.scrollTop]}if(this.state==CKEDITOR.TRISTATE_OFF){d.on("resize",e);n=d.getScrollPosition();for(c=a.container;c=c.getParent();)c.setCustomData("maximize_saved_styles",o(c)),c.setStyle("z-index",a.config.baseFloatZIndex-1);g.setCustomData("maximize_saved_styles",o(g,!0));h.setCustomData("maximize_saved_styles",o(h,!0));g={overflow:CKEDITOR.env.webkit?"":"hidden",width:0,
height:0};b.getDocumentElement().setStyles(g);!CKEDITOR.env.gecko&&b.getDocumentElement().setStyle("position","fixed");(!CKEDITOR.env.gecko||!CKEDITOR.env.quirks)&&b.getBody().setStyles(g);CKEDITOR.env.ie?setTimeout(function(){d.$.scrollTo(0,0)},0):d.$.scrollTo(0,0);h.setStyle("position",CKEDITOR.env.gecko&&CKEDITOR.env.quirks?"fixed":"absolute");h.setStyles({"z-index":a.config.baseFloatZIndex-1,left:"0px",top:"0px"});l=s(h);h.addClass("cke_maximized");e();g=h.getDocumentPosition();h.setStyles({left:-1*
g.x+"px",top:-1*g.y+"px"});CKEDITOR.env.gecko&&r(a)}else if(this.state==CKEDITOR.TRISTATE_ON){d.removeListener("resize",e);g=[g,h];for(c=0;c<g.length;c++)q(g[c],g[c].getCustomData("maximize_saved_styles")),g[c].removeCustomData("maximize_saved_styles");for(c=a.container;c=c.getParent();)q(c,c.getCustomData("maximize_saved_styles")),c.removeCustomData("maximize_saved_styles");CKEDITOR.env.ie?setTimeout(function(){d.$.scrollTo(n.x,n.y)},0):d.$.scrollTo(n.x,n.y);h.removeClass("cke_maximized");CKEDITOR.env.webkit&&
(h.setStyle("display","inline"),setTimeout(function(){h.setStyle("display","block")},0));l&&(l.remove(),l=null);a.fire("resize")}this.toggleState();if(c=this.uiItems[0])g=this.state==CKEDITOR.TRISTATE_OFF?f.maximize:f.minimize,c=a.element.getDocument().getById(c._.id),c.getChild(1).setHtml(g),c.setAttribute("title",g),c.setAttribute("href",'javascript:void("'+g+'");');if("wysiwyg"==a.mode)j?(CKEDITOR.env.gecko&&r(a),a.getSelection().selectRanges(j),(i=a.getSelection().getStartElement())&&i.scrollIntoView(!0)):
d.$.scrollTo(k.x,k.y);else{if(j)i.selectionStart=j[0],i.selectionEnd=j[1];i.scrollLeft=k[0];i.scrollTop=k[1]}j=k=null;m=this.state},canUndo:!1});a.ui.addButton("Maximize",{label:f.maximize,command:"maximize"});a.on("mode",function(){var b=a.getCommand("maximize");b.setState(b.state==CKEDITOR.TRISTATE_DISABLED?CKEDITOR.TRISTATE_DISABLED:m)},null,null,100)}})})()});