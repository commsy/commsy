//>>built
define("ckeditor/_source/plugins/justify/plugin",["dijit","dojo","dojox"],function(){(function(){function l(a,d){var d=void 0===d||d,b;if(d)b=a.getComputedStyle("text-align");else{for(;!a.hasAttribute||!a.hasAttribute("align")&&!a.getStyle("text-align");){b=a.getParent();if(!b)break;a=b}b=a.getStyle("text-align")||a.getAttribute("align")||""}b&&(b=b.replace(/(?:-(?:moz|webkit)-)?(?:start|auto)/i,""));!b&&d&&(b="rtl"==a.getComputedStyle("direction")?"right":"left");return b}function f(a){a.editor.readOnly||
a.editor.getCommand(this.name).refresh(a.data.path)}function g(a,d,b){this.editor=a;this.name=d;this.value=b;if(a=a.config.justifyClasses){switch(b){case "left":this.cssClassName=a[0];break;case "center":this.cssClassName=a[1];break;case "right":this.cssClassName=a[2];break;case "justify":this.cssClassName=a[3]}this.cssClassRegex=RegExp("(?:^|\\s+)(?:"+a.join("|")+")(?=$|\\s)")}}function j(a){var d=a.editor,b=new CKEDITOR.dom.range(d.document);b.setStartBefore(a.data.node);b.setEndAfter(a.data.node);
for(var i=new CKEDITOR.dom.walker(b),c;c=i.next();)if(c.type==CKEDITOR.NODE_ELEMENT)if(!c.equals(a.data.node)&&c.getDirection())b.setStartAfter(c),i=new CKEDITOR.dom.walker(b);else{var e=d.config.justifyClasses;e&&(c.hasClass(e[0])?(c.removeClass(e[0]),c.addClass(e[2])):c.hasClass(e[2])&&(c.removeClass(e[2]),c.addClass(e[0])));e=c.getStyle("text-align");"left"==e?c.setStyle("text-align","right"):"right"==e&&c.setStyle("text-align","left")}}g.prototype={exec:function(a){var d=a.getSelection(),b=a.config.enterMode;
if(d){for(var i=d.createBookmarks(),c=d.getRanges(!0),e=this.cssClassName,g,h,f=a.config.useComputedState,f=void 0===f||f,k=c.length-1;0<=k;k--){g=c[k].createIterator();for(g.enlargeBr=b!=CKEDITOR.ENTER_BR;h=g.getNextParagraph(b==CKEDITOR.ENTER_P?"p":"div");){h.removeAttribute("align");h.removeStyle("text-align");var j=e&&(h.$.className=CKEDITOR.tools.ltrim(h.$.className.replace(this.cssClassRegex,""))),m=this.state==CKEDITOR.TRISTATE_OFF&&(!f||l(h,!0)!=this.value);e?m?h.addClass(e):j||h.removeAttribute("class"):
m&&h.setStyle("text-align",this.value)}}a.focus();a.forceNextSelectionCheck();d.selectBookmarks(i)}},refresh:function(a){a=a.block||a.blockLimit;this.setState("body"!=a.getName()&&l(a,this.editor.config.useComputedState)==this.value?CKEDITOR.TRISTATE_ON:CKEDITOR.TRISTATE_OFF)}};CKEDITOR.plugins.add("justify",{init:function(a){var d=new g(a,"justifyleft","left"),b=new g(a,"justifycenter","center"),i=new g(a,"justifyright","right"),c=new g(a,"justifyblock","justify");a.addCommand("justifyleft",d);a.addCommand("justifycenter",
b);a.addCommand("justifyright",i);a.addCommand("justifyblock",c);a.ui.addButton("JustifyLeft",{label:a.lang.justify.left,command:"justifyleft"});a.ui.addButton("JustifyCenter",{label:a.lang.justify.center,command:"justifycenter"});a.ui.addButton("JustifyRight",{label:a.lang.justify.right,command:"justifyright"});a.ui.addButton("JustifyBlock",{label:a.lang.justify.block,command:"justifyblock"});a.on("selectionChange",CKEDITOR.tools.bind(f,d));a.on("selectionChange",CKEDITOR.tools.bind(f,i));a.on("selectionChange",
CKEDITOR.tools.bind(f,b));a.on("selectionChange",CKEDITOR.tools.bind(f,c));a.on("dirChanged",j)},requires:["domiterator"]})})()});