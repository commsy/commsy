//>>built
define("ckeditor/_source/plugins/menu/plugin",["dijit","dojo","dojox"],function(){CKEDITOR.plugins.add("menu",{beforeInit:function(j){for(var a=j.config.menu_groups.split(","),b=j._.menuGroups={},c=j._.menuItems={},d=0;d<a.length;d++)b[a[d]]=d+1;j.addMenuGroup=function(a,c){b[a]=c||100};j.addMenuItem=function(a,d){b[d.group]&&(c[a]=new CKEDITOR.menuItem(this,a,d))};j.addMenuItems=function(a){for(var b in a)this.addMenuItem(b,a[b])};j.getMenuItem=function(a){return c[a]};j.removeMenuItem=function(a){delete c[a]}},
requires:["floatpanel"]});(function(){function j(a){a.sort(function(a,c){return a.group<c.group?-1:a.group>c.group?1:a.order<c.order?-1:a.order>c.order?1:0})}CKEDITOR.menu=CKEDITOR.tools.createClass({$:function(a,b){b=this._.definition=b||{};this.id=CKEDITOR.tools.getNextId();this.editor=a;this.items=[];this._.listeners=[];this._.level=b.level||1;var c=CKEDITOR.tools.extend({},b.panel,{css:a.skin.editor.css,level:this._.level-1,block:{}}),d=c.block.attributes=c.attributes||{};!d.role&&(d.role="menu");
this._.panelDefinition=c},_:{onShow:function(){var a=this.editor.getSelection();CKEDITOR.env.ie&&a&&a.lock();var b=a&&a.getStartElement(),c=this._.listeners;this.removeAll();for(var d=0;d<c.length;d++){var e=c[d](b,a);if(e)for(var h in e){var f=this.editor.getMenuItem(h);if(f&&(!f.command||this.editor.getCommand(f.command).state))f.state=e[h],this.add(f)}}},onClick:function(a){this.hide(!1);if(a.onClick)a.onClick();else a.command&&this.editor.execCommand(a.command)},onEscape:function(a){var b=this.parent;
b?(b._.panel.hideChild(),a=b._.panel._.panel._.currentBlock,a._.markItem(a._.focusIndex)):27==a&&this.hide();return!1},onHide:function(){if(CKEDITOR.env.ie&&!this.parent){var a=this.editor.getSelection();a&&a.unlock(!0)}this.onHide&&this.onHide()},showSubMenu:function(a){var b=this._.subMenu,c=this.items[a];if(c=c.getItems&&c.getItems()){this._.panel.getBlock(this.id)._.focusIndex=a;b?b.removeAll():(b=this._.subMenu=new CKEDITOR.menu(this.editor,CKEDITOR.tools.extend({},this._.definition,{level:this._.level+
1},!0)),b.parent=this,b._.onClick=CKEDITOR.tools.bind(this._.onClick,this));for(var d in c){var e=this.editor.getMenuItem(d);if(e)e.state=c[d],b.add(e)}a=this._.panel.getBlock(this.id).element.getDocument().getById(this.id+(""+a));b.show(a,2)}else this._.panel.hideChild()}},proto:{add:function(a){if(!a.order)a.order=this.items.length;this.items.push(a)},removeAll:function(){this.items=[]},show:function(a,b,c,d){var o;if(!this.parent&&(this._.onShow(),!this.items.length))return;var b=b||("rtl"==this.editor.lang.dir?
2:1),e=this.items,h=this.editor,f=this._.panel,i=this._.element;if(!f){f=this._.panel=new CKEDITOR.ui.floatPanel(this.editor,CKEDITOR.document.getBody(),this._.panelDefinition,this._.level);f.onEscape=CKEDITOR.tools.bind(function(a){if(!1===this._.onEscape(a))return!1},this);f.onHide=CKEDITOR.tools.bind(function(){this._.onHide&&this._.onHide()},this);i=f.addBlock(this.id,this._.panelDefinition.block);i.autoSize=!0;var g=i.keys;g[40]="next";g[9]="next";g[38]="prev";g[CKEDITOR.SHIFT+9]="prev";g["rtl"==
h.lang.dir?37:39]=CKEDITOR.env.ie?"mouseup":"click";g[32]=CKEDITOR.env.ie?"mouseup":"click";CKEDITOR.env.ie&&(g[13]="mouseup");o=this._.element=i.element,i=o;i.addClass(h.skinClass);g=i.getDocument();g.getBody().setStyle("overflow","hidden");g.getElementsByTag("html").getItem(0).setStyle("overflow","hidden");this._.itemOverFn=CKEDITOR.tools.addFunction(function(a){clearTimeout(this._.showSubTimeout);this._.showSubTimeout=CKEDITOR.tools.setTimeout(this._.showSubMenu,h.config.menu_subMenuDelay||400,
this,[a])},this);this._.itemOutFn=CKEDITOR.tools.addFunction(function(){clearTimeout(this._.showSubTimeout)},this);this._.itemClickFn=CKEDITOR.tools.addFunction(function(a){var b=this.items[a];if(b.state==CKEDITOR.TRISTATE_DISABLED)this.hide();else if(b.getItems)this._.showSubMenu(a);else this._.onClick(b)},this)}j(e);for(var g=['<div class="cke_menu'+(h.container.getChild(1).hasClass("cke_mixed_dir_content")?" cke_mixed_dir_content":"")+'" role="presentation">'],m=e.length,n=m&&e[0].group,k=0;k<
m;k++){var l=e[k];if(n!=l.group)g.push('<div class="cke_menuseparator" role="separator"></div>'),n=l.group;l.render(this,k,g)}g.push("</div>");i.setHtml(g.join(""));CKEDITOR.ui.fire("ready",this);this.parent?this.parent._.panel.showAsChild(f,this.id,a,b,c,d):f.showBlock(this.id,a,b,c,d);h.fire("menuShow",[f])},addListener:function(a){this._.listeners.push(a)},hide:function(a){this._.onHide&&this._.onHide();this._.panel&&this._.panel.hide(a)}}});CKEDITOR.menuItem=CKEDITOR.tools.createClass({$:function(a,
b,c){CKEDITOR.tools.extend(this,c,{order:0,className:"cke_button_"+b});this.group=a._.menuGroups[this.group];this.editor=a;this.name=b},proto:{render:function(a,b,c){var d=a.id+(""+b),e="undefined"==typeof this.state?CKEDITOR.TRISTATE_OFF:this.state,h=" cke_"+(e==CKEDITOR.TRISTATE_ON?"on":e==CKEDITOR.TRISTATE_DISABLED?"disabled":"off"),f=this.label;this.className&&(h+=" "+this.className);var i=this.getItems;c.push('<span class="cke_menuitem'+(this.icon&&-1==this.icon.indexOf(".png")?" cke_noalphafix":
"")+'"><a id="',d,'" class="',h,'" href="javascript:void(\'',(this.label||"").replace("'",""),'\')" title="',this.label,'" tabindex="-1"_cke_focus=1 hidefocus="true" role="menuitem"'+(i?'aria-haspopup="true"':"")+(e==CKEDITOR.TRISTATE_DISABLED?'aria-disabled="true"':"")+(e==CKEDITOR.TRISTATE_ON?'aria-pressed="true"':""));(CKEDITOR.env.opera||CKEDITOR.env.gecko&&CKEDITOR.env.mac)&&c.push(' onkeypress="return false;"');CKEDITOR.env.gecko&&c.push(' onblur="this.style.cssText = this.style.cssText;"');
d=-16*(this.iconOffset||0);c.push(' onmouseover="CKEDITOR.tools.callFunction(',a._.itemOverFn,",",b,');" onmouseout="CKEDITOR.tools.callFunction(',a._.itemOutFn,",",b,');" '+(CKEDITOR.env.ie?'onclick="return false;" onmouseup':"onclick")+'="CKEDITOR.tools.callFunction(',a._.itemClickFn,",",b,'); return false;"><span class="cke_icon_wrapper"><span class="cke_icon"'+(this.icon?' style="background-image:url('+CKEDITOR.getUrl(this.icon)+");background-position:0 "+d+'px;"':"")+'></span></span><span class="cke_label">');
i&&c.push('<span class="cke_menuarrow">',"<span>&#","rtl"==this.editor.lang.dir?"9668":"9658",";</span>","</span>");c.push(f,"</span></a></span>")}}})})();CKEDITOR.config.menu_groups="clipboard,form,tablecell,tablecellproperties,tablerow,tablecolumn,table,anchor,link,image,flash,checkbox,radio,textfield,hiddenfield,imagebutton,button,select,textarea,div"});