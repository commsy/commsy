//>>built
define("ckeditor/_source/plugins/wysiwygarea/plugin",["dijit","dojo","dojox"],function(){(function(){function s(a){return function(e){if("wysiwyg"==this.mode){this.focus();var c=this.getSelection(),g=c.isLocked;g&&c.unlock();this.fire("saveSnapshot");a.call(this,e.data);g&&this.getSelection().lock();CKEDITOR.tools.setTimeout(function(){this.fire("saveSnapshot")},0,this)}}}function A(a){var b;this.dataProcessor&&(a=this.dataProcessor.toHtml(a));if(a){var e=this.getSelection(),c=e.getRanges()[0];if(!c.checkReadOnly()){if(CKEDITOR.env.opera&&
(new CKEDITOR.dom.elementPath(c.startContainer)).block)for(var g=CKEDITOR.htmlParser.fragment.fromHtml(a,!1).children,i=0,l=g.length;i<l;i++)if(g[i]._.isBlockLike){c.splitBlock(this.enterMode==CKEDITOR.ENTER_DIV?"div":"p");c.insertNode(c.document.createText(""));c.select();break}if(CKEDITOR.env.ie){g=e.getNative();if("Control"==g.type)g.clear();else if(e.getType()==CKEDITOR.SELECTION_TEXT&&(b=(c=e.getRanges()[0])&&c.endContainer,e=b)&&e.type==CKEDITOR.NODE_ELEMENT&&"false"==e.getAttribute("contenteditable")&&
c.checkBoundaryOfElement(e,CKEDITOR.END))c.setEndAfter(c.endContainer),c.deleteContents();g.createRange().pasteHTML(a)}else this.document.$.execCommand("inserthtml",!1,a);CKEDITOR.env.webkit&&(e=this.getSelection(),e.scrollIntoView())}}}function E(a){var e=this.getSelection(),c=e.getStartElement().hasAscendant("pre",!0)?CKEDITOR.ENTER_BR:this.config.enterMode,g=c==CKEDITOR.ENTER_BR,a=CKEDITOR.tools.htmlEncode(a.replace(/\r\n|\r/g,"\n")),a=a.replace(/^[ \t]+|[ \t]+$/g,function(a,c){return 1==a.length?
"&nbsp;":c?" "+CKEDITOR.tools.repeat("&nbsp;",a.length-1):CKEDITOR.tools.repeat("&nbsp;",a.length-1)+" "}),a=a.replace(/[ \t]{2,}/g,function(a){return CKEDITOR.tools.repeat("&nbsp;",a.length-1)+" "}),i=c==CKEDITOR.ENTER_P?"p":"div";g||(a=a.replace(/(\n{2})([\s\S]*?)(?:$|\1)/g,function(a,c,e){return"<"+i+">"+e+"</"+i+">"}));a=a.replace(/\n/g,"<br>");!g&&!CKEDITOR.env.ie&&(a=a.replace(RegExp("<br>(?=</"+i+">)"),function(a){return CKEDITOR.tools.repeat(a,2)}));if(CKEDITOR.env.gecko||CKEDITOR.env.webkit){e=
new CKEDITOR.dom.elementPath(e.getStartElement());c=[];for(g=0;g<e.elements.length;g++){var l=e.elements[g].getName();if(l in CKEDITOR.dtd.$inline)c.unshift(e.elements[g].getOuterHtml().match(/^<.*?>/));else if(l in CKEDITOR.dtd.$block)break}a=c.join("")+a}A.call(this,a)}function F(a){var e=this.getSelection(),c=e.getRanges(),g=a.getName(),i=CKEDITOR.dtd.$block[g],l=e.isLocked;l&&e.unlock();for(var d,m,k,o=c.length-1;0<=o;o--)if(d=c[o],!d.checkReadOnly()){d.deleteContents(1);m=!o&&a||a.clone(1);var j,
t;if(i)for(;(j=d.getCommonAncestor(0,1))&&(t=CKEDITOR.dtd[j.getName()])&&(!t||!t[g]);)j.getName()in CKEDITOR.dtd.span?d.splitElement(j):d.checkStartOfBlock()&&d.checkEndOfBlock()?(d.setStartBefore(j),d.collapse(!0),j.remove()):d.splitBlock();d.insertNode(m);k||(k=m)}k&&(d.moveToPosition(k,CKEDITOR.POSITION_AFTER_END),i&&((c=(a=k.getNext(u))&&a.type==CKEDITOR.NODE_ELEMENT&&a.getName())&&CKEDITOR.dtd.$block[c]?CKEDITOR.dtd[c]["#"]?d.moveToElementEditStart(a):d.moveToElementEditEnd(k):a||(a=d.fixBlock(!0,
this.config.enterMode==CKEDITOR.ENTER_DIV?"div":"p"),d.moveToElementEditStart(a))));e.selectRanges([d]);l&&this.getSelection().lock()}function v(a){a.checkDirty()||setTimeout(function(){a.resetDirty()},0)}function B(a){return p(a)&&G(a)}function C(a){var e=a.window,c=a.document,g=a.document.getBody(),i=g.getFirst(),l=g.getChildren().count();if(!l||1==l&&i.type==CKEDITOR.NODE_ELEMENT&&i.hasAttribute("_moz_editor_bogus_node")){v(a);var a=a.element.getDocument(),i=a.getDocumentElement(),d=i.$.scrollTop,
m=i.$.scrollLeft,k=c.$.createEvent("KeyEvents");k.initKeyEvent("keypress",!0,!0,e.$,!1,!1,!1,!1,0,32);c.$.dispatchEvent(k);(d!=i.$.scrollTop||m!=i.$.scrollLeft)&&a.getWindow().$.scrollTo(m,d);l&&g.getFirst().remove();c.getBody().appendBogus();e=new CKEDITOR.dom.range(c);e.setStartAt(g,CKEDITOR.POSITION_AFTER_START);e.select()}}var w=/(^|<body\b[^>]*>)\s*<(p|div|address|h\d|center|pre)[^>]*>\s*(?:<br[^>]*>|&nbsp;|\u00A0|&#160;)?\s*(:?<\/\2>)?\s*(?=$|<\/body>)/gi,x=CKEDITOR.dom.walker.whitespaces(!0),
H=CKEDITOR.dom.walker.bogus(!0),u=function(a){return x(a)&&H(a)},p=CKEDITOR.dom.walker.whitespaces(!0),G=CKEDITOR.dom.walker.bookmark(!1,!0),p=CKEDITOR.dom.walker.whitespaces(!0);CKEDITOR.plugins.add("wysiwygarea",{requires:["editingblock"],init:function(a){var e=a.config.enterMode!=CKEDITOR.ENTER_BR&&!1!==a.config.autoParagraph?a.config.enterMode==CKEDITOR.ENTER_DIV?"div":"p":!1,c=a.lang.editorTitle.replace("%1",a.name),g=a.lang.editorHelp;CKEDITOR.env.ie&&(c+=", "+g);var i=CKEDITOR.document.getWindow(),
l;a.on("editingBlockReady",function(){function k(f){if(y){y=0;a.fire("ariaWidget",j);var b=f.document,c=b.body,e=b.getElementById("cke_actscrpt");e&&e.parentNode.removeChild(e);c.spellcheck=!a.config.disableNativeSpellChecker;var h=!a.readOnly;CKEDITOR.env.ie?(c.hideFocus=!0,c.disabled=!0,c.contentEditable=h,c.removeAttribute("disabled")):setTimeout(function(){CKEDITOR.env.gecko&&10900<=CKEDITOR.env.version||CKEDITOR.env.opera?b.$.body.contentEditable=h:CKEDITOR.env.webkit?b.$.body.parentNode.contentEditable=
h:b.$.designMode=h?"off":"on"},0);h&&CKEDITOR.env.gecko&&CKEDITOR.tools.setTimeout(C,0,null,a);f=a.window=new CKEDITOR.dom.window(f);b=a.document=new CKEDITOR.dom.document(b);h&&b.on("dblclick",function(b){b={element:b.data.getTarget(),dialog:""};a.fire("doubleclick",b);b.dialog&&a.openDialog(b.dialog)});CKEDITOR.env.ie&&b.on("click",function(a){var b=a.data.getTarget();b.is("input")&&(b=b.getAttribute("type"),("submit"==b||"reset"==b)&&a.data.preventDefault())});if(!CKEDITOR.env.ie&&!CKEDITOR.env.opera)b.on("mousedown",
function(b){b=b.data.getTarget();b.is("img","hr","input","textarea","select")&&a.getSelection().selectElement(b)});if(CKEDITOR.env.gecko)b.on("mouseup",function(a){if(2==a.data.$.button&&(a=a.data.getTarget(),!a.getOuterHtml().replace(w,""))){var f=new CKEDITOR.dom.range(b);f.moveToElementEditStart(a);f.select(!0)}});b.on("click",function(a){a=a.data;a.getTarget().is("a")&&2!=a.$.button&&a.preventDefault()});CKEDITOR.env.webkit&&(b.on("mousedown",function(){d=1}),b.on("click",function(a){a.data.getTarget().is("input",
"select")&&a.data.preventDefault()}),b.on("mouseup",function(a){a.data.getTarget().is("input","textarea")&&a.data.preventDefault()}));c=CKEDITOR.env.ie?j:f;c.on("blur",function(){a.focusManager.blur()});var d;c.on("focus",function(){var b=a.document;CKEDITOR.env.gecko||CKEDITOR.env.opera?b.getBody().focus():CKEDITOR.env.webkit&&!d&&(a.document.getDocumentElement().focus(),d=1);a.focusManager.focus()});c=a.keystrokeHandler;c.blockedKeystrokes[8]=!h;c.attach(b);b.getDocumentElement().addClass(b.$.compatMode);
h&&b.on("keydown",function(c){var e=c.data.getKeystroke();if(e in{8:1,46:1}){var d=a.getSelection(),h=d.getSelectedElement(),d=d.getRanges()[0],g=new CKEDITOR.dom.elementPath(d.startContainer),k,j,n,i=8==e;if(h)a.fire("saveSnapshot"),d.moveToPosition(h,CKEDITOR.POSITION_BEFORE_START),h.remove(),d.select(),a.fire("saveSnapshot"),c.data.preventDefault();else if((k=g.block)&&d[i?"checkStartOfBlock":"checkEndOfBlock"]()&&(n=k[i?"getPrevious":"getNext"](x))&&n.is("table"))a.fire("saveSnapshot"),d[i?"checkEndOfBlock":
"checkStartOfBlock"]()&&k.remove(),d["moveToElementEdit"+(i?"End":"Start")](n),d.select(),a.fire("saveSnapshot"),c.data.preventDefault();else if(g.blockLimit.is("td")&&(j=g.blockLimit.getAscendant("table"))&&d.checkBoundaryOfElement(j,i?CKEDITOR.START:CKEDITOR.END)&&(n=j[i?"getPrevious":"getNext"](x)))a.fire("saveSnapshot"),d["moveToElementEdit"+(i?"End":"Start")](n),d.checkStartOfBlock()&&d.checkEndOfBlock()?n.remove():d.select(),a.fire("saveSnapshot"),c.data.preventDefault()}if((33==e||34==e)&&
CKEDITOR.env.gecko)h=b.getBody(),f.$.innerHeight>h.$.offsetHeight&&(d=new CKEDITOR.dom.range(b),d[33==e?"moveToElementEditStart":"moveToElementEditEnd"](h),d.select(),c.data.preventDefault())});if(CKEDITOR.env.ie&&"CSS1Compat"==b.$.compatMode){var g={33:1,34:1};b.on("keydown",function(b){b.data.getKeystroke()in g&&setTimeout(function(){a.getSelection().scrollIntoView()},0)})}if(CKEDITOR.env.ie&&a.config.enterMode!=CKEDITOR.ENTER_P)b.on("selectionchange",function(){var f=b.getBody(),c=a.getSelection(),
d=c&&c.getRanges()[0];d&&f.getHtml().match(/^<p>&nbsp;<\/p>$/i)&&d.startContainer.equals(f)&&setTimeout(function(){d=a.getSelection().getRanges()[0];d.startContainer.equals("body")||(f.getFirst().remove(1),d.moveToElementEditEnd(f),d.select(1))},0)});a.contextMenu&&a.contextMenu.addTarget(b,!1!==a.config.browserContextMenuOnCtrl);setTimeout(function(){a.fire("contentDom");if(z)a.mode="wysiwyg",a.fire("mode",{previousMode:a._.previousMode}),z=!1;m=!1;q&&(a.focus(),q=!1);setTimeout(function(){a.fire("dataReady")},
0);try{a.document.$.execCommand("2D-position",!1,!0)}catch(b){}try{a.document.$.execCommand("enableInlineTableEditing",!1,!a.config.disableNativeTableHandles)}catch(f){}if(a.config.disableObjectResizing)try{a.document.$.execCommand("enableObjectResizing",!1,!1)}catch(c){a.document.getBody().on(CKEDITOR.env.ie?"resizestart":"resize",function(a){a.data.preventDefault()})}CKEDITOR.env.ie&&setTimeout(function(){if(a.document){var b=a.document.$.body;b.runtimeStyle.marginBottom="0px";b.runtimeStyle.marginBottom=
""}},1E3)},0)}}var d,j,m,q,y,z,r,D=CKEDITOR.env.isCustomDomain(),u=function(f){j&&j.remove();var b="document.open();"+(D?'document.domain="'+document.domain+'";':"")+"document.close();",b=CKEDITOR.env.air?"javascript:void(0)":CKEDITOR.env.ie?"javascript:void(function(){"+encodeURIComponent(b)+"}())":"",e=CKEDITOR.tools.getNextId();j=CKEDITOR.dom.element.createFromHtml('<iframe style="width:100%;height:100%" frameBorder="0" aria-describedby="'+e+'" title="'+c+'" src="'+b+'" tabIndex="'+(CKEDITOR.env.webkit?
-1:a.tabIndex)+'" allowTransparency="true"></iframe>');if("chrome:"==document.location.protocol)CKEDITOR.event.useCapture=!0;j.on("load",function(a){y=1;a.removeListener();a=j.getFrameDocument();a.write(f);CKEDITOR.env.air&&k(a.getWindow().$)});if("chrome:"==document.location.protocol)CKEDITOR.event.useCapture=!1;d.append(CKEDITOR.dom.element.createFromHtml('<span id="'+e+'" class="cke_voice_label">'+g+"</span>"));d.append(j);CKEDITOR.env.webkit&&(r=function(){d.setStyle("width","100%");j.hide();
j.setSize("width",d.getSize("width"));d.removeStyle("width");j.show()},i.on("resize",r))};l=CKEDITOR.tools.addFunction(k);var v='<script id="cke_actscrpt" type="text/javascript" data-cke-temp="1">'+(D?'document.domain="'+document.domain+'";':"")+"window.parent.CKEDITOR.tools.callFunction( "+l+", window );<\/script>";a.addMode("wysiwyg",{load:function(f,b,c){d=f;CKEDITOR.env.ie&&CKEDITOR.env.quirks&&f.setStyle("position","relative");z=a.mayBeDirty=!0;c?this.loadSnapshotData(b):this.loadData(b)},loadData:function(f){m=
!0;a._.dataStore={id:1};var b=a.config,d=b.fullPage,g=b.docType,h='<style type="text/css" data-cke-temp="1">'+a._.styles.join("\n")+"</style>";!d&&(h=CKEDITOR.tools.buildStyleHtml(a.config.contentsCss)+h);var i=b.baseHref?'<base href="'+b.baseHref+'" data-cke-temp="1" />':"";d&&(f=f.replace(/<!DOCTYPE[^>]*>/i,function(b){a.docType=g=b;return""}).replace(/<\?xml\s[^\?]*\?>/i,function(b){a.xmlDeclaration=b;return""}));a.dataProcessor&&(f=a.dataProcessor.toHtml(f,e));d?(/<body[\s|>]/.test(f)||(f="<body>"+
f),/<html[\s|>]/.test(f)||(f="<html>"+f+"</html>"),/<head[\s|>]/.test(f)?/<title[\s|>]/.test(f)||(f=f.replace(/<head[^>]*>/,"$&<title></title>")):f=f.replace(/<html[^>]*>/,"$&<head><title></title></head>"),i&&(f=f.replace(/<head>/,"$&"+i)),f=f.replace(/<\/head\s*>/,h+"$&"),f=g+f):f=b.docType+'<html dir="'+b.contentsLangDirection+'" lang="'+(b.contentsLanguage||a.langCode)+'"><head><title>'+c+"</title>"+i+h+"</head><body"+(b.bodyId?' id="'+b.bodyId+'"':"")+(b.bodyClass?' class="'+b.bodyClass+'"':"")+
">"+f+"</html>";CKEDITOR.env.gecko&&(f=f.replace(/<br \/>(?=\s*<\/(:?html|body)>)/,'$&<br type="_moz" />'));f+=v;this.onDispose();u(f)},getData:function(){var f=a.config,b=f.fullPage,c=b&&a.docType,d=b&&a.xmlDeclaration,h=j.getFrameDocument(),b=b?h.getDocumentElement().getOuterHtml():h.getBody().getHtml();CKEDITOR.env.gecko&&(b=b.replace(/<br>(?=\s*(:?$|<\/body>))/,""));a.dataProcessor&&(b=a.dataProcessor.toDataFormat(b,e));f.ignoreEmptyParagraph&&(b=b.replace(w,function(a,b){return b}));d&&(b=d+
"\n"+b);c&&(b=c+"\n"+b);return b},getSnapshotData:function(){return j.getFrameDocument().getBody().getHtml()},loadSnapshotData:function(a){j.getFrameDocument().getBody().setHtml(a)},onDispose:function(){a.document&&(a.document.getDocumentElement().clearCustomData(),a.document.getBody().clearCustomData(),a.window.clearCustomData(),a.document.clearCustomData(),j.clearCustomData(),j.remove())},unload:function(){this.onDispose();r&&i.removeListener("resize",r);a.window=a.document=j=d=q=null;a.fire("contentDomUnload")},
focus:function(){var c=a.window;if(m)q=!0;else if(c){var b=a.getSelection(),b=b&&b.getNative();b&&"Control"==b.type||(CKEDITOR.env.air?setTimeout(function(){c.focus()},0):c.focus(),a.selectionChange())}}});a.on("insertHtml",s(A),null,null,20);a.on("insertElement",s(F),null,null,20);a.on("insertText",s(E),null,null,20);a.on("selectionChange",function(c){if(!a.readOnly){var b=a.getSelection();if(b&&!b.isLocked){b=a.checkDirty();a.fire("saveSnapshot",{contentOnly:1});var d=c.editor,e=c.data.path,h=e.blockLimit,
g=c.data.selection.getRanges()[0],i=d.document.getBody(),k=d.config.enterMode;if(CKEDITOR.env.gecko){C(d);var j=e.block||e.blockLimit,l=j&&j.getLast(B);j&&j.isBlockBoundary()&&(!l||!(l.type==CKEDITOR.NODE_ELEMENT&&l.isBlockBoundary()))&&!j.is("pre")&&!j.getBogus()&&j.appendBogus()}if(!1!==d.config.autoParagraph&&k!=CKEDITOR.ENTER_BR&&g.collapsed&&"body"==h.getName()&&!e.block){e=g.fixBlock(!0,d.config.enterMode==CKEDITOR.ENTER_DIV?"div":"p");CKEDITOR.env.ie&&(h=e.getFirst(B))&&h.type==CKEDITOR.NODE_TEXT&&
CKEDITOR.tools.trim(h.getText()).match(/^(?:&nbsp;|\xa0)$/)&&h.remove();if(e.getOuterHtml().match(w))if((h=e.getNext(p))&&h.type==CKEDITOR.NODE_ELEMENT&&(!h.isBlockBoundary()||!CKEDITOR.dtd.$empty[h.getName()]))g.moveToElementEditStart(h),e.remove();else if((h=e.getPrevious(p))&&h.type==CKEDITOR.NODE_ELEMENT&&(!h.isBlockBoundary()||!CKEDITOR.dtd.$empty[h.getName()]))g.moveToElementEditEnd(h),e.remove();g.select();c.cancel()}c=new CKEDITOR.dom.range(d.document);c.moveToElementEditEnd(d.document.getBody());
(new CKEDITOR.dom.elementPath(c.startContainer)).blockLimit.is("body")||(c=k!=CKEDITOR.ENTER_BR?i.append(d.document.createElement(k==CKEDITOR.ENTER_P?"p":"div")):i,CKEDITOR.env.ie||c.appendBogus());a.fire("updateSnapshot");!b&&a.resetDirty()}}},null,null,1)});a.on("contentDom",function(){a.document.getElementsByTag("title").getItem(0).data("cke-title",a.document.$.title);CKEDITOR.env.ie&&(a.document.$.title=c)});a.on("readOnly",function(){if("wysiwyg"==a.mode){var c=a.getMode();c.loadData(c.getData())}});
if(8<=CKEDITOR.document.$.documentMode){a.addCss("html.CSS1Compat [contenteditable=false]{ min-height:0 !important;}");var d=[],m;for(m in CKEDITOR.dtd.$removeEmpty)d.push("html.CSS1Compat "+m+"[contenteditable=false]");a.addCss(d.join(",")+"{ display:inline-block;}")}else CKEDITOR.env.gecko?(a.addCss("html { height: 100% !important; }"),a.addCss("img:-moz-broken { -moz-force-broken-image-icon : 1;\tmin-width : 24px; min-height : 24px; }")):CKEDITOR.env.ie&&8>CKEDITOR.env.version&&"ltr"==a.config.contentsLangDirection&&
a.addCss("body{margin-right:0;}");a.addCss("html {\t_overflow-y: scroll; cursor: text;\t*cursor:auto;}");a.addCss("img, input, textarea { cursor: default;}");a.on("insertElement",function(a){a=a.data;if(a.type==CKEDITOR.NODE_ELEMENT&&(a.is("input")||a.is("textarea"))&&"false"!=a.getAttribute("contenteditable"))a.data("cke-editable",a.hasAttribute("contenteditable")?"true":"1"),a.setAttribute("contenteditable",!1)})}});CKEDITOR.env.gecko&&function(){var a=document.body;if(a){var e=a.getAttribute("onpageshow");
a.setAttribute("onpageshow",(e?e+";":"")+'event.persisted && (function(){var allInstances = CKEDITOR.instances, editor, doc;for ( var i in allInstances ){\teditor = allInstances[ i ];\tdoc = editor.document;\tif ( doc )\t{\t\tdoc.$.designMode = "off";\t\tdoc.$.designMode = "on";\t}}})();')}else window.addEventListener("load",arguments.callee,!1)}()})();CKEDITOR.config.disableObjectResizing=!1;CKEDITOR.config.disableNativeTableHandles=!0;CKEDITOR.config.disableNativeSpellChecker=!0;CKEDITOR.config.ignoreEmptyParagraph=
!0});