//>>built
define("ckeditor/_source/plugins/contextmenu/plugin",["dijit","dojo","dojox"],function(){CKEDITOR.plugins.add("contextmenu",{requires:["menu"],onLoad:function(){CKEDITOR.plugins.contextMenu=CKEDITOR.tools.createClass({base:CKEDITOR.menu,$:function(b){this.base.call(this,b,{panel:{className:b.skinClass+" cke_contextmenu",attributes:{"aria-label":b.lang.contextmenu.options}}})},proto:{addTarget:function(b,e){if(CKEDITOR.env.opera&&!("oncontextmenu"in document.body)){var c;b.on("mousedown",function(a){a=
a.data;if(2!=a.$.button)a.getKeystroke()==CKEDITOR.CTRL+1&&b.fire("contextmenu",a);else if(!e||!(CKEDITOR.env.mac?a.$.metaKey:a.$.ctrlKey)){var f=a.getTarget();if(!c)f=f.getDocument(),c=f.createElement("input"),c.$.type="button",f.getBody().append(c);c.setAttribute("style","position:absolute;top:"+(a.$.clientY-2)+"px;left:"+(a.$.clientX-2)+"px;width:5px;height:5px;opacity:0.01")}});b.on("mouseup",function(a){c&&(c.remove(),c=void 0,b.fire("contextmenu",a.data))})}b.on("contextmenu",function(a){a=
a.data;if(!e||!(CKEDITOR.env.webkit?d:CKEDITOR.env.mac?a.$.metaKey:a.$.ctrlKey)){a.preventDefault();var b=a.getTarget().getDocument().getDocumentElement(),c=a.$.clientX,g=a.$.clientY;CKEDITOR.tools.setTimeout(function(){this.open(b,null,c,g)},CKEDITOR.env.ie?200:0,this)}},this);if(CKEDITOR.env.opera)b.on("keypress",function(a){a=a.data;0===a.$.keyCode&&a.preventDefault()});if(CKEDITOR.env.webkit){var d,g=function(){d=0};b.on("keydown",function(a){d=CKEDITOR.env.mac?a.data.$.metaKey:a.data.$.ctrlKey});
b.on("keyup",g);b.on("contextmenu",g)}},open:function(b,e,c,d){this.editor.focus();b=b||CKEDITOR.document.getDocumentElement();this.show(b,e,c,d)}}})},beforeInit:function(b){b.contextMenu=new CKEDITOR.plugins.contextMenu(b);b.addCommand("contextMenu",{exec:function(){b.contextMenu.open(b.document.getBody())}})}})});