//>>built
define("ckeditor/_source/core/dom/element",["dijit","dojo","dojox"],function(){CKEDITOR.dom.element=function(a,b){"string"==typeof a&&(a=(b?b.$:document).createElement(a));CKEDITOR.dom.domObject.call(this,a)};CKEDITOR.dom.element.get=function(a){return a&&(a.$?a:new CKEDITOR.dom.element(a))};CKEDITOR.dom.element.prototype=new CKEDITOR.dom.node;CKEDITOR.dom.element.createFromHtml=function(a,b){var c=new CKEDITOR.dom.element("div",b);c.setHtml(a);return c.getFirst().remove()};CKEDITOR.dom.element.setMarker=
function(a,b,c,d){var e=b.getCustomData("list_marker_id")||b.setCustomData("list_marker_id",CKEDITOR.tools.getNextNumber()).getCustomData("list_marker_id"),f=b.getCustomData("list_marker_names")||b.setCustomData("list_marker_names",{}).getCustomData("list_marker_names");a[e]=b;f[c]=1;return b.setCustomData(c,d)};CKEDITOR.dom.element.clearAllMarkers=function(a){for(var b in a)CKEDITOR.dom.element.clearMarkers(a,a[b],1)};CKEDITOR.dom.element.clearMarkers=function(a,b,c){var d=b.getCustomData("list_marker_names"),
e=b.getCustomData("list_marker_id"),f;for(f in d)b.removeCustomData(f);b.removeCustomData("list_marker_names");c&&(b.removeCustomData("list_marker_id"),delete a[e])};CKEDITOR.tools.extend(CKEDITOR.dom.element.prototype,{type:CKEDITOR.NODE_ELEMENT,addClass:function(a){var b=this.$.className;b&&(RegExp("(?:^|\\s)"+a+"(?:\\s|$)","").test(b)||(b+=" "+a));this.$.className=b||a},removeClass:function(a){var b=this.getAttribute("class");b&&(a=RegExp("(?:^|\\s+)"+a+"(?=\\s|$)","i"),a.test(b)&&((b=b.replace(a,
"").replace(/^\s+/,""))?this.setAttribute("class",b):this.removeAttribute("class")))},hasClass:function(a){return RegExp("(?:^|\\s+)"+a+"(?=\\s|$)","").test(this.getAttribute("class"))},append:function(a,b){"string"==typeof a&&(a=this.getDocument().createElement(a));b?this.$.insertBefore(a.$,this.$.firstChild):this.$.appendChild(a.$);return a},appendHtml:function(a){if(this.$.childNodes.length){var b=new CKEDITOR.dom.element("div",this.getDocument());b.setHtml(a);b.moveChildren(this)}else this.setHtml(a)},
appendText:function(a){void 0!=this.$.text?this.$.text+=a:this.append(new CKEDITOR.dom.text(a))},appendBogus:function(){for(var a=this.getLast();a&&a.type==CKEDITOR.NODE_TEXT&&!CKEDITOR.tools.rtrim(a.getText());)a=a.getPrevious();if(!a||!a.is||!a.is("br"))a=CKEDITOR.env.opera?this.getDocument().createText(""):this.getDocument().createElement("br"),CKEDITOR.env.gecko&&a.setAttribute("type","_moz"),this.append(a)},breakParent:function(a){var b=new CKEDITOR.dom.range(this.getDocument());b.setStartAfter(this);
b.setEndAfter(a);a=b.extractContents();b.insertNode(this.remove());a.insertAfterNode(this)},contains:CKEDITOR.env.ie||CKEDITOR.env.webkit?function(a){var b=this.$;return a.type!=CKEDITOR.NODE_ELEMENT?b.contains(a.getParent().$):b!=a.$&&b.contains(a.$)}:function(a){return!!(this.$.compareDocumentPosition(a.$)&16)},focus:function(){function a(){try{this.$.focus()}catch(a){}}return function(b){b?CKEDITOR.tools.setTimeout(a,100,this):a.call(this)}}(),getHtml:function(){var a=this.$.innerHTML;return CKEDITOR.env.ie?
a.replace(/<\?[^>]*>/g,""):a},getOuterHtml:function(){if(this.$.outerHTML)return this.$.outerHTML.replace(/<\?[^>]*>/,"");var a=this.$.ownerDocument.createElement("div");a.appendChild(this.$.cloneNode(!0));return a.innerHTML},setHtml:function(a){return this.$.innerHTML=a},setText:function(a){CKEDITOR.dom.element.prototype.setText=void 0!=this.$.innerText?function(a){return this.$.innerText=a}:function(a){return this.$.textContent=a};return this.setText(a)},getAttribute:function(){var a;return CKEDITOR.env.ie&&
(CKEDITOR.env.ie7Compat||CKEDITOR.env.ie6Compat)?function(a){switch(a){case "class":a="className";break;case "http-equiv":a="httpEquiv";break;case "name":return this.$.name;case "tabindex":return a=this.$.getAttribute(a,2),0!==a&&0===this.$.tabIndex&&(a=null),a;case "checked":return a=this.$.attributes.getNamedItem(a),(a.specified?a.nodeValue:this.$.checked)?"checked":null;case "hspace":case "value":return this.$[a];case "style":return this.$.style.cssText;case "contenteditable":case "contentEditable":return this.$.attributes.getNamedItem("contentEditable").specified?
this.$.getAttribute("contentEditable"):null}return this.$.getAttribute(a,2)}:function(a){return this.$.getAttribute(a,2)}}(),getChildren:function(){return new CKEDITOR.dom.nodeList(this.$.childNodes)},getComputedStyle:CKEDITOR.env.ie?function(a){return this.$.currentStyle[CKEDITOR.tools.cssStyleToDomStyle(a)]}:function(a){return this.getWindow().$.getComputedStyle(this.$,"").getPropertyValue(a)},getDtd:function(){var a=CKEDITOR.dtd[this.getName()];this.getDtd=function(){return a};return a},getElementsByTag:CKEDITOR.dom.document.prototype.getElementsByTag,
getTabIndex:CKEDITOR.env.ie?function(){var a=this.$.tabIndex;0===a&&!CKEDITOR.dtd.$tabIndex[this.getName()]&&0!==parseInt(this.getAttribute("tabindex"),10)&&(a=-1);return a}:CKEDITOR.env.webkit?function(){var a=this.$.tabIndex;void 0==a&&(a=parseInt(this.getAttribute("tabindex"),10),isNaN(a)&&(a=-1));return a}:function(){return this.$.tabIndex},getText:function(){return this.$.textContent||this.$.innerText||""},getWindow:function(){return this.getDocument().getWindow()},getId:function(){return this.$.id||
null},getNameAtt:function(){return this.$.name||null},getName:function(){var a=this.$.nodeName.toLowerCase();if(CKEDITOR.env.ie&&!(8<document.documentMode)){var b=this.$.scopeName;"HTML"!=b&&(a=b.toLowerCase()+":"+a)}return(this.getName=function(){return a})()},getValue:function(){return this.$.value},getFirst:function(a){var b=this.$.firstChild;(b=b&&new CKEDITOR.dom.node(b))&&a&&!a(b)&&(b=b.getNext(a));return b},getLast:function(a){var b=this.$.lastChild;(b=b&&new CKEDITOR.dom.node(b))&&a&&!a(b)&&
(b=b.getPrevious(a));return b},getStyle:function(a){return this.$.style[CKEDITOR.tools.cssStyleToDomStyle(a)]},is:function(){for(var a=this.getName(),b=0;b<arguments.length;b++)if(arguments[b]==a)return!0;return!1},isEditable:function(a){var b=this.getName();if(this.isReadOnly()||"none"==this.getComputedStyle("display")||"hidden"==this.getComputedStyle("visibility")||this.is("a")&&this.data("cke-saved-name")&&!this.getChildCount()||CKEDITOR.dtd.$nonEditable[b]||CKEDITOR.dtd.$empty[b])return!1;return!1!==
a?(a=CKEDITOR.dtd[b]||CKEDITOR.dtd.span)&&a["#"]:!0},isIdentical:function(a){if(this.getName()!=a.getName())return!1;for(var b=this.$.attributes,c=a.$.attributes,d=b.length,e=c.length,f=0;f<d;f++){var g=b[f];if("_moz_dirty"!=g.nodeName&&(!CKEDITOR.env.ie||g.specified&&"data-cke-expando"!=g.nodeName)&&g.nodeValue!=a.getAttribute(g.nodeName))return!1}if(CKEDITOR.env.ie)for(f=0;f<e;f++)if(g=c[f],g.specified&&"data-cke-expando"!=g.nodeName&&g.nodeValue!=this.getAttribute(g.nodeName))return!1;return!0},
isVisible:function(){var a=(this.$.offsetHeight||this.$.offsetWidth)&&"hidden"!=this.getComputedStyle("visibility"),b,c;if(a&&(CKEDITOR.env.webkit||CKEDITOR.env.opera))if(b=this.getWindow(),!b.equals(CKEDITOR.document.getWindow())&&(c=b.$.frameElement))a=(new CKEDITOR.dom.element(c)).isVisible();return!!a},isEmptyInlineRemoveable:function(){if(!CKEDITOR.dtd.$removeEmpty[this.getName()])return!1;for(var a=this.getChildren(),b=0,c=a.count();b<c;b++){var d=a.getItem(b);if(!(d.type==CKEDITOR.NODE_ELEMENT&&
d.data("cke-bookmark"))&&(d.type==CKEDITOR.NODE_ELEMENT&&!d.isEmptyInlineRemoveable()||d.type==CKEDITOR.NODE_TEXT&&CKEDITOR.tools.trim(d.getText())))return!1}return!0},hasAttributes:CKEDITOR.env.ie&&(CKEDITOR.env.ie7Compat||CKEDITOR.env.ie6Compat)?function(){for(var a=this.$.attributes,b=0;b<a.length;b++){var c=a[b];switch(c.nodeName){case "class":if(this.getAttribute("class"))return!0;case "data-cke-expando":continue;default:if(c.specified)return!0}}return!1}:function(){var a=this.$.attributes,b=
a.length,c={"data-cke-expando":1,_moz_dirty:1};return 0<b&&(2<b||!c[a[0].nodeName]||2==b&&!c[a[1].nodeName])},hasAttribute:function(){function a(a){a=this.$.attributes.getNamedItem(a);return!(!a||!a.specified)}return CKEDITOR.env.ie&&8>CKEDITOR.env.version?function(b){return"name"==b?!!this.$.name:a.call(this,b)}:a}(),hide:function(){this.setStyle("display","none")},moveChildren:function(a,b){var c=this.$,a=a.$;if(c!=a){var d;if(b)for(;d=c.lastChild;)a.insertBefore(c.removeChild(d),a.firstChild);
else for(;d=c.firstChild;)a.appendChild(c.removeChild(d))}},mergeSiblings:function(){function a(a,c,d){if(c&&c.type==CKEDITOR.NODE_ELEMENT){for(var e=[];c.data("cke-bookmark")||c.isEmptyInlineRemoveable();)if(e.push(c),c=d?c.getNext():c.getPrevious(),!c||c.type!=CKEDITOR.NODE_ELEMENT)return;if(a.isIdentical(c)){for(var f=d?a.getLast():a.getFirst();e.length;)e.shift().move(a,!d);c.moveChildren(a,!d);c.remove();f&&f.type==CKEDITOR.NODE_ELEMENT&&f.mergeSiblings()}}}return function(b){if(!1===b||CKEDITOR.dtd.$removeEmpty[this.getName()]||
this.is("a"))a(this,this.getNext(),!0),a(this,this.getPrevious())}}(),show:function(){this.setStyles({display:"",visibility:""})},setAttribute:function(){var a=function(a,c){this.$.setAttribute(a,c);return this};return CKEDITOR.env.ie&&(CKEDITOR.env.ie7Compat||CKEDITOR.env.ie6Compat)?function(b,c){"class"==b?this.$.className=c:"style"==b?this.$.style.cssText=c:"tabindex"==b?this.$.tabIndex=c:"checked"==b?this.$.checked=c:"contenteditable"==b?a.call(this,"contentEditable",c):a.apply(this,arguments);
return this}:CKEDITOR.env.ie8Compat&&CKEDITOR.env.secure?function(b,c){if("src"==b&&c.match(/^http:\/\//))try{a.apply(this,arguments)}catch(d){}else a.apply(this,arguments);return this}:a}(),setAttributes:function(a){for(var b in a)this.setAttribute(b,a[b]);return this},setValue:function(a){this.$.value=a;return this},removeAttribute:function(){var a;return CKEDITOR.env.ie&&(CKEDITOR.env.ie7Compat||CKEDITOR.env.ie6Compat)?function(a){"class"==a?a="className":"tabindex"==a?a="tabIndex":"contenteditable"==
a&&(a="contentEditable");this.$.removeAttribute(a)}:function(a){this.$.removeAttribute(a)}}(),removeAttributes:function(a){if(CKEDITOR.tools.isArray(a))for(var b=0;b<a.length;b++)this.removeAttribute(a[b]);else for(b in a)a.hasOwnProperty(b)&&this.removeAttribute(b)},removeStyle:function(a){var b=this.$.style;b.removeProperty?b.removeProperty(a):b.removeAttribute(CKEDITOR.tools.cssStyleToDomStyle(a));this.$.style.cssText||this.removeAttribute("style")},setStyle:function(a,b){this.$.style[CKEDITOR.tools.cssStyleToDomStyle(a)]=
b;return this},setStyles:function(a){for(var b in a)this.setStyle(b,a[b]);return this},setOpacity:function(a){CKEDITOR.env.ie&&9>CKEDITOR.env.version?(a=Math.round(100*a),this.setStyle("filter",100<=a?"":"progid:DXImageTransform.Microsoft.Alpha(opacity="+a+")")):this.setStyle("opacity",a)},unselectable:CKEDITOR.env.gecko?function(){this.$.style.MozUserSelect="none";this.on("dragstart",function(a){a.data.preventDefault()})}:CKEDITOR.env.webkit?function(){this.$.style.KhtmlUserSelect="none";this.on("dragstart",
function(a){a.data.preventDefault()})}:function(){if(CKEDITOR.env.ie||CKEDITOR.env.opera){var a=this.$,b=a.getElementsByTagName("*"),c=0;for(a.unselectable="on";a=b[c++];)switch(a.tagName.toLowerCase()){case "iframe":case "textarea":case "input":case "select":break;default:a.unselectable="on"}}},getPositionedAncestor:function(){for(var a=this;"html"!=a.getName();){if("static"!=a.getComputedStyle("position"))return a;a=a.getParent()}return null},getDocumentPosition:function(a){var l;var b=0,c=0,d=
this.getDocument(),e=d.getBody(),f="BackCompat"==d.$.compatMode;if(document.documentElement.getBoundingClientRect){var g=this.$.getBoundingClientRect(),h=d.$.documentElement,k=h.clientTop||e.$.clientTop||0,j=h.clientLeft||e.$.clientLeft||0,i=!0;CKEDITOR.env.ie&&(i=d.getDocumentElement().contains(this),d=d.getBody().contains(this),i=f&&d||!f&&i);i&&(b=g.left+(!f&&h.scrollLeft||e.$.scrollLeft),b-=j,c=g.top+(!f&&h.scrollTop||e.$.scrollTop),c-=k)}else{e=this;for(d=null;e&&!("body"==e.getName()||"html"==
e.getName());){b+=e.$.offsetLeft-e.$.scrollLeft;c+=e.$.offsetTop-e.$.scrollTop;e.equals(this)||(b+=e.$.clientLeft||0,c+=e.$.clientTop||0);for(;d&&!d.equals(e);)b-=d.$.scrollLeft,c-=d.$.scrollTop,d=d.getParent();d=e;l=(g=e.$.offsetParent)?new CKEDITOR.dom.element(g):null,e=l}}a&&(e=this.getWindow(),d=a.getWindow(),!e.equals(d)&&e.$.frameElement&&(a=(new CKEDITOR.dom.element(e.$.frameElement)).getDocumentPosition(a),b+=a.x,c+=a.y));!document.documentElement.getBoundingClientRect&&CKEDITOR.env.gecko&&
!f&&(b+=this.$.clientLeft?1:0,c+=this.$.clientTop?1:0);return{x:b,y:c}},scrollIntoView:function(a){var b=this.getParent();if(b){do if((b.$.clientWidth&&b.$.clientWidth<b.$.scrollWidth||b.$.clientHeight&&b.$.clientHeight<b.$.scrollHeight)&&this.scrollIntoParent(b,a,1),b.is("html")){var c=b.getWindow();try{var d=c.$.frameElement;d&&(b=new CKEDITOR.dom.element(d))}catch(e){}}while(b=b.getParent())}},scrollIntoParent:function(a,b,c){var d,e,f,g;function h(b,c){/body|html/.test(a.getName())?a.getWindow().$.scrollBy(b,
c):(a.$.scrollLeft+=b,a.$.scrollTop+=c)}function k(a,b){var c={x:0,y:0};if(!a.is(i?"body":"html")){var d=a.$.getBoundingClientRect();c.x=d.left;c.y=d.top}d=a.getWindow();d.equals(b)||(d=k(CKEDITOR.dom.element.get(d.$.frameElement),b),c.x+=d.x,c.y+=d.y);return c}function j(a,b){return parseInt(a.getComputedStyle("margin-"+b)||0,10)||0}!a&&(a=this.getWindow());f=a.getDocument();var i="BackCompat"==f.$.compatMode;a instanceof CKEDITOR.dom.window&&(a=i?f.getBody():f.getDocumentElement());f=a.getWindow();
e=k(this,f);var l=k(a,f),m=this.$.offsetHeight;d=this.$.offsetWidth;var n=a.$.clientHeight,o=a.$.clientWidth;f=e.x-j(this,"left")-l.x||0;g=e.y-j(this,"top")-l.y||0;d=e.x+d+j(this,"right")-(l.x+o)||0;e=e.y+m+j(this,"bottom")-(l.y+n)||0;if(0>g||0<e)h(0,!0===b?g:!1===b?e:0>g?g:e);if(c&&(0>f||0<d))h(0>f?f:d,0)},setState:function(a){switch(a){case CKEDITOR.TRISTATE_ON:this.addClass("cke_on");this.removeClass("cke_off");this.removeClass("cke_disabled");break;case CKEDITOR.TRISTATE_DISABLED:this.addClass("cke_disabled");
this.removeClass("cke_off");this.removeClass("cke_on");break;default:this.addClass("cke_off"),this.removeClass("cke_on"),this.removeClass("cke_disabled")}},getFrameDocument:function(){var a=this.$;return a&&new CKEDITOR.dom.document(a.contentWindow.document)},copyAttributes:function(a,b){for(var c=this.$.attributes,b=b||{},d=0;d<c.length;d++){var e=c[d],f=e.nodeName.toLowerCase(),g;if(!(f in b))if("checked"==f&&(g=this.getAttribute(f)))a.setAttribute(f,g);else if(e.specified||CKEDITOR.env.ie&&e.nodeValue&&
"value"==f){g=this.getAttribute(f);if(null===g)g=e.nodeValue;a.setAttribute(f,g)}}if(""!==this.$.style.cssText)a.$.style.cssText=this.$.style.cssText},renameNode:function(a){if(this.getName()!=a){var b=this.getDocument(),a=new CKEDITOR.dom.element(a,b);this.copyAttributes(a);this.moveChildren(a);this.getParent()&&this.$.parentNode.replaceChild(a.$,this.$);a.$["data-cke-expando"]=this.$["data-cke-expando"];this.$=a.$}},getChild:function(a){var b=this.$;if(a.slice)for(;0<a.length&&b;)b=b.childNodes[a.shift()];
else b=b.childNodes[a];return b?new CKEDITOR.dom.node(b):null},getChildCount:function(){return this.$.childNodes.length},disableContextMenu:function(){this.on("contextmenu",function(a){a.data.getTarget().hasClass("cke_enable_context_menu")||a.data.preventDefault()})},getDirection:function(a){return a?this.getComputedStyle("direction")||this.getDirection()||this.getDocument().$.dir||this.getDocument().getBody().getDirection(1):this.getStyle("direction")||this.getAttribute("dir")},data:function(a,b){a=
"data-"+a;if(void 0===b)return this.getAttribute(a);!1===b?this.removeAttribute(a):this.setAttribute(a,b);return null}});(function(){function a(a){for(var d=0,e=0,f=b[a].length;e<f;e++)d+=parseInt(this.getComputedStyle(b[a][e])||0,10)||0;return d}var b={width:["border-left-width","border-right-width","padding-left","padding-right"],height:["border-top-width","border-bottom-width","padding-top","padding-bottom"]};CKEDITOR.dom.element.prototype.setSize=function(b,d,e){if("number"==typeof d){if(e&&(!CKEDITOR.env.ie||
!CKEDITOR.env.quirks))d-=a.call(this,b);this.setStyle(b,d+"px")}};CKEDITOR.dom.element.prototype.getSize=function(b,d){var e=Math.max(this.$["offset"+CKEDITOR.tools.capitalize(b)],this.$["client"+CKEDITOR.tools.capitalize(b)])||0;d&&(e-=a.call(this,b));return e}})()});