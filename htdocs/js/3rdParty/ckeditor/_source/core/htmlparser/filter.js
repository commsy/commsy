//>>built
define("ckeditor/_source/core/htmlparser/filter",["dijit","dojo","dojox"],function(){(function(){function i(a,b){for(var c=0;a&&c<b.length;c++)var d=b[c],a=a.replace(d[0],d[1]);return a}function h(a,b,c){"function"==typeof b&&(b=[b]);var d,f;f=a.length;var e=b&&b.length;if(e){for(d=0;d<f&&a[d].pri<c;d++);for(f=e-1;0<=f;f--)if(e=b[f])e.pri=c,a.splice(d,0,e)}}function j(a,b,c){if(b)for(var d in b){var f=a[d];a[d]=g(f,b[d],c);f||a.$length++}}function g(a,b,c){if(b){b.pri=c;return a?(a.splice?h(a,b,c):
(a=a.pri>c?[b,a]:[a,b],a.filter=k),a):b.filter=b}}function k(a){for(var b=a.type||a instanceof CKEDITOR.htmlParser.fragment,c=0;c<this.length;c++){if(b)var d=a.type,f=a.name;var e=this[c].apply(window,arguments);if(!1===e)return e;if(b){if(e&&(e.name!=f||e.type!=d))return e}else if("string"!=typeof e)return e;void 0!=e&&(a=e)}return a}CKEDITOR.htmlParser.filter=CKEDITOR.tools.createClass({$:function(a){this._={elementNames:[],attributeNames:[],elements:{$length:0},attributes:{$length:0}};a&&this.addRules(a,
10)},proto:{addRules:function(a,b){"number"!=typeof b&&(b=10);h(this._.elementNames,a.elementNames,b);h(this._.attributeNames,a.attributeNames,b);j(this._.elements,a.elements,b);j(this._.attributes,a.attributes,b);this._.text=g(this._.text,a.text,b)||this._.text;this._.comment=g(this._.comment,a.comment,b)||this._.comment;this._.root=g(this._.root,a.root,b)||this._.root},onElementName:function(a){return i(a,this._.elementNames)},onAttributeName:function(a){return i(a,this._.attributeNames)},onText:function(a){var b=
this._.text;return b?b.filter(a):a},onComment:function(a,b){var c=this._.comment;return c?c.filter(a,b):a},onFragment:function(a){var b=this._.root;return b?b.filter(a):a},onElement:function(a){for(var b=[this._.elements["^"],this._.elements[a.name],this._.elements.$],c,d=0;3>d;d++)if(c=b[d]){c=c.filter(a,this);if(!1===c)return null;if(c&&c!=a)return this.onNode(c);if(a.parent&&!a.name)break}return a},onNode:function(a){var b=a.type;return b==CKEDITOR.NODE_ELEMENT?this.onElement(a):b==CKEDITOR.NODE_TEXT?
new CKEDITOR.htmlParser.text(this.onText(a.value)):b==CKEDITOR.NODE_COMMENT?new CKEDITOR.htmlParser.comment(this.onComment(a.value)):null},onAttribute:function(a,b,c){if(b=this._.attributes[b]){a=b.filter(c,a,this);if(!1===a)return!1;if("undefined"!=typeof a)return a}return c}}})})()});