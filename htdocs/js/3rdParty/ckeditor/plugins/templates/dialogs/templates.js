//>>built
define("ckeditor/plugins/templates/dialogs/templates",["dijit","dojo","dojox"],function(){(function(){CKEDITOR.dialog.add("templates",function(b){function o(a,c){var k=CKEDITOR.dom.element.createFromHtml('<a href="javascript:void(0)" tabIndex="-1" role="option" ><div class="cke_tpl_item"></div></a>'),d='<table style="width:350px;" class="cke_tpl_preview" role="presentation"><tr>';a.image&&c&&(d+='<td class="cke_tpl_preview_img"><img src="'+CKEDITOR.getUrl(c+a.image)+'"'+(CKEDITOR.env.ie6Compat?' onload="this.width=this.width"':
"")+' alt="" title=""></td>');d+='<td style="white-space:normal;"><span class="cke_tpl_title">'+a.title+"</span><br/>";a.description&&(d+="<span>"+a.description+"</span>");k.getFirst().setHtml(d+"</td></tr></table>");k.on("click",function(){p(a.html)});return k}function p(a){var c=CKEDITOR.dialog.getCurrent();c.getValueOf("selectTpl","chkInsertOpt")?(b.on("contentDom",function(a){a.removeListener();c.hide();a=new CKEDITOR.dom.range(b.document);a.moveToElementEditStart(b.document.getBody());a.select(1);
setTimeout(function(){b.fire("saveSnapshot")},0)}),b.fire("saveSnapshot"),b.setData(a)):(b.insertHtml(a),c.hide())}function h(a){var c=a.data.getTarget(),b=g.equals(c);if(b||g.contains(c)){var d=a.data.getKeystroke(),f=g.getElementsByTag("a"),e;if(f){if(b)e=f.getItem(0);else switch(d){case 40:e=c.getNext();break;case 38:e=c.getPrevious();break;case 13:case 32:c.fire("click")}e&&(e.focus(),a.data.preventDefault())}}}CKEDITOR.skins.load(b,"templates");var g,i="cke_tpl_list_label_"+CKEDITOR.tools.getNextNumber(),
f=b.lang.templates,l=b.config;return{title:b.lang.templates.title,minWidth:CKEDITOR.env.ie?440:400,minHeight:340,contents:[{id:"selectTpl",label:f.title,elements:[{type:"vbox",padding:5,children:[{id:"selectTplText",type:"html",html:"<span>"+f.selectPromptMsg+"</span>"},{id:"templatesList",type:"html",focus:!0,html:'<div class="cke_tpl_list" tabIndex="-1" role="listbox" aria-labelledby="'+i+'"><div class="cke_tpl_loading"><span></span></div></div><span class="cke_voice_label" id="'+i+'">'+f.options+
"</span>"},{id:"chkInsertOpt",type:"checkbox",label:f.insertOption,"default":l.templates_replaceContent}]}]}],buttons:[CKEDITOR.dialog.cancelButton],onShow:function(){var a=this.getContentElement("selectTpl","templatesList");g=a.getElement();CKEDITOR.loadTemplates(l.templates_files,function(){var c=(l.templates||"default").split(",");if(c.length){var b=g;b.setHtml("");for(var d=0,h=c.length;d<h;d++)for(var e=CKEDITOR.getTemplates(c[d]),i=e.imagesPath,e=e.templates,n=e.length,j=0;j<n;j++){var m=o(e[j],
i);m.setAttribute("aria-posinset",j+1);m.setAttribute("aria-setsize",n);b.append(m)}a.focus()}else g.setHtml('<div class="cke_tpl_empty"><span>'+f.emptyListMsg+"</span></div>")});this._.element.on("keydown",h)},onHide:function(){this._.element.removeListener("keydown",h)}}})})()});