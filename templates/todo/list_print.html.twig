</!DOCTYPE html>
{% import 'base/printmacro.html.twig' as macros %}
{% import 'utils/macros.html.twig' as utilsMacros %}

<html lang="de">
    <head>
        <meta charset="UTF-8" />
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1">

        <title>{% block title %}CommSy{% endblock %}</title>

        {% block stylesheets %}
            {{ macros.encore_absolute_link_tags('app_default') }}
        {% endblock %}
    </head>
    <body>
    {% block content %}
        <div class="uk-panel uk-panel-box uk-panel-box-primary">

            <div class="uk-panel-teaser cs-panel-teaser-primary">
                <div class="uk-flex uk-flex-middle uk-flex-space-between">
                    <div class="uk-text-large">
                        {% if not module is empty %}

                            {{module|trans({}, "rubric")|capitalize }}
                        {% else %}
                            Missing rubric title
                        {% endif %}

                        <div id="commsy-list-count-display" style="display:inline;">
                            ({{itemsCountArray.count}} {{ 'of'|trans({},'messages')}} {{itemsCountArray.countAll}})
                        </div>
                    </div>
                </div>
            </div>

            <div>
                {% block feed %}
                    {% for todo in todos %}
                        <article class="uk-comment page-break-inside">

                            {# item change information #}
                            {{ macros.statusColor(readerList, todo.itemId) }}

                            <header class="uk-grid uk-comment-header">

                                {# user icon and modification time #}
                                <div class="uk-width-1-10">
                                    {% if not todo.modificatorItem.isDeleted and todo.modificatorItem.isUser %}
                                        {{ macros.userIconLink(todo.modificatorItem) }}
                                    {% else %}
                                        {{ macros.userIcon(todo.modificatorItem) }}
                                    {% endif %}
                                    <div class="uk-comment-meta">
                                        <span class="uk-text-nowrap">
                                            {% if todo.modificationDate|date("d.m.Y") == "now"|date("d.m.Y") %}
                                                {{ 'today'|trans({})|capitalize }}, {{ todo.modificationDate|date("H:i") }}
                                            {% else %}
                                                {{ todo.modificationDate|craue_date }}
                                            {% endif %}
                                        </span>
                                    </div>
                                </div>

                                {# title and meta #}
                                <div class="uk-width-7-10">
                                    <h4 class="uk-comment-title">
                                        <a>{{ todo.title|decodeHtmlEntity }}</a>
                                    </h4>

                                    <div class="uk-comment-meta">

                                        {{ 'by'|trans({})|capitalize }}: {{ utilsMacros.userFullname(todo.modificatorItem) }} ({{ todo.creationDate|craue_date }})

                                    </div>

                                    <div class="uk-comment-meta">
                                        {{ macros.fileListShort(todo) }}
                                    </div>
                                </div>
                                <div class="uk-width-2-10 uk-text-right">
                                    {% if showRating %}
                                        {{ macros.ratingStatus(todo, ratingList) }}
                                    {% endif %}
                                    {% if showWorkflow %}
                                        {{ macros.workflowTrafficLight(todo) }}
                                    {% endif %}
                                    <i class="{{ macros.iconClassForItemType(todo.itemType, todo.internalStatus) }} uk-icon-small" data-uk-tooltip title="{{ todo.status }}"></i>
                                </div>
                            </header>
                        </article>
                    {% else %}
                        {{ 'No more results found'|trans}}
                    {% endfor %}
                {% endblock %}
            </div>
        </div>
    {% endblock %}
    </body>
</html>
